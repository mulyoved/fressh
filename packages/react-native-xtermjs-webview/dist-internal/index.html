<!doctype html>
<html style="margin: 0; padding: 0; width: 100%; height: 100%">
	<head>
		<meta charset="UTF-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"
		/>
		<style>
			/* Ensure xterm fills container and background extends to bottom */
			.xterm {
				height: 100% !important;
			}
			.xterm-viewport {
				background-color: inherit !important;
			}
			.xterm-screen {
				height: 100% !important;
			}
		</style>
		<script type="module" crossorigin>
			(function () {
				const X = document.createElement('link').relList;
				if (X && X.supports && X.supports('modulepreload')) return;
				for (const P of document.querySelectorAll('link[rel="modulepreload"]'))
					ue(P);
				new MutationObserver((P) => {
					for (const ae of P)
						if (ae.type === 'childList')
							for (const I of ae.addedNodes)
								I.tagName === 'LINK' && I.rel === 'modulepreload' && ue(I);
				}).observe(document, { childList: !0, subtree: !0 });
				function le(P) {
					const ae = {};
					return (
						P.integrity && (ae.integrity = P.integrity),
						P.referrerPolicy && (ae.referrerPolicy = P.referrerPolicy),
						P.crossOrigin === 'use-credentials'
							? (ae.credentials = 'include')
							: P.crossOrigin === 'anonymous'
								? (ae.credentials = 'omit')
								: (ae.credentials = 'same-origin'),
						ae
					);
				}
				function ue(P) {
					if (P.ep) return;
					P.ep = !0;
					const ae = le(P);
					fetch(P.href, ae);
				}
			})();
			var Ne = { exports: {} },
				Ve;
			function ft() {
				return (
					Ve ||
						((Ve = 1),
						(function (T, X) {
							(function (le, ue) {
								T.exports = ue();
							})(self, () =>
								(() => {
									var le = {};
									return (
										(() => {
											var ue = le;
											(Object.defineProperty(ue, '__esModule', { value: !0 }),
												(ue.FitAddon = void 0),
												(ue.FitAddon = class {
													activate(P) {
														this._terminal = P;
													}
													dispose() {}
													fit() {
														const P = this.proposeDimensions();
														if (
															!P ||
															!this._terminal ||
															isNaN(P.cols) ||
															isNaN(P.rows)
														)
															return;
														const ae = this._terminal._core;
														(this._terminal.rows === P.rows &&
															this._terminal.cols === P.cols) ||
															(ae._renderService.clear(),
															this._terminal.resize(P.cols, P.rows));
													}
													proposeDimensions() {
														if (
															!this._terminal ||
															!this._terminal.element ||
															!this._terminal.element.parentElement
														)
															return;
														const P = this._terminal._core,
															ae = P._renderService.dimensions;
														if (
															ae.css.cell.width === 0 ||
															ae.css.cell.height === 0
														)
															return;
														const I =
																this._terminal.options.scrollback === 0
																	? 0
																	: P.viewport.scrollBarWidth,
															r = window.getComputedStyle(
																this._terminal.element.parentElement,
															),
															a = parseInt(r.getPropertyValue('height')),
															l = Math.max(
																0,
																parseInt(r.getPropertyValue('width')),
															),
															_ = window.getComputedStyle(
																this._terminal.element,
															),
															n =
																a -
																(parseInt(_.getPropertyValue('padding-top')) +
																	parseInt(
																		_.getPropertyValue('padding-bottom'),
																	)),
															d =
																l -
																(parseInt(_.getPropertyValue('padding-right')) +
																	parseInt(
																		_.getPropertyValue('padding-left'),
																	)) -
																I;
														return {
															cols: Math.max(
																2,
																Math.floor(d / ae.css.cell.width),
															),
															rows: Math.max(
																1,
																Math.floor(n / ae.css.cell.height),
															),
														};
													}
												}));
										})(),
										le
									);
								})(),
							);
						})(Ne)),
					Ne.exports
				);
			}
			var pt = ft(),
				$e = { exports: {} },
				Ge;
			function vt() {
				return (
					Ge ||
						((Ge = 1),
						(function (T, X) {
							(function (le, ue) {
								T.exports = ue();
							})(globalThis, () =>
								(() => {
									var le = {
											4567: function (I, r, a) {
												var l =
														(this && this.__decorate) ||
														function (e, t, o, f) {
															var u,
																v = arguments.length,
																c =
																	v < 3
																		? t
																		: f === null
																			? (f = Object.getOwnPropertyDescriptor(
																					t,
																					o,
																				))
																			: f;
															if (
																typeof Reflect == 'object' &&
																typeof Reflect.decorate == 'function'
															)
																c = Reflect.decorate(e, t, o, f);
															else
																for (var m = e.length - 1; m >= 0; m--)
																	(u = e[m]) &&
																		(c =
																			(v < 3
																				? u(c)
																				: v > 3
																					? u(t, o, c)
																					: u(t, o)) || c);
															return (
																v > 3 && c && Object.defineProperty(t, o, c),
																c
															);
														},
													_ =
														(this && this.__param) ||
														function (e, t) {
															return function (o, f) {
																t(o, f, e);
															};
														};
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.AccessibilityManager = void 0));
												const n = a(9042),
													d = a(9924),
													p = a(844),
													g = a(4725),
													h = a(2585),
													s = a(3656);
												let i = (r.AccessibilityManager = class extends (
													p.Disposable
												) {
													constructor(e, t, o, f) {
														(super(),
															(this._terminal = e),
															(this._coreBrowserService = o),
															(this._renderService = f),
															(this._rowColumns = new WeakMap()),
															(this._liveRegionLineCount = 0),
															(this._charsToConsume = []),
															(this._charsToAnnounce = ''),
															(this._accessibilityContainer =
																this._coreBrowserService.mainDocument.createElement(
																	'div',
																)),
															this._accessibilityContainer.classList.add(
																'xterm-accessibility',
															),
															(this._rowContainer =
																this._coreBrowserService.mainDocument.createElement(
																	'div',
																)),
															this._rowContainer.setAttribute('role', 'list'),
															this._rowContainer.classList.add(
																'xterm-accessibility-tree',
															),
															(this._rowElements = []));
														for (let u = 0; u < this._terminal.rows; u++)
															((this._rowElements[u] =
																this._createAccessibilityTreeNode()),
																this._rowContainer.appendChild(
																	this._rowElements[u],
																));
														if (
															((this._topBoundaryFocusListener = (u) =>
																this._handleBoundaryFocus(u, 0)),
															(this._bottomBoundaryFocusListener = (u) =>
																this._handleBoundaryFocus(u, 1)),
															this._rowElements[0].addEventListener(
																'focus',
																this._topBoundaryFocusListener,
															),
															this._rowElements[
																this._rowElements.length - 1
															].addEventListener(
																'focus',
																this._bottomBoundaryFocusListener,
															),
															this._refreshRowsDimensions(),
															this._accessibilityContainer.appendChild(
																this._rowContainer,
															),
															(this._liveRegion =
																this._coreBrowserService.mainDocument.createElement(
																	'div',
																)),
															this._liveRegion.classList.add('live-region'),
															this._liveRegion.setAttribute(
																'aria-live',
																'assertive',
															),
															this._accessibilityContainer.appendChild(
																this._liveRegion,
															),
															(this._liveRegionDebouncer = this.register(
																new d.TimeBasedDebouncer(
																	this._renderRows.bind(this),
																),
															)),
															!this._terminal.element)
														)
															throw new Error(
																'Cannot enable accessibility before Terminal.open',
															);
														(this._terminal.element.insertAdjacentElement(
															'afterbegin',
															this._accessibilityContainer,
														),
															this.register(
																this._terminal.onResize((u) =>
																	this._handleResize(u.rows),
																),
															),
															this.register(
																this._terminal.onRender((u) =>
																	this._refreshRows(u.start, u.end),
																),
															),
															this.register(
																this._terminal.onScroll(() =>
																	this._refreshRows(),
																),
															),
															this.register(
																this._terminal.onA11yChar((u) =>
																	this._handleChar(u),
																),
															),
															this.register(
																this._terminal.onLineFeed(() =>
																	this._handleChar(`
`),
																),
															),
															this.register(
																this._terminal.onA11yTab((u) =>
																	this._handleTab(u),
																),
															),
															this.register(
																this._terminal.onKey((u) =>
																	this._handleKey(u.key),
																),
															),
															this.register(
																this._terminal.onBlur(() =>
																	this._clearLiveRegion(),
																),
															),
															this.register(
																this._renderService.onDimensionsChange(() =>
																	this._refreshRowsDimensions(),
																),
															),
															this.register(
																(0, s.addDisposableDomListener)(
																	document,
																	'selectionchange',
																	() => this._handleSelectionChange(),
																),
															),
															this.register(
																this._coreBrowserService.onDprChange(() =>
																	this._refreshRowsDimensions(),
																),
															),
															this._refreshRows(),
															this.register(
																(0, p.toDisposable)(() => {
																	(this._accessibilityContainer.remove(),
																		(this._rowElements.length = 0));
																}),
															));
													}
													_handleTab(e) {
														for (let t = 0; t < e; t++) this._handleChar(' ');
													}
													_handleChar(e) {
														this._liveRegionLineCount < 21 &&
															(this._charsToConsume.length > 0
																? this._charsToConsume.shift() !== e &&
																	(this._charsToAnnounce += e)
																: (this._charsToAnnounce += e),
															e ===
																`
` &&
																(this._liveRegionLineCount++,
																this._liveRegionLineCount === 21 &&
																	(this._liveRegion.textContent +=
																		n.tooMuchOutput)));
													}
													_clearLiveRegion() {
														((this._liveRegion.textContent = ''),
															(this._liveRegionLineCount = 0));
													}
													_handleKey(e) {
														(this._clearLiveRegion(),
															new RegExp('\\p{Control}', 'u').test(e) ||
																this._charsToConsume.push(e));
													}
													_refreshRows(e, t) {
														this._liveRegionDebouncer.refresh(
															e,
															t,
															this._terminal.rows,
														);
													}
													_renderRows(e, t) {
														const o = this._terminal.buffer,
															f = o.lines.length.toString();
														for (let u = e; u <= t; u++) {
															const v = o.lines.get(o.ydisp + u),
																c = [],
																m =
																	(v == null
																		? void 0
																		: v.translateToString(
																				!0,
																				void 0,
																				void 0,
																				c,
																			)) || '',
																w = (o.ydisp + u + 1).toString(),
																k = this._rowElements[u];
															k &&
																(m.length === 0
																	? ((k.innerText = 'Â '),
																		this._rowColumns.set(k, [0, 1]))
																	: ((k.textContent = m),
																		this._rowColumns.set(k, c)),
																k.setAttribute('aria-posinset', w),
																k.setAttribute('aria-setsize', f));
														}
														this._announceCharacters();
													}
													_announceCharacters() {
														this._charsToAnnounce.length !== 0 &&
															((this._liveRegion.textContent +=
																this._charsToAnnounce),
															(this._charsToAnnounce = ''));
													}
													_handleBoundaryFocus(e, t) {
														const o = e.target,
															f =
																this._rowElements[
																	t === 0 ? 1 : this._rowElements.length - 2
																];
														if (
															o.getAttribute('aria-posinset') ===
																(t === 0
																	? '1'
																	: `${this._terminal.buffer.lines.length}`) ||
															e.relatedTarget !== f
														)
															return;
														let u, v;
														if (
															(t === 0
																? ((u = o),
																	(v = this._rowElements.pop()),
																	this._rowContainer.removeChild(v))
																: ((u = this._rowElements.shift()),
																	(v = o),
																	this._rowContainer.removeChild(u)),
															u.removeEventListener(
																'focus',
																this._topBoundaryFocusListener,
															),
															v.removeEventListener(
																'focus',
																this._bottomBoundaryFocusListener,
															),
															t === 0)
														) {
															const c = this._createAccessibilityTreeNode();
															(this._rowElements.unshift(c),
																this._rowContainer.insertAdjacentElement(
																	'afterbegin',
																	c,
																));
														} else {
															const c = this._createAccessibilityTreeNode();
															(this._rowElements.push(c),
																this._rowContainer.appendChild(c));
														}
														(this._rowElements[0].addEventListener(
															'focus',
															this._topBoundaryFocusListener,
														),
															this._rowElements[
																this._rowElements.length - 1
															].addEventListener(
																'focus',
																this._bottomBoundaryFocusListener,
															),
															this._terminal.scrollLines(t === 0 ? -1 : 1),
															this._rowElements[
																t === 0 ? 1 : this._rowElements.length - 2
															].focus(),
															e.preventDefault(),
															e.stopImmediatePropagation());
													}
													_handleSelectionChange() {
														var m;
														if (this._rowElements.length === 0) return;
														const e = document.getSelection();
														if (!e) return;
														if (e.isCollapsed)
															return void (
																this._rowContainer.contains(e.anchorNode) &&
																this._terminal.clearSelection()
															);
														if (!e.anchorNode || !e.focusNode)
															return void console.error(
																'anchorNode and/or focusNode are null',
															);
														let t = {
																node: e.anchorNode,
																offset: e.anchorOffset,
															},
															o = { node: e.focusNode, offset: e.focusOffset };
														if (
															((t.node.compareDocumentPosition(o.node) &
																Node.DOCUMENT_POSITION_PRECEDING ||
																(t.node === o.node && t.offset > o.offset)) &&
																([t, o] = [o, t]),
															t.node.compareDocumentPosition(
																this._rowElements[0],
															) &
																(Node.DOCUMENT_POSITION_CONTAINED_BY |
																	Node.DOCUMENT_POSITION_FOLLOWING) &&
																(t = {
																	node: this._rowElements[0].childNodes[0],
																	offset: 0,
																}),
															!this._rowContainer.contains(t.node))
														)
															return;
														const f = this._rowElements.slice(-1)[0];
														if (
															(o.node.compareDocumentPosition(f) &
																(Node.DOCUMENT_POSITION_CONTAINED_BY |
																	Node.DOCUMENT_POSITION_PRECEDING) &&
																(o = {
																	node: f,
																	offset:
																		((m = f.textContent) == null
																			? void 0
																			: m.length) ?? 0,
																}),
															!this._rowContainer.contains(o.node))
														)
															return;
														const u = ({ node: w, offset: k }) => {
																const L = w instanceof Text ? w.parentNode : w;
																let b =
																	parseInt(
																		L == null
																			? void 0
																			: L.getAttribute('aria-posinset'),
																		10,
																	) - 1;
																if (isNaN(b))
																	return (
																		console.warn(
																			'row is invalid. Race condition?',
																		),
																		null
																	);
																const A = this._rowColumns.get(L);
																if (!A)
																	return (
																		console.warn(
																			'columns is null. Race condition?',
																		),
																		null
																	);
																let M =
																	k < A.length ? A[k] : A.slice(-1)[0] + 1;
																return (
																	M >= this._terminal.cols && (++b, (M = 0)),
																	{ row: b, column: M }
																);
															},
															v = u(t),
															c = u(o);
														if (v && c) {
															if (
																v.row > c.row ||
																(v.row === c.row && v.column >= c.column)
															)
																throw new Error('invalid range');
															this._terminal.select(
																v.column,
																v.row,
																(c.row - v.row) * this._terminal.cols -
																	v.column +
																	c.column,
															);
														}
													}
													_handleResize(e) {
														this._rowElements[
															this._rowElements.length - 1
														].removeEventListener(
															'focus',
															this._bottomBoundaryFocusListener,
														);
														for (
															let t = this._rowContainer.children.length;
															t < this._terminal.rows;
															t++
														)
															((this._rowElements[t] =
																this._createAccessibilityTreeNode()),
																this._rowContainer.appendChild(
																	this._rowElements[t],
																));
														for (; this._rowElements.length > e; )
															this._rowContainer.removeChild(
																this._rowElements.pop(),
															);
														(this._rowElements[
															this._rowElements.length - 1
														].addEventListener(
															'focus',
															this._bottomBoundaryFocusListener,
														),
															this._refreshRowsDimensions());
													}
													_createAccessibilityTreeNode() {
														const e =
															this._coreBrowserService.mainDocument.createElement(
																'div',
															);
														return (
															e.setAttribute('role', 'listitem'),
															(e.tabIndex = -1),
															this._refreshRowDimensions(e),
															e
														);
													}
													_refreshRowsDimensions() {
														if (
															this._renderService.dimensions.css.cell.height
														) {
															((this._accessibilityContainer.style.width = `${this._renderService.dimensions.css.canvas.width}px`),
																this._rowElements.length !==
																	this._terminal.rows &&
																	this._handleResize(this._terminal.rows));
															for (let e = 0; e < this._terminal.rows; e++)
																this._refreshRowDimensions(
																	this._rowElements[e],
																);
														}
													}
													_refreshRowDimensions(e) {
														e.style.height = `${this._renderService.dimensions.css.cell.height}px`;
													}
												});
												r.AccessibilityManager = i = l(
													[
														_(1, h.IInstantiationService),
														_(2, g.ICoreBrowserService),
														_(3, g.IRenderService),
													],
													i,
												);
											},
											3614: (I, r) => {
												function a(d) {
													return d.replace(/\r?\n/g, '\r');
												}
												function l(d, p) {
													return p ? '\x1B[200~' + d + '\x1B[201~' : d;
												}
												function _(d, p, g, h) {
													((d = l(
														(d = a(d)),
														g.decPrivateModes.bracketedPasteMode &&
															h.rawOptions.ignoreBracketedPasteMode !== !0,
													)),
														g.triggerDataEvent(d, !0),
														(p.value = ''));
												}
												function n(d, p, g) {
													const h = g.getBoundingClientRect(),
														s = d.clientX - h.left - 10,
														i = d.clientY - h.top - 10;
													((p.style.width = '20px'),
														(p.style.height = '20px'),
														(p.style.left = `${s}px`),
														(p.style.top = `${i}px`),
														(p.style.zIndex = '1000'),
														p.focus());
												}
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.rightClickHandler =
														r.moveTextAreaUnderMouseCursor =
														r.paste =
														r.handlePasteEvent =
														r.copyHandler =
														r.bracketTextForPaste =
														r.prepareTextForTerminal =
															void 0),
													(r.prepareTextForTerminal = a),
													(r.bracketTextForPaste = l),
													(r.copyHandler = function (d, p) {
														(d.clipboardData &&
															d.clipboardData.setData(
																'text/plain',
																p.selectionText,
															),
															d.preventDefault());
													}),
													(r.handlePasteEvent = function (d, p, g, h) {
														(d.stopPropagation(),
															d.clipboardData &&
																_(
																	d.clipboardData.getData('text/plain'),
																	p,
																	g,
																	h,
																));
													}),
													(r.paste = _),
													(r.moveTextAreaUnderMouseCursor = n),
													(r.rightClickHandler = function (d, p, g, h, s) {
														(n(d, p, g),
															s && h.rightClickSelect(d),
															(p.value = h.selectionText),
															p.select());
													}));
											},
											7239: (I, r, a) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.ColorContrastCache = void 0));
												const l = a(1505);
												r.ColorContrastCache = class {
													constructor() {
														((this._color = new l.TwoKeyMap()),
															(this._css = new l.TwoKeyMap()));
													}
													setCss(_, n, d) {
														this._css.set(_, n, d);
													}
													getCss(_, n) {
														return this._css.get(_, n);
													}
													setColor(_, n, d) {
														this._color.set(_, n, d);
													}
													getColor(_, n) {
														return this._color.get(_, n);
													}
													clear() {
														(this._color.clear(), this._css.clear());
													}
												};
											},
											3656: (I, r) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.addDisposableDomListener = void 0),
													(r.addDisposableDomListener = function (a, l, _, n) {
														a.addEventListener(l, _, n);
														let d = !1;
														return {
															dispose: () => {
																d || ((d = !0), a.removeEventListener(l, _, n));
															},
														};
													}));
											},
											3551: function (I, r, a) {
												var l =
														(this && this.__decorate) ||
														function (i, e, t, o) {
															var f,
																u = arguments.length,
																v =
																	u < 3
																		? e
																		: o === null
																			? (o = Object.getOwnPropertyDescriptor(
																					e,
																					t,
																				))
																			: o;
															if (
																typeof Reflect == 'object' &&
																typeof Reflect.decorate == 'function'
															)
																v = Reflect.decorate(i, e, t, o);
															else
																for (var c = i.length - 1; c >= 0; c--)
																	(f = i[c]) &&
																		(v =
																			(u < 3
																				? f(v)
																				: u > 3
																					? f(e, t, v)
																					: f(e, t)) || v);
															return (
																u > 3 && v && Object.defineProperty(e, t, v),
																v
															);
														},
													_ =
														(this && this.__param) ||
														function (i, e) {
															return function (t, o) {
																e(t, o, i);
															};
														};
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.Linkifier = void 0));
												const n = a(3656),
													d = a(8460),
													p = a(844),
													g = a(2585),
													h = a(4725);
												let s = (r.Linkifier = class extends p.Disposable {
													get currentLink() {
														return this._currentLink;
													}
													constructor(i, e, t, o, f) {
														(super(),
															(this._element = i),
															(this._mouseService = e),
															(this._renderService = t),
															(this._bufferService = o),
															(this._linkProviderService = f),
															(this._linkCacheDisposables = []),
															(this._isMouseOut = !0),
															(this._wasResized = !1),
															(this._activeLine = -1),
															(this._onShowLinkUnderline = this.register(
																new d.EventEmitter(),
															)),
															(this.onShowLinkUnderline =
																this._onShowLinkUnderline.event),
															(this._onHideLinkUnderline = this.register(
																new d.EventEmitter(),
															)),
															(this.onHideLinkUnderline =
																this._onHideLinkUnderline.event),
															this.register(
																(0, p.getDisposeArrayDisposable)(
																	this._linkCacheDisposables,
																),
															),
															this.register(
																(0, p.toDisposable)(() => {
																	var u;
																	((this._lastMouseEvent = void 0),
																		(u = this._activeProviderReplies) == null ||
																			u.clear());
																}),
															),
															this.register(
																this._bufferService.onResize(() => {
																	(this._clearCurrentLink(),
																		(this._wasResized = !0));
																}),
															),
															this.register(
																(0, n.addDisposableDomListener)(
																	this._element,
																	'mouseleave',
																	() => {
																		((this._isMouseOut = !0),
																			this._clearCurrentLink());
																	},
																),
															),
															this.register(
																(0, n.addDisposableDomListener)(
																	this._element,
																	'mousemove',
																	this._handleMouseMove.bind(this),
																),
															),
															this.register(
																(0, n.addDisposableDomListener)(
																	this._element,
																	'mousedown',
																	this._handleMouseDown.bind(this),
																),
															),
															this.register(
																(0, n.addDisposableDomListener)(
																	this._element,
																	'mouseup',
																	this._handleMouseUp.bind(this),
																),
															));
													}
													_handleMouseMove(i) {
														this._lastMouseEvent = i;
														const e = this._positionFromMouseEvent(
															i,
															this._element,
															this._mouseService,
														);
														if (!e) return;
														this._isMouseOut = !1;
														const t = i.composedPath();
														for (let o = 0; o < t.length; o++) {
															const f = t[o];
															if (f.classList.contains('xterm')) break;
															if (f.classList.contains('xterm-hover')) return;
														}
														(this._lastBufferCell &&
															e.x === this._lastBufferCell.x &&
															e.y === this._lastBufferCell.y) ||
															(this._handleHover(e),
															(this._lastBufferCell = e));
													}
													_handleHover(i) {
														if (this._activeLine !== i.y || this._wasResized)
															return (
																this._clearCurrentLink(),
																this._askForLink(i, !1),
																void (this._wasResized = !1)
															);
														(this._currentLink &&
															this._linkAtPosition(
																this._currentLink.link,
																i,
															)) ||
															(this._clearCurrentLink(),
															this._askForLink(i, !0));
													}
													_askForLink(i, e) {
														var o, f;
														(this._activeProviderReplies && e) ||
															((o = this._activeProviderReplies) == null ||
																o.forEach((u) => {
																	u == null ||
																		u.forEach((v) => {
																			v.link.dispose && v.link.dispose();
																		});
																}),
															(this._activeProviderReplies = new Map()),
															(this._activeLine = i.y));
														let t = !1;
														for (const [
															u,
															v,
														] of this._linkProviderService.linkProviders.entries())
															e
																? (f = this._activeProviderReplies) != null &&
																	f.get(u) &&
																	(t = this._checkLinkProviderResult(u, i, t))
																: v.provideLinks(i.y, (c) => {
																		var w, k;
																		if (this._isMouseOut) return;
																		const m =
																			c == null
																				? void 0
																				: c.map((L) => ({ link: L }));
																		((w = this._activeProviderReplies) ==
																			null || w.set(u, m),
																			(t = this._checkLinkProviderResult(
																				u,
																				i,
																				t,
																			)),
																			((k = this._activeProviderReplies) == null
																				? void 0
																				: k.size) ===
																				this._linkProviderService.linkProviders
																					.length &&
																				this._removeIntersectingLinks(
																					i.y,
																					this._activeProviderReplies,
																				));
																	});
													}
													_removeIntersectingLinks(i, e) {
														const t = new Set();
														for (let o = 0; o < e.size; o++) {
															const f = e.get(o);
															if (f)
																for (let u = 0; u < f.length; u++) {
																	const v = f[u],
																		c =
																			v.link.range.start.y < i
																				? 0
																				: v.link.range.start.x,
																		m =
																			v.link.range.end.y > i
																				? this._bufferService.cols
																				: v.link.range.end.x;
																	for (let w = c; w <= m; w++) {
																		if (t.has(w)) {
																			f.splice(u--, 1);
																			break;
																		}
																		t.add(w);
																	}
																}
														}
													}
													_checkLinkProviderResult(i, e, t) {
														var u;
														if (!this._activeProviderReplies) return t;
														const o = this._activeProviderReplies.get(i);
														let f = !1;
														for (let v = 0; v < i; v++)
															(this._activeProviderReplies.has(v) &&
																!this._activeProviderReplies.get(v)) ||
																(f = !0);
														if (!f && o) {
															const v = o.find((c) =>
																this._linkAtPosition(c.link, e),
															);
															v && ((t = !0), this._handleNewLink(v));
														}
														if (
															this._activeProviderReplies.size ===
																this._linkProviderService.linkProviders
																	.length &&
															!t
														)
															for (
																let v = 0;
																v < this._activeProviderReplies.size;
																v++
															) {
																const c =
																	(u = this._activeProviderReplies.get(v)) ==
																	null
																		? void 0
																		: u.find((m) =>
																				this._linkAtPosition(m.link, e),
																			);
																if (c) {
																	((t = !0), this._handleNewLink(c));
																	break;
																}
															}
														return t;
													}
													_handleMouseDown() {
														this._mouseDownLink = this._currentLink;
													}
													_handleMouseUp(i) {
														if (!this._currentLink) return;
														const e = this._positionFromMouseEvent(
															i,
															this._element,
															this._mouseService,
														);
														e &&
															this._mouseDownLink === this._currentLink &&
															this._linkAtPosition(this._currentLink.link, e) &&
															this._currentLink.link.activate(
																i,
																this._currentLink.link.text,
															);
													}
													_clearCurrentLink(i, e) {
														this._currentLink &&
															this._lastMouseEvent &&
															(!i ||
																!e ||
																(this._currentLink.link.range.start.y >= i &&
																	this._currentLink.link.range.end.y <= e)) &&
															(this._linkLeave(
																this._element,
																this._currentLink.link,
																this._lastMouseEvent,
															),
															(this._currentLink = void 0),
															(0, p.disposeArray)(this._linkCacheDisposables));
													}
													_handleNewLink(i) {
														if (!this._lastMouseEvent) return;
														const e = this._positionFromMouseEvent(
															this._lastMouseEvent,
															this._element,
															this._mouseService,
														);
														e &&
															this._linkAtPosition(i.link, e) &&
															((this._currentLink = i),
															(this._currentLink.state = {
																decorations: {
																	underline:
																		i.link.decorations === void 0 ||
																		i.link.decorations.underline,
																	pointerCursor:
																		i.link.decorations === void 0 ||
																		i.link.decorations.pointerCursor,
																},
																isHovered: !0,
															}),
															this._linkHover(
																this._element,
																i.link,
																this._lastMouseEvent,
															),
															(i.link.decorations = {}),
															Object.defineProperties(i.link.decorations, {
																pointerCursor: {
																	get: () => {
																		var t, o;
																		return (o =
																			(t = this._currentLink) == null
																				? void 0
																				: t.state) == null
																			? void 0
																			: o.decorations.pointerCursor;
																	},
																	set: (t) => {
																		var o;
																		(o = this._currentLink) != null &&
																			o.state &&
																			this._currentLink.state.decorations
																				.pointerCursor !== t &&
																			((this._currentLink.state.decorations.pointerCursor =
																				t),
																			this._currentLink.state.isHovered &&
																				this._element.classList.toggle(
																					'xterm-cursor-pointer',
																					t,
																				));
																	},
																},
																underline: {
																	get: () => {
																		var t, o;
																		return (o =
																			(t = this._currentLink) == null
																				? void 0
																				: t.state) == null
																			? void 0
																			: o.decorations.underline;
																	},
																	set: (t) => {
																		var o, f, u;
																		(o = this._currentLink) != null &&
																			o.state &&
																			((u =
																				(f = this._currentLink) == null
																					? void 0
																					: f.state) == null
																				? void 0
																				: u.decorations.underline) !== t &&
																			((this._currentLink.state.decorations.underline =
																				t),
																			this._currentLink.state.isHovered &&
																				this._fireUnderlineEvent(i.link, t));
																	},
																},
															}),
															this._linkCacheDisposables.push(
																this._renderService.onRenderedViewportChange(
																	(t) => {
																		if (!this._currentLink) return;
																		const o =
																				t.start === 0
																					? 0
																					: t.start +
																						1 +
																						this._bufferService.buffer.ydisp,
																			f =
																				this._bufferService.buffer.ydisp +
																				1 +
																				t.end;
																		if (
																			this._currentLink.link.range.start.y >=
																				o &&
																			this._currentLink.link.range.end.y <= f &&
																			(this._clearCurrentLink(o, f),
																			this._lastMouseEvent)
																		) {
																			const u = this._positionFromMouseEvent(
																				this._lastMouseEvent,
																				this._element,
																				this._mouseService,
																			);
																			u && this._askForLink(u, !1);
																		}
																	},
																),
															));
													}
													_linkHover(i, e, t) {
														var o;
														((o = this._currentLink) != null &&
															o.state &&
															((this._currentLink.state.isHovered = !0),
															this._currentLink.state.decorations.underline &&
																this._fireUnderlineEvent(e, !0),
															this._currentLink.state.decorations
																.pointerCursor &&
																i.classList.add('xterm-cursor-pointer')),
															e.hover && e.hover(t, e.text));
													}
													_fireUnderlineEvent(i, e) {
														const t = i.range,
															o = this._bufferService.buffer.ydisp,
															f = this._createLinkUnderlineEvent(
																t.start.x - 1,
																t.start.y - o - 1,
																t.end.x,
																t.end.y - o - 1,
																void 0,
															);
														(e
															? this._onShowLinkUnderline
															: this._onHideLinkUnderline
														).fire(f);
													}
													_linkLeave(i, e, t) {
														var o;
														((o = this._currentLink) != null &&
															o.state &&
															((this._currentLink.state.isHovered = !1),
															this._currentLink.state.decorations.underline &&
																this._fireUnderlineEvent(e, !1),
															this._currentLink.state.decorations
																.pointerCursor &&
																i.classList.remove('xterm-cursor-pointer')),
															e.leave && e.leave(t, e.text));
													}
													_linkAtPosition(i, e) {
														const t =
																i.range.start.y * this._bufferService.cols +
																i.range.start.x,
															o =
																i.range.end.y * this._bufferService.cols +
																i.range.end.x,
															f = e.y * this._bufferService.cols + e.x;
														return t <= f && f <= o;
													}
													_positionFromMouseEvent(i, e, t) {
														const o = t.getCoords(
															i,
															e,
															this._bufferService.cols,
															this._bufferService.rows,
														);
														if (o)
															return {
																x: o[0],
																y: o[1] + this._bufferService.buffer.ydisp,
															};
													}
													_createLinkUnderlineEvent(i, e, t, o, f) {
														return {
															x1: i,
															y1: e,
															x2: t,
															y2: o,
															cols: this._bufferService.cols,
															fg: f,
														};
													}
												});
												r.Linkifier = s = l(
													[
														_(1, h.IMouseService),
														_(2, h.IRenderService),
														_(3, g.IBufferService),
														_(4, h.ILinkProviderService),
													],
													s,
												);
											},
											9042: (I, r) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.tooMuchOutput = r.promptLabel = void 0),
													(r.promptLabel = 'Terminal input'),
													(r.tooMuchOutput =
														'Too much output to announce, navigate to rows manually to read'));
											},
											3730: function (I, r, a) {
												var l =
														(this && this.__decorate) ||
														function (h, s, i, e) {
															var t,
																o = arguments.length,
																f =
																	o < 3
																		? s
																		: e === null
																			? (e = Object.getOwnPropertyDescriptor(
																					s,
																					i,
																				))
																			: e;
															if (
																typeof Reflect == 'object' &&
																typeof Reflect.decorate == 'function'
															)
																f = Reflect.decorate(h, s, i, e);
															else
																for (var u = h.length - 1; u >= 0; u--)
																	(t = h[u]) &&
																		(f =
																			(o < 3
																				? t(f)
																				: o > 3
																					? t(s, i, f)
																					: t(s, i)) || f);
															return (
																o > 3 && f && Object.defineProperty(s, i, f),
																f
															);
														},
													_ =
														(this && this.__param) ||
														function (h, s) {
															return function (i, e) {
																s(i, e, h);
															};
														};
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.OscLinkProvider = void 0));
												const n = a(511),
													d = a(2585);
												let p = (r.OscLinkProvider = class {
													constructor(h, s, i) {
														((this._bufferService = h),
															(this._optionsService = s),
															(this._oscLinkService = i));
													}
													provideLinks(h, s) {
														var m;
														const i = this._bufferService.buffer.lines.get(
															h - 1,
														);
														if (!i) return void s(void 0);
														const e = [],
															t = this._optionsService.rawOptions.linkHandler,
															o = new n.CellData(),
															f = i.getTrimmedLength();
														let u = -1,
															v = -1,
															c = !1;
														for (let w = 0; w < f; w++)
															if (v !== -1 || i.hasContent(w)) {
																if (
																	(i.loadCell(w, o),
																	o.hasExtendedAttrs() && o.extended.urlId)
																) {
																	if (v === -1) {
																		((v = w), (u = o.extended.urlId));
																		continue;
																	}
																	c = o.extended.urlId !== u;
																} else v !== -1 && (c = !0);
																if (c || (v !== -1 && w === f - 1)) {
																	const k =
																		(m = this._oscLinkService.getLinkData(u)) ==
																		null
																			? void 0
																			: m.uri;
																	if (k) {
																		const L = {
																			start: { x: v + 1, y: h },
																			end: {
																				x: w + (c || w !== f - 1 ? 0 : 1),
																				y: h,
																			},
																		};
																		let b = !1;
																		if (!(t != null && t.allowNonHttpProtocols))
																			try {
																				const A = new URL(k);
																				['http:', 'https:'].includes(
																					A.protocol,
																				) || (b = !0);
																			} catch {
																				b = !0;
																			}
																		b ||
																			e.push({
																				text: k,
																				range: L,
																				activate: (A, M) =>
																					t ? t.activate(A, M, L) : g(0, M),
																				hover: (A, M) => {
																					var $;
																					return ($ =
																						t == null ? void 0 : t.hover) ==
																						null
																						? void 0
																						: $.call(t, A, M, L);
																				},
																				leave: (A, M) => {
																					var $;
																					return ($ =
																						t == null ? void 0 : t.leave) ==
																						null
																						? void 0
																						: $.call(t, A, M, L);
																				},
																			});
																	}
																	((c = !1),
																		o.hasExtendedAttrs() && o.extended.urlId
																			? ((v = w), (u = o.extended.urlId))
																			: ((v = -1), (u = -1)));
																}
															}
														s(e);
													}
												});
												function g(h, s) {
													if (
														confirm(`Do you want to navigate to ${s}?

WARNING: This link could potentially be dangerous`)
													) {
														const i = window.open();
														if (i) {
															try {
																i.opener = null;
															} catch {}
															i.location.href = s;
														} else
															console.warn(
																'Opening link blocked as opener could not be cleared',
															);
													}
												}
												r.OscLinkProvider = p = l(
													[
														_(0, d.IBufferService),
														_(1, d.IOptionsService),
														_(2, d.IOscLinkService),
													],
													p,
												);
											},
											6193: (I, r) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.RenderDebouncer = void 0),
													(r.RenderDebouncer = class {
														constructor(a, l) {
															((this._renderCallback = a),
																(this._coreBrowserService = l),
																(this._refreshCallbacks = []));
														}
														dispose() {
															this._animationFrame &&
																(this._coreBrowserService.window.cancelAnimationFrame(
																	this._animationFrame,
																),
																(this._animationFrame = void 0));
														}
														addRefreshCallback(a) {
															return (
																this._refreshCallbacks.push(a),
																this._animationFrame ||
																	(this._animationFrame =
																		this._coreBrowserService.window.requestAnimationFrame(
																			() => this._innerRefresh(),
																		)),
																this._animationFrame
															);
														}
														refresh(a, l, _) {
															((this._rowCount = _),
																(a = a !== void 0 ? a : 0),
																(l = l !== void 0 ? l : this._rowCount - 1),
																(this._rowStart =
																	this._rowStart !== void 0
																		? Math.min(this._rowStart, a)
																		: a),
																(this._rowEnd =
																	this._rowEnd !== void 0
																		? Math.max(this._rowEnd, l)
																		: l),
																this._animationFrame ||
																	(this._animationFrame =
																		this._coreBrowserService.window.requestAnimationFrame(
																			() => this._innerRefresh(),
																		)));
														}
														_innerRefresh() {
															if (
																((this._animationFrame = void 0),
																this._rowStart === void 0 ||
																	this._rowEnd === void 0 ||
																	this._rowCount === void 0)
															)
																return void this._runRefreshCallbacks();
															const a = Math.max(this._rowStart, 0),
																l = Math.min(this._rowEnd, this._rowCount - 1);
															((this._rowStart = void 0),
																(this._rowEnd = void 0),
																this._renderCallback(a, l),
																this._runRefreshCallbacks());
														}
														_runRefreshCallbacks() {
															for (const a of this._refreshCallbacks) a(0);
															this._refreshCallbacks = [];
														}
													}));
											},
											3236: (I, r, a) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.Terminal = void 0));
												const l = a(3614),
													_ = a(3656),
													n = a(3551),
													d = a(9042),
													p = a(3730),
													g = a(1680),
													h = a(3107),
													s = a(5744),
													i = a(2950),
													e = a(1296),
													t = a(428),
													o = a(4269),
													f = a(5114),
													u = a(8934),
													v = a(3230),
													c = a(9312),
													m = a(4725),
													w = a(6731),
													k = a(8055),
													L = a(8969),
													b = a(8460),
													A = a(844),
													M = a(6114),
													$ = a(8437),
													V = a(2584),
													j = a(7399),
													S = a(5941),
													y = a(9074),
													E = a(2585),
													x = a(5435),
													W = a(4567),
													z = a(779);
												class J extends L.CoreTerminal {
													get onFocus() {
														return this._onFocus.event;
													}
													get onBlur() {
														return this._onBlur.event;
													}
													get onA11yChar() {
														return this._onA11yCharEmitter.event;
													}
													get onA11yTab() {
														return this._onA11yTabEmitter.event;
													}
													get onWillOpen() {
														return this._onWillOpen.event;
													}
													constructor(D = {}) {
														(super(D),
															(this.browser = M),
															(this._keyDownHandled = !1),
															(this._keyDownSeen = !1),
															(this._keyPressHandled = !1),
															(this._unprocessedDeadKey = !1),
															(this._accessibilityManager = this.register(
																new A.MutableDisposable(),
															)),
															(this._onCursorMove = this.register(
																new b.EventEmitter(),
															)),
															(this.onCursorMove = this._onCursorMove.event),
															(this._onKey = this.register(
																new b.EventEmitter(),
															)),
															(this.onKey = this._onKey.event),
															(this._onRender = this.register(
																new b.EventEmitter(),
															)),
															(this.onRender = this._onRender.event),
															(this._onSelectionChange = this.register(
																new b.EventEmitter(),
															)),
															(this.onSelectionChange =
																this._onSelectionChange.event),
															(this._onTitleChange = this.register(
																new b.EventEmitter(),
															)),
															(this.onTitleChange = this._onTitleChange.event),
															(this._onBell = this.register(
																new b.EventEmitter(),
															)),
															(this.onBell = this._onBell.event),
															(this._onFocus = this.register(
																new b.EventEmitter(),
															)),
															(this._onBlur = this.register(
																new b.EventEmitter(),
															)),
															(this._onA11yCharEmitter = this.register(
																new b.EventEmitter(),
															)),
															(this._onA11yTabEmitter = this.register(
																new b.EventEmitter(),
															)),
															(this._onWillOpen = this.register(
																new b.EventEmitter(),
															)),
															this._setup(),
															(this._decorationService =
																this._instantiationService.createInstance(
																	y.DecorationService,
																)),
															this._instantiationService.setService(
																E.IDecorationService,
																this._decorationService,
															),
															(this._linkProviderService =
																this._instantiationService.createInstance(
																	z.LinkProviderService,
																)),
															this._instantiationService.setService(
																m.ILinkProviderService,
																this._linkProviderService,
															),
															this._linkProviderService.registerLinkProvider(
																this._instantiationService.createInstance(
																	p.OscLinkProvider,
																),
															),
															this.register(
																this._inputHandler.onRequestBell(() =>
																	this._onBell.fire(),
																),
															),
															this.register(
																this._inputHandler.onRequestRefreshRows(
																	(C, F) => this.refresh(C, F),
																),
															),
															this.register(
																this._inputHandler.onRequestSendFocus(() =>
																	this._reportFocus(),
																),
															),
															this.register(
																this._inputHandler.onRequestReset(() =>
																	this.reset(),
																),
															),
															this.register(
																this._inputHandler.onRequestWindowsOptionsReport(
																	(C) => this._reportWindowsOptions(C),
																),
															),
															this.register(
																this._inputHandler.onColor((C) =>
																	this._handleColorEvent(C),
																),
															),
															this.register(
																(0, b.forwardEvent)(
																	this._inputHandler.onCursorMove,
																	this._onCursorMove,
																),
															),
															this.register(
																(0, b.forwardEvent)(
																	this._inputHandler.onTitleChange,
																	this._onTitleChange,
																),
															),
															this.register(
																(0, b.forwardEvent)(
																	this._inputHandler.onA11yChar,
																	this._onA11yCharEmitter,
																),
															),
															this.register(
																(0, b.forwardEvent)(
																	this._inputHandler.onA11yTab,
																	this._onA11yTabEmitter,
																),
															),
															this.register(
																this._bufferService.onResize((C) =>
																	this._afterResize(C.cols, C.rows),
																),
															),
															this.register(
																(0, A.toDisposable)(() => {
																	var C, F;
																	((this._customKeyEventHandler = void 0),
																		(F =
																			(C = this.element) == null
																				? void 0
																				: C.parentNode) == null ||
																			F.removeChild(this.element));
																}),
															));
													}
													_handleColorEvent(D) {
														if (this._themeService)
															for (const C of D) {
																let F,
																	B = '';
																switch (C.index) {
																	case 256:
																		((F = 'foreground'), (B = '10'));
																		break;
																	case 257:
																		((F = 'background'), (B = '11'));
																		break;
																	case 258:
																		((F = 'cursor'), (B = '12'));
																		break;
																	default:
																		((F = 'ansi'), (B = '4;' + C.index));
																}
																switch (C.type) {
																	case 0:
																		const K = k.color.toColorRGB(
																			F === 'ansi'
																				? this._themeService.colors.ansi[
																						C.index
																					]
																				: this._themeService.colors[F],
																		);
																		this.coreService.triggerDataEvent(
																			`${V.C0.ESC}]${B};${(0, S.toRgbString)(K)}${V.C1_ESCAPED.ST}`,
																		);
																		break;
																	case 1:
																		if (F === 'ansi')
																			this._themeService.modifyColors(
																				(q) =>
																					(q.ansi[C.index] = k.channels.toColor(
																						...C.color,
																					)),
																			);
																		else {
																			const q = F;
																			this._themeService.modifyColors(
																				(oe) =>
																					(oe[q] = k.channels.toColor(
																						...C.color,
																					)),
																			);
																		}
																		break;
																	case 2:
																		this._themeService.restoreColor(C.index);
																}
															}
													}
													_setup() {
														(super._setup(),
															(this._customKeyEventHandler = void 0));
													}
													get buffer() {
														return this.buffers.active;
													}
													focus() {
														this.textarea &&
															this.textarea.focus({ preventScroll: !0 });
													}
													_handleScreenReaderModeOptionChange(D) {
														D
															? !this._accessibilityManager.value &&
																this._renderService &&
																(this._accessibilityManager.value =
																	this._instantiationService.createInstance(
																		W.AccessibilityManager,
																		this,
																	))
															: this._accessibilityManager.clear();
													}
													_handleTextAreaFocus(D) {
														(this.coreService.decPrivateModes.sendFocus &&
															this.coreService.triggerDataEvent(
																V.C0.ESC + '[I',
															),
															this.element.classList.add('focus'),
															this._showCursor(),
															this._onFocus.fire());
													}
													blur() {
														var D;
														return (D = this.textarea) == null
															? void 0
															: D.blur();
													}
													_handleTextAreaBlur() {
														((this.textarea.value = ''),
															this.refresh(this.buffer.y, this.buffer.y),
															this.coreService.decPrivateModes.sendFocus &&
																this.coreService.triggerDataEvent(
																	V.C0.ESC + '[O',
																),
															this.element.classList.remove('focus'),
															this._onBlur.fire());
													}
													_syncTextArea() {
														if (
															!this.textarea ||
															!this.buffer.isCursorInViewport ||
															this._compositionHelper.isComposing ||
															!this._renderService
														)
															return;
														const D = this.buffer.ybase + this.buffer.y,
															C = this.buffer.lines.get(D);
														if (!C) return;
														const F = Math.min(this.buffer.x, this.cols - 1),
															B =
																this._renderService.dimensions.css.cell.height,
															K = C.getWidth(F),
															q =
																this._renderService.dimensions.css.cell.width *
																K,
															oe =
																this.buffer.y *
																this._renderService.dimensions.css.cell.height,
															Se =
																F *
																this._renderService.dimensions.css.cell.width;
														((this.textarea.style.left = Se + 'px'),
															(this.textarea.style.top = oe + 'px'),
															(this.textarea.style.width = q + 'px'),
															(this.textarea.style.height = B + 'px'),
															(this.textarea.style.lineHeight = B + 'px'),
															(this.textarea.style.zIndex = '-5'));
													}
													_initGlobal() {
														(this._bindKeys(),
															this.register(
																(0, _.addDisposableDomListener)(
																	this.element,
																	'copy',
																	(C) => {
																		this.hasSelection() &&
																			(0, l.copyHandler)(
																				C,
																				this._selectionService,
																			);
																	},
																),
															));
														const D = (C) =>
															(0, l.handlePasteEvent)(
																C,
																this.textarea,
																this.coreService,
																this.optionsService,
															);
														(this.register(
															(0, _.addDisposableDomListener)(
																this.textarea,
																'paste',
																D,
															),
														),
															this.register(
																(0, _.addDisposableDomListener)(
																	this.element,
																	'paste',
																	D,
																),
															),
															M.isFirefox
																? this.register(
																		(0, _.addDisposableDomListener)(
																			this.element,
																			'mousedown',
																			(C) => {
																				C.button === 2 &&
																					(0, l.rightClickHandler)(
																						C,
																						this.textarea,
																						this.screenElement,
																						this._selectionService,
																						this.options.rightClickSelectsWord,
																					);
																			},
																		),
																	)
																: this.register(
																		(0, _.addDisposableDomListener)(
																			this.element,
																			'contextmenu',
																			(C) => {
																				(0, l.rightClickHandler)(
																					C,
																					this.textarea,
																					this.screenElement,
																					this._selectionService,
																					this.options.rightClickSelectsWord,
																				);
																			},
																		),
																	),
															M.isLinux &&
																this.register(
																	(0, _.addDisposableDomListener)(
																		this.element,
																		'auxclick',
																		(C) => {
																			C.button === 1 &&
																				(0, l.moveTextAreaUnderMouseCursor)(
																					C,
																					this.textarea,
																					this.screenElement,
																				);
																		},
																	),
																));
													}
													_bindKeys() {
														(this.register(
															(0, _.addDisposableDomListener)(
																this.textarea,
																'keyup',
																(D) => this._keyUp(D),
																!0,
															),
														),
															this.register(
																(0, _.addDisposableDomListener)(
																	this.textarea,
																	'keydown',
																	(D) => this._keyDown(D),
																	!0,
																),
															),
															this.register(
																(0, _.addDisposableDomListener)(
																	this.textarea,
																	'keypress',
																	(D) => this._keyPress(D),
																	!0,
																),
															),
															this.register(
																(0, _.addDisposableDomListener)(
																	this.textarea,
																	'compositionstart',
																	() =>
																		this._compositionHelper.compositionstart(),
																),
															),
															this.register(
																(0, _.addDisposableDomListener)(
																	this.textarea,
																	'compositionupdate',
																	(D) =>
																		this._compositionHelper.compositionupdate(
																			D,
																		),
																),
															),
															this.register(
																(0, _.addDisposableDomListener)(
																	this.textarea,
																	'compositionend',
																	() =>
																		this._compositionHelper.compositionend(),
																),
															),
															this.register(
																(0, _.addDisposableDomListener)(
																	this.textarea,
																	'input',
																	(D) => this._inputEvent(D),
																	!0,
																),
															),
															this.register(
																this.onRender(() =>
																	this._compositionHelper.updateCompositionElements(),
																),
															));
													}
													open(D) {
														var F;
														if (!D)
															throw new Error(
																'Terminal requires a parent element.',
															);
														if (
															(D.isConnected ||
																this._logService.debug(
																	'Terminal.open was called on an element that was not attached to the DOM',
																),
															((F = this.element) == null
																? void 0
																: F.ownerDocument.defaultView) &&
																this._coreBrowserService)
														)
															return void (
																this.element.ownerDocument.defaultView !==
																	this._coreBrowserService.window &&
																(this._coreBrowserService.window =
																	this.element.ownerDocument.defaultView)
															);
														((this._document = D.ownerDocument),
															this.options.documentOverride &&
																this.options.documentOverride instanceof
																	Document &&
																(this._document =
																	this.optionsService.rawOptions.documentOverride),
															(this.element =
																this._document.createElement('div')),
															(this.element.dir = 'ltr'),
															this.element.classList.add('terminal'),
															this.element.classList.add('xterm'),
															D.appendChild(this.element));
														const C = this._document.createDocumentFragment();
														((this._viewportElement =
															this._document.createElement('div')),
															this._viewportElement.classList.add(
																'xterm-viewport',
															),
															C.appendChild(this._viewportElement),
															(this._viewportScrollArea =
																this._document.createElement('div')),
															this._viewportScrollArea.classList.add(
																'xterm-scroll-area',
															),
															this._viewportElement.appendChild(
																this._viewportScrollArea,
															),
															(this.screenElement =
																this._document.createElement('div')),
															this.screenElement.classList.add('xterm-screen'),
															this.register(
																(0, _.addDisposableDomListener)(
																	this.screenElement,
																	'mousemove',
																	(B) => this.updateCursorStyle(B),
																),
															),
															(this._helperContainer =
																this._document.createElement('div')),
															this._helperContainer.classList.add(
																'xterm-helpers',
															),
															this.screenElement.appendChild(
																this._helperContainer,
															),
															C.appendChild(this.screenElement),
															(this.textarea =
																this._document.createElement('textarea')),
															this.textarea.classList.add(
																'xterm-helper-textarea',
															),
															this.textarea.setAttribute(
																'aria-label',
																d.promptLabel,
															),
															M.isChromeOS ||
																this.textarea.setAttribute(
																	'aria-multiline',
																	'false',
																),
															this.textarea.setAttribute('autocorrect', 'off'),
															this.textarea.setAttribute(
																'autocapitalize',
																'off',
															),
															this.textarea.setAttribute('spellcheck', 'false'),
															(this.textarea.tabIndex = 0),
															(this._coreBrowserService = this.register(
																this._instantiationService.createInstance(
																	f.CoreBrowserService,
																	this.textarea,
																	D.ownerDocument.defaultView ?? window,
																	(this._document ?? typeof window < 'u')
																		? window.document
																		: null,
																),
															)),
															this._instantiationService.setService(
																m.ICoreBrowserService,
																this._coreBrowserService,
															),
															this.register(
																(0, _.addDisposableDomListener)(
																	this.textarea,
																	'focus',
																	(B) => this._handleTextAreaFocus(B),
																),
															),
															this.register(
																(0, _.addDisposableDomListener)(
																	this.textarea,
																	'blur',
																	() => this._handleTextAreaBlur(),
																),
															),
															this._helperContainer.appendChild(this.textarea),
															(this._charSizeService =
																this._instantiationService.createInstance(
																	t.CharSizeService,
																	this._document,
																	this._helperContainer,
																)),
															this._instantiationService.setService(
																m.ICharSizeService,
																this._charSizeService,
															),
															(this._themeService =
																this._instantiationService.createInstance(
																	w.ThemeService,
																)),
															this._instantiationService.setService(
																m.IThemeService,
																this._themeService,
															),
															(this._characterJoinerService =
																this._instantiationService.createInstance(
																	o.CharacterJoinerService,
																)),
															this._instantiationService.setService(
																m.ICharacterJoinerService,
																this._characterJoinerService,
															),
															(this._renderService = this.register(
																this._instantiationService.createInstance(
																	v.RenderService,
																	this.rows,
																	this.screenElement,
																),
															)),
															this._instantiationService.setService(
																m.IRenderService,
																this._renderService,
															),
															this.register(
																this._renderService.onRenderedViewportChange(
																	(B) => this._onRender.fire(B),
																),
															),
															this.onResize((B) =>
																this._renderService.resize(B.cols, B.rows),
															),
															(this._compositionView =
																this._document.createElement('div')),
															this._compositionView.classList.add(
																'composition-view',
															),
															(this._compositionHelper =
																this._instantiationService.createInstance(
																	i.CompositionHelper,
																	this.textarea,
																	this._compositionView,
																)),
															this._helperContainer.appendChild(
																this._compositionView,
															),
															(this._mouseService =
																this._instantiationService.createInstance(
																	u.MouseService,
																)),
															this._instantiationService.setService(
																m.IMouseService,
																this._mouseService,
															),
															(this.linkifier = this.register(
																this._instantiationService.createInstance(
																	n.Linkifier,
																	this.screenElement,
																),
															)),
															this.element.appendChild(C));
														try {
															this._onWillOpen.fire(this.element);
														} catch {}
														(this._renderService.hasRenderer() ||
															this._renderService.setRenderer(
																this._createRenderer(),
															),
															(this.viewport =
																this._instantiationService.createInstance(
																	g.Viewport,
																	this._viewportElement,
																	this._viewportScrollArea,
																)),
															this.viewport.onRequestScrollLines((B) =>
																this.scrollLines(
																	B.amount,
																	B.suppressScrollEvent,
																	1,
																),
															),
															this.register(
																this._inputHandler.onRequestSyncScrollBar(() =>
																	this.viewport.syncScrollArea(),
																),
															),
															this.register(this.viewport),
															this.register(
																this.onCursorMove(() => {
																	(this._renderService.handleCursorMove(),
																		this._syncTextArea());
																}),
															),
															this.register(
																this.onResize(() =>
																	this._renderService.handleResize(
																		this.cols,
																		this.rows,
																	),
																),
															),
															this.register(
																this.onBlur(() =>
																	this._renderService.handleBlur(),
																),
															),
															this.register(
																this.onFocus(() =>
																	this._renderService.handleFocus(),
																),
															),
															this.register(
																this._renderService.onDimensionsChange(() =>
																	this.viewport.syncScrollArea(),
																),
															),
															(this._selectionService = this.register(
																this._instantiationService.createInstance(
																	c.SelectionService,
																	this.element,
																	this.screenElement,
																	this.linkifier,
																),
															)),
															this._instantiationService.setService(
																m.ISelectionService,
																this._selectionService,
															),
															this.register(
																this._selectionService.onRequestScrollLines(
																	(B) =>
																		this.scrollLines(
																			B.amount,
																			B.suppressScrollEvent,
																		),
																),
															),
															this.register(
																this._selectionService.onSelectionChange(() =>
																	this._onSelectionChange.fire(),
																),
															),
															this.register(
																this._selectionService.onRequestRedraw((B) =>
																	this._renderService.handleSelectionChanged(
																		B.start,
																		B.end,
																		B.columnSelectMode,
																	),
																),
															),
															this.register(
																this._selectionService.onLinuxMouseSelection(
																	(B) => {
																		((this.textarea.value = B),
																			this.textarea.focus(),
																			this.textarea.select());
																	},
																),
															),
															this.register(
																this._onScroll.event((B) => {
																	(this.viewport.syncScrollArea(),
																		this._selectionService.refresh());
																}),
															),
															this.register(
																(0, _.addDisposableDomListener)(
																	this._viewportElement,
																	'scroll',
																	() => this._selectionService.refresh(),
																),
															),
															this.register(
																this._instantiationService.createInstance(
																	h.BufferDecorationRenderer,
																	this.screenElement,
																),
															),
															this.register(
																(0, _.addDisposableDomListener)(
																	this.element,
																	'mousedown',
																	(B) =>
																		this._selectionService.handleMouseDown(B),
																),
															),
															this.coreMouseService.areMouseEventsActive
																? (this._selectionService.disable(),
																	this.element.classList.add(
																		'enable-mouse-events',
																	))
																: this._selectionService.enable(),
															this.options.screenReaderMode &&
																(this._accessibilityManager.value =
																	this._instantiationService.createInstance(
																		W.AccessibilityManager,
																		this,
																	)),
															this.register(
																this.optionsService.onSpecificOptionChange(
																	'screenReaderMode',
																	(B) =>
																		this._handleScreenReaderModeOptionChange(B),
																),
															),
															this.options.overviewRulerWidth &&
																(this._overviewRulerRenderer = this.register(
																	this._instantiationService.createInstance(
																		s.OverviewRulerRenderer,
																		this._viewportElement,
																		this.screenElement,
																	),
																)),
															this.optionsService.onSpecificOptionChange(
																'overviewRulerWidth',
																(B) => {
																	!this._overviewRulerRenderer &&
																		B &&
																		this._viewportElement &&
																		this.screenElement &&
																		(this._overviewRulerRenderer =
																			this.register(
																				this._instantiationService.createInstance(
																					s.OverviewRulerRenderer,
																					this._viewportElement,
																					this.screenElement,
																				),
																			));
																},
															),
															this._charSizeService.measure(),
															this.refresh(0, this.rows - 1),
															this._initGlobal(),
															this.bindMouse());
													}
													_createRenderer() {
														return this._instantiationService.createInstance(
															e.DomRenderer,
															this,
															this._document,
															this.element,
															this.screenElement,
															this._viewportElement,
															this._helperContainer,
															this.linkifier,
														);
													}
													bindMouse() {
														const D = this,
															C = this.element;
														function F(q) {
															const oe = D._mouseService.getMouseReportCoords(
																q,
																D.screenElement,
															);
															if (!oe) return !1;
															let Se, ve;
															switch (q.overrideType || q.type) {
																case 'mousemove':
																	((ve = 32),
																		q.buttons === void 0
																			? ((Se = 3),
																				q.button !== void 0 &&
																					(Se = q.button < 3 ? q.button : 3))
																			: (Se =
																					1 & q.buttons
																						? 0
																						: 4 & q.buttons
																							? 1
																							: 2 & q.buttons
																								? 2
																								: 3));
																	break;
																case 'mouseup':
																	((ve = 0),
																		(Se = q.button < 3 ? q.button : 3));
																	break;
																case 'mousedown':
																	((ve = 1),
																		(Se = q.button < 3 ? q.button : 3));
																	break;
																case 'wheel':
																	if (
																		(D._customWheelEventHandler &&
																			D._customWheelEventHandler(q) === !1) ||
																		D.viewport.getLinesScrolled(q) === 0
																	)
																		return !1;
																	((ve = q.deltaY < 0 ? 0 : 1), (Se = 4));
																	break;
																default:
																	return !1;
															}
															return (
																!(ve === void 0 || Se === void 0 || Se > 4) &&
																D.coreMouseService.triggerMouseEvent({
																	col: oe.col,
																	row: oe.row,
																	x: oe.x,
																	y: oe.y,
																	button: Se,
																	action: ve,
																	ctrl: q.ctrlKey,
																	alt: q.altKey,
																	shift: q.shiftKey,
																})
															);
														}
														const B = {
																mouseup: null,
																wheel: null,
																mousedrag: null,
																mousemove: null,
															},
															K = {
																mouseup: (q) => (
																	F(q),
																	q.buttons ||
																		(this._document.removeEventListener(
																			'mouseup',
																			B.mouseup,
																		),
																		B.mousedrag &&
																			this._document.removeEventListener(
																				'mousemove',
																				B.mousedrag,
																			)),
																	this.cancel(q)
																),
																wheel: (q) => (F(q), this.cancel(q, !0)),
																mousedrag: (q) => {
																	q.buttons && F(q);
																},
																mousemove: (q) => {
																	q.buttons || F(q);
																},
															};
														(this.register(
															this.coreMouseService.onProtocolChange((q) => {
																(q
																	? (this.optionsService.rawOptions.logLevel ===
																			'debug' &&
																			this._logService.debug(
																				'Binding to mouse events:',
																				this.coreMouseService.explainEvents(q),
																			),
																		this.element.classList.add(
																			'enable-mouse-events',
																		),
																		this._selectionService.disable())
																	: (this._logService.debug(
																			'Unbinding from mouse events.',
																		),
																		this.element.classList.remove(
																			'enable-mouse-events',
																		),
																		this._selectionService.enable()),
																	8 & q
																		? B.mousemove ||
																			(C.addEventListener(
																				'mousemove',
																				K.mousemove,
																			),
																			(B.mousemove = K.mousemove))
																		: (C.removeEventListener(
																				'mousemove',
																				B.mousemove,
																			),
																			(B.mousemove = null)),
																	16 & q
																		? B.wheel ||
																			(C.addEventListener('wheel', K.wheel, {
																				passive: !1,
																			}),
																			(B.wheel = K.wheel))
																		: (C.removeEventListener('wheel', B.wheel),
																			(B.wheel = null)),
																	2 & q
																		? B.mouseup || (B.mouseup = K.mouseup)
																		: (this._document.removeEventListener(
																				'mouseup',
																				B.mouseup,
																			),
																			(B.mouseup = null)),
																	4 & q
																		? B.mousedrag || (B.mousedrag = K.mousedrag)
																		: (this._document.removeEventListener(
																				'mousemove',
																				B.mousedrag,
																			),
																			(B.mousedrag = null)));
															}),
														),
															(this.coreMouseService.activeProtocol =
																this.coreMouseService.activeProtocol),
															this.register(
																(0, _.addDisposableDomListener)(
																	C,
																	'mousedown',
																	(q) => {
																		if (
																			(q.preventDefault(),
																			this.focus(),
																			this.coreMouseService
																				.areMouseEventsActive &&
																				!this._selectionService.shouldForceSelection(
																					q,
																				))
																		)
																			return (
																				F(q),
																				B.mouseup &&
																					this._document.addEventListener(
																						'mouseup',
																						B.mouseup,
																					),
																				B.mousedrag &&
																					this._document.addEventListener(
																						'mousemove',
																						B.mousedrag,
																					),
																				this.cancel(q)
																			);
																	},
																),
															),
															this.register(
																(0, _.addDisposableDomListener)(
																	C,
																	'wheel',
																	(q) => {
																		if (!B.wheel) {
																			if (
																				this._customWheelEventHandler &&
																				this._customWheelEventHandler(q) === !1
																			)
																				return !1;
																			if (!this.buffer.hasScrollback) {
																				const oe =
																					this.viewport.getLinesScrolled(q);
																				if (oe === 0) return;
																				const Se =
																					V.C0.ESC +
																					(this.coreService.decPrivateModes
																						.applicationCursorKeys
																						? 'O'
																						: '[') +
																					(q.deltaY < 0 ? 'A' : 'B');
																				let ve = '';
																				for (
																					let be = 0;
																					be < Math.abs(oe);
																					be++
																				)
																					ve += Se;
																				return (
																					this.coreService.triggerDataEvent(
																						ve,
																						!0,
																					),
																					this.cancel(q, !0)
																				);
																			}
																			return this.viewport.handleWheel(q)
																				? this.cancel(q)
																				: void 0;
																		}
																	},
																	{ passive: !1 },
																),
															),
															this.register(
																(0, _.addDisposableDomListener)(
																	C,
																	'touchstart',
																	(q) => {
																		if (
																			!this.coreMouseService
																				.areMouseEventsActive
																		)
																			return (
																				this.viewport.handleTouchStart(q),
																				this.cancel(q)
																			);
																	},
																	{ passive: !0 },
																),
															),
															this.register(
																(0, _.addDisposableDomListener)(
																	C,
																	'touchmove',
																	(q) => {
																		if (
																			!this.coreMouseService
																				.areMouseEventsActive
																		)
																			return this.viewport.handleTouchMove(q)
																				? void 0
																				: this.cancel(q);
																	},
																	{ passive: !1 },
																),
															));
													}
													refresh(D, C) {
														var F;
														(F = this._renderService) == null ||
															F.refreshRows(D, C);
													}
													updateCursorStyle(D) {
														var C;
														(C = this._selectionService) != null &&
														C.shouldColumnSelect(D)
															? this.element.classList.add('column-select')
															: this.element.classList.remove('column-select');
													}
													_showCursor() {
														this.coreService.isCursorInitialized ||
															((this.coreService.isCursorInitialized = !0),
															this.refresh(this.buffer.y, this.buffer.y));
													}
													scrollLines(D, C, F = 0) {
														var B;
														F === 1
															? (super.scrollLines(D, C, F),
																this.refresh(0, this.rows - 1))
															: (B = this.viewport) == null || B.scrollLines(D);
													}
													paste(D) {
														(0, l.paste)(
															D,
															this.textarea,
															this.coreService,
															this.optionsService,
														);
													}
													attachCustomKeyEventHandler(D) {
														this._customKeyEventHandler = D;
													}
													attachCustomWheelEventHandler(D) {
														this._customWheelEventHandler = D;
													}
													registerLinkProvider(D) {
														return this._linkProviderService.registerLinkProvider(
															D,
														);
													}
													registerCharacterJoiner(D) {
														if (!this._characterJoinerService)
															throw new Error('Terminal must be opened first');
														const C = this._characterJoinerService.register(D);
														return (this.refresh(0, this.rows - 1), C);
													}
													deregisterCharacterJoiner(D) {
														if (!this._characterJoinerService)
															throw new Error('Terminal must be opened first');
														this._characterJoinerService.deregister(D) &&
															this.refresh(0, this.rows - 1);
													}
													get markers() {
														return this.buffer.markers;
													}
													registerMarker(D) {
														return this.buffer.addMarker(
															this.buffer.ybase + this.buffer.y + D,
														);
													}
													registerDecoration(D) {
														return this._decorationService.registerDecoration(
															D,
														);
													}
													hasSelection() {
														return (
															!!this._selectionService &&
															this._selectionService.hasSelection
														);
													}
													select(D, C, F) {
														this._selectionService.setSelection(D, C, F);
													}
													getSelection() {
														return this._selectionService
															? this._selectionService.selectionText
															: '';
													}
													getSelectionPosition() {
														if (
															this._selectionService &&
															this._selectionService.hasSelection
														)
															return {
																start: {
																	x: this._selectionService.selectionStart[0],
																	y: this._selectionService.selectionStart[1],
																},
																end: {
																	x: this._selectionService.selectionEnd[0],
																	y: this._selectionService.selectionEnd[1],
																},
															};
													}
													clearSelection() {
														var D;
														(D = this._selectionService) == null ||
															D.clearSelection();
													}
													selectAll() {
														var D;
														(D = this._selectionService) == null ||
															D.selectAll();
													}
													selectLines(D, C) {
														var F;
														(F = this._selectionService) == null ||
															F.selectLines(D, C);
													}
													_keyDown(D) {
														if (
															((this._keyDownHandled = !1),
															(this._keyDownSeen = !0),
															this._customKeyEventHandler &&
																this._customKeyEventHandler(D) === !1)
														)
															return !1;
														const C =
															this.browser.isMac &&
															this.options.macOptionIsMeta &&
															D.altKey;
														if (!C && !this._compositionHelper.keydown(D))
															return (
																this.options.scrollOnUserInput &&
																	this.buffer.ybase !== this.buffer.ydisp &&
																	this.scrollToBottom(),
																!1
															);
														C ||
															(D.key !== 'Dead' && D.key !== 'AltGraph') ||
															(this._unprocessedDeadKey = !0);
														const F = (0, j.evaluateKeyboardEvent)(
															D,
															this.coreService.decPrivateModes
																.applicationCursorKeys,
															this.browser.isMac,
															this.options.macOptionIsMeta,
														);
														if (
															(this.updateCursorStyle(D),
															F.type === 3 || F.type === 2)
														) {
															const B = this.rows - 1;
															return (
																this.scrollLines(F.type === 2 ? -B : B),
																this.cancel(D, !0)
															);
														}
														return (
															F.type === 1 && this.selectAll(),
															!!this._isThirdLevelShift(this.browser, D) ||
																(F.cancel && this.cancel(D, !0),
																!F.key ||
																	!!(
																		D.key &&
																		!D.ctrlKey &&
																		!D.altKey &&
																		!D.metaKey &&
																		D.key.length === 1 &&
																		D.key.charCodeAt(0) >= 65 &&
																		D.key.charCodeAt(0) <= 90
																	) ||
																	(this._unprocessedDeadKey
																		? ((this._unprocessedDeadKey = !1), !0)
																		: ((F.key !== V.C0.ETX &&
																				F.key !== V.C0.CR) ||
																				(this.textarea.value = ''),
																			this._onKey.fire({
																				key: F.key,
																				domEvent: D,
																			}),
																			this._showCursor(),
																			this.coreService.triggerDataEvent(
																				F.key,
																				!0,
																			),
																			!this.optionsService.rawOptions
																				.screenReaderMode ||
																			D.altKey ||
																			D.ctrlKey
																				? this.cancel(D, !0)
																				: void (this._keyDownHandled = !0))))
														);
													}
													_isThirdLevelShift(D, C) {
														const F =
															(D.isMac &&
																!this.options.macOptionIsMeta &&
																C.altKey &&
																!C.ctrlKey &&
																!C.metaKey) ||
															(D.isWindows &&
																C.altKey &&
																C.ctrlKey &&
																!C.metaKey) ||
															(D.isWindows && C.getModifierState('AltGraph'));
														return C.type === 'keypress'
															? F
															: F && (!C.keyCode || C.keyCode > 47);
													}
													_keyUp(D) {
														((this._keyDownSeen = !1),
															(this._customKeyEventHandler &&
																this._customKeyEventHandler(D) === !1) ||
																((function (C) {
																	return (
																		C.keyCode === 16 ||
																		C.keyCode === 17 ||
																		C.keyCode === 18
																	);
																})(D) || this.focus(),
																this.updateCursorStyle(D),
																(this._keyPressHandled = !1)));
													}
													_keyPress(D) {
														let C;
														if (
															((this._keyPressHandled = !1),
															this._keyDownHandled ||
																(this._customKeyEventHandler &&
																	this._customKeyEventHandler(D) === !1))
														)
															return !1;
														if ((this.cancel(D), D.charCode)) C = D.charCode;
														else if (D.which === null || D.which === void 0)
															C = D.keyCode;
														else {
															if (D.which === 0 || D.charCode === 0) return !1;
															C = D.which;
														}
														return !(
															!C ||
															((D.altKey || D.ctrlKey || D.metaKey) &&
																!this._isThirdLevelShift(this.browser, D)) ||
															((C = String.fromCharCode(C)),
															this._onKey.fire({ key: C, domEvent: D }),
															this._showCursor(),
															this.coreService.triggerDataEvent(C, !0),
															(this._keyPressHandled = !0),
															(this._unprocessedDeadKey = !1),
															0)
														);
													}
													_inputEvent(D) {
														if (
															D.data &&
															D.inputType === 'insertText' &&
															(!D.composed || !this._keyDownSeen) &&
															!this.optionsService.rawOptions.screenReaderMode
														) {
															if (this._keyPressHandled) return !1;
															this._unprocessedDeadKey = !1;
															const C = D.data;
															return (
																this.coreService.triggerDataEvent(C, !0),
																this.cancel(D),
																!0
															);
														}
														return !1;
													}
													resize(D, C) {
														D !== this.cols || C !== this.rows
															? super.resize(D, C)
															: this._charSizeService &&
																!this._charSizeService.hasValidSize &&
																this._charSizeService.measure();
													}
													_afterResize(D, C) {
														var F, B;
														((F = this._charSizeService) == null || F.measure(),
															(B = this.viewport) == null ||
																B.syncScrollArea(!0));
													}
													clear() {
														var D;
														if (
															this.buffer.ybase !== 0 ||
															this.buffer.y !== 0
														) {
															(this.buffer.clearAllMarkers(),
																this.buffer.lines.set(
																	0,
																	this.buffer.lines.get(
																		this.buffer.ybase + this.buffer.y,
																	),
																),
																(this.buffer.lines.length = 1),
																(this.buffer.ydisp = 0),
																(this.buffer.ybase = 0),
																(this.buffer.y = 0));
															for (let C = 1; C < this.rows; C++)
																this.buffer.lines.push(
																	this.buffer.getBlankLine($.DEFAULT_ATTR_DATA),
																);
															(this._onScroll.fire({
																position: this.buffer.ydisp,
																source: 0,
															}),
																(D = this.viewport) == null || D.reset(),
																this.refresh(0, this.rows - 1));
														}
													}
													reset() {
														var C, F;
														((this.options.rows = this.rows),
															(this.options.cols = this.cols));
														const D = this._customKeyEventHandler;
														(this._setup(),
															super.reset(),
															(C = this._selectionService) == null || C.reset(),
															this._decorationService.reset(),
															(F = this.viewport) == null || F.reset(),
															(this._customKeyEventHandler = D),
															this.refresh(0, this.rows - 1));
													}
													clearTextureAtlas() {
														var D;
														(D = this._renderService) == null ||
															D.clearTextureAtlas();
													}
													_reportFocus() {
														var D;
														(D = this.element) != null &&
														D.classList.contains('focus')
															? this.coreService.triggerDataEvent(
																	V.C0.ESC + '[I',
																)
															: this.coreService.triggerDataEvent(
																	V.C0.ESC + '[O',
																);
													}
													_reportWindowsOptions(D) {
														if (this._renderService)
															switch (D) {
																case x.WindowsOptionsReportType
																	.GET_WIN_SIZE_PIXELS:
																	const C =
																			this._renderService.dimensions.css.canvas.width.toFixed(
																				0,
																			),
																		F =
																			this._renderService.dimensions.css.canvas.height.toFixed(
																				0,
																			);
																	this.coreService.triggerDataEvent(
																		`${V.C0.ESC}[4;${F};${C}t`,
																	);
																	break;
																case x.WindowsOptionsReportType
																	.GET_CELL_SIZE_PIXELS:
																	const B =
																			this._renderService.dimensions.css.cell.width.toFixed(
																				0,
																			),
																		K =
																			this._renderService.dimensions.css.cell.height.toFixed(
																				0,
																			);
																	this.coreService.triggerDataEvent(
																		`${V.C0.ESC}[6;${K};${B}t`,
																	);
															}
													}
													cancel(D, C) {
														if (this.options.cancelEvents || C)
															return (
																D.preventDefault(),
																D.stopPropagation(),
																!1
															);
													}
												}
												r.Terminal = J;
											},
											9924: (I, r) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.TimeBasedDebouncer = void 0),
													(r.TimeBasedDebouncer = class {
														constructor(a, l = 1e3) {
															((this._renderCallback = a),
																(this._debounceThresholdMS = l),
																(this._lastRefreshMs = 0),
																(this._additionalRefreshRequested = !1));
														}
														dispose() {
															this._refreshTimeoutID &&
																clearTimeout(this._refreshTimeoutID);
														}
														refresh(a, l, _) {
															((this._rowCount = _),
																(a = a !== void 0 ? a : 0),
																(l = l !== void 0 ? l : this._rowCount - 1),
																(this._rowStart =
																	this._rowStart !== void 0
																		? Math.min(this._rowStart, a)
																		: a),
																(this._rowEnd =
																	this._rowEnd !== void 0
																		? Math.max(this._rowEnd, l)
																		: l));
															const n = Date.now();
															if (
																n - this._lastRefreshMs >=
																this._debounceThresholdMS
															)
																((this._lastRefreshMs = n),
																	this._innerRefresh());
															else if (!this._additionalRefreshRequested) {
																const d = n - this._lastRefreshMs,
																	p = this._debounceThresholdMS - d;
																((this._additionalRefreshRequested = !0),
																	(this._refreshTimeoutID = window.setTimeout(
																		() => {
																			((this._lastRefreshMs = Date.now()),
																				this._innerRefresh(),
																				(this._additionalRefreshRequested = !1),
																				(this._refreshTimeoutID = void 0));
																		},
																		p,
																	)));
															}
														}
														_innerRefresh() {
															if (
																this._rowStart === void 0 ||
																this._rowEnd === void 0 ||
																this._rowCount === void 0
															)
																return;
															const a = Math.max(this._rowStart, 0),
																l = Math.min(this._rowEnd, this._rowCount - 1);
															((this._rowStart = void 0),
																(this._rowEnd = void 0),
																this._renderCallback(a, l));
														}
													}));
											},
											1680: function (I, r, a) {
												var l =
														(this && this.__decorate) ||
														function (i, e, t, o) {
															var f,
																u = arguments.length,
																v =
																	u < 3
																		? e
																		: o === null
																			? (o = Object.getOwnPropertyDescriptor(
																					e,
																					t,
																				))
																			: o;
															if (
																typeof Reflect == 'object' &&
																typeof Reflect.decorate == 'function'
															)
																v = Reflect.decorate(i, e, t, o);
															else
																for (var c = i.length - 1; c >= 0; c--)
																	(f = i[c]) &&
																		(v =
																			(u < 3
																				? f(v)
																				: u > 3
																					? f(e, t, v)
																					: f(e, t)) || v);
															return (
																u > 3 && v && Object.defineProperty(e, t, v),
																v
															);
														},
													_ =
														(this && this.__param) ||
														function (i, e) {
															return function (t, o) {
																e(t, o, i);
															};
														};
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.Viewport = void 0));
												const n = a(3656),
													d = a(4725),
													p = a(8460),
													g = a(844),
													h = a(2585);
												let s = (r.Viewport = class extends g.Disposable {
													constructor(i, e, t, o, f, u, v, c) {
														(super(),
															(this._viewportElement = i),
															(this._scrollArea = e),
															(this._bufferService = t),
															(this._optionsService = o),
															(this._charSizeService = f),
															(this._renderService = u),
															(this._coreBrowserService = v),
															(this.scrollBarWidth = 0),
															(this._currentRowHeight = 0),
															(this._currentDeviceCellHeight = 0),
															(this._lastRecordedBufferLength = 0),
															(this._lastRecordedViewportHeight = 0),
															(this._lastRecordedBufferHeight = 0),
															(this._lastTouchY = 0),
															(this._lastScrollTop = 0),
															(this._wheelPartialScroll = 0),
															(this._refreshAnimationFrame = null),
															(this._ignoreNextScrollEvent = !1),
															(this._smoothScrollState = {
																startTime: 0,
																origin: -1,
																target: -1,
															}),
															(this._onRequestScrollLines = this.register(
																new p.EventEmitter(),
															)),
															(this.onRequestScrollLines =
																this._onRequestScrollLines.event),
															(this.scrollBarWidth =
																this._viewportElement.offsetWidth -
																	this._scrollArea.offsetWidth || 15),
															this.register(
																(0, n.addDisposableDomListener)(
																	this._viewportElement,
																	'scroll',
																	this._handleScroll.bind(this),
																),
															),
															(this._activeBuffer = this._bufferService.buffer),
															this.register(
																this._bufferService.buffers.onBufferActivate(
																	(m) => (this._activeBuffer = m.activeBuffer),
																),
															),
															(this._renderDimensions =
																this._renderService.dimensions),
															this.register(
																this._renderService.onDimensionsChange(
																	(m) => (this._renderDimensions = m),
																),
															),
															this._handleThemeChange(c.colors),
															this.register(
																c.onChangeColors((m) =>
																	this._handleThemeChange(m),
																),
															),
															this.register(
																this._optionsService.onSpecificOptionChange(
																	'scrollback',
																	() => this.syncScrollArea(),
																),
															),
															setTimeout(() => this.syncScrollArea()));
													}
													_handleThemeChange(i) {
														this._viewportElement.style.backgroundColor =
															i.background.css;
													}
													reset() {
														((this._currentRowHeight = 0),
															(this._currentDeviceCellHeight = 0),
															(this._lastRecordedBufferLength = 0),
															(this._lastRecordedViewportHeight = 0),
															(this._lastRecordedBufferHeight = 0),
															(this._lastTouchY = 0),
															(this._lastScrollTop = 0),
															this._coreBrowserService.window.requestAnimationFrame(
																() => this.syncScrollArea(),
															));
													}
													_refresh(i) {
														if (i)
															return (
																this._innerRefresh(),
																void (
																	this._refreshAnimationFrame !== null &&
																	this._coreBrowserService.window.cancelAnimationFrame(
																		this._refreshAnimationFrame,
																	)
																)
															);
														this._refreshAnimationFrame === null &&
															(this._refreshAnimationFrame =
																this._coreBrowserService.window.requestAnimationFrame(
																	() => this._innerRefresh(),
																));
													}
													_innerRefresh() {
														if (this._charSizeService.height > 0) {
															((this._currentRowHeight =
																this._renderDimensions.device.cell.height /
																this._coreBrowserService.dpr),
																(this._currentDeviceCellHeight =
																	this._renderDimensions.device.cell.height),
																(this._lastRecordedViewportHeight =
																	this._viewportElement.offsetHeight));
															const e =
																Math.round(
																	this._currentRowHeight *
																		this._lastRecordedBufferLength,
																) +
																(this._lastRecordedViewportHeight -
																	this._renderDimensions.css.canvas.height);
															this._lastRecordedBufferHeight !== e &&
																((this._lastRecordedBufferHeight = e),
																(this._scrollArea.style.height =
																	this._lastRecordedBufferHeight + 'px'));
														}
														const i =
															this._bufferService.buffer.ydisp *
															this._currentRowHeight;
														(this._viewportElement.scrollTop !== i &&
															((this._ignoreNextScrollEvent = !0),
															(this._viewportElement.scrollTop = i)),
															(this._refreshAnimationFrame = null));
													}
													syncScrollArea(i = !1) {
														if (
															this._lastRecordedBufferLength !==
															this._bufferService.buffer.lines.length
														)
															return (
																(this._lastRecordedBufferLength =
																	this._bufferService.buffer.lines.length),
																void this._refresh(i)
															);
														(this._lastRecordedViewportHeight ===
															this._renderService.dimensions.css.canvas
																.height &&
															this._lastScrollTop ===
																this._activeBuffer.ydisp *
																	this._currentRowHeight &&
															this._renderDimensions.device.cell.height ===
																this._currentDeviceCellHeight) ||
															this._refresh(i);
													}
													_handleScroll(i) {
														if (
															((this._lastScrollTop =
																this._viewportElement.scrollTop),
															!this._viewportElement.offsetParent)
														)
															return;
														if (this._ignoreNextScrollEvent)
															return (
																(this._ignoreNextScrollEvent = !1),
																void this._onRequestScrollLines.fire({
																	amount: 0,
																	suppressScrollEvent: !0,
																})
															);
														const e =
															Math.round(
																this._lastScrollTop / this._currentRowHeight,
															) - this._bufferService.buffer.ydisp;
														this._onRequestScrollLines.fire({
															amount: e,
															suppressScrollEvent: !0,
														});
													}
													_smoothScroll() {
														if (
															this._isDisposed ||
															this._smoothScrollState.origin === -1 ||
															this._smoothScrollState.target === -1
														)
															return;
														const i = this._smoothScrollPercent();
														((this._viewportElement.scrollTop =
															this._smoothScrollState.origin +
															Math.round(
																i *
																	(this._smoothScrollState.target -
																		this._smoothScrollState.origin),
															)),
															i < 1
																? this._coreBrowserService.window.requestAnimationFrame(
																		() => this._smoothScroll(),
																	)
																: this._clearSmoothScrollState());
													}
													_smoothScrollPercent() {
														return this._optionsService.rawOptions
															.smoothScrollDuration &&
															this._smoothScrollState.startTime
															? Math.max(
																	Math.min(
																		(Date.now() -
																			this._smoothScrollState.startTime) /
																			this._optionsService.rawOptions
																				.smoothScrollDuration,
																		1,
																	),
																	0,
																)
															: 1;
													}
													_clearSmoothScrollState() {
														((this._smoothScrollState.startTime = 0),
															(this._smoothScrollState.origin = -1),
															(this._smoothScrollState.target = -1));
													}
													_bubbleScroll(i, e) {
														const t =
															this._viewportElement.scrollTop +
															this._lastRecordedViewportHeight;
														return (
															!(
																(e < 0 &&
																	this._viewportElement.scrollTop !== 0) ||
																(e > 0 && t < this._lastRecordedBufferHeight)
															) || (i.cancelable && i.preventDefault(), !1)
														);
													}
													handleWheel(i) {
														const e = this._getPixelsScrolled(i);
														return (
															e !== 0 &&
															(this._optionsService.rawOptions
																.smoothScrollDuration
																? ((this._smoothScrollState.startTime =
																		Date.now()),
																	this._smoothScrollPercent() < 1
																		? ((this._smoothScrollState.origin =
																				this._viewportElement.scrollTop),
																			this._smoothScrollState.target === -1
																				? (this._smoothScrollState.target =
																						this._viewportElement.scrollTop + e)
																				: (this._smoothScrollState.target += e),
																			(this._smoothScrollState.target =
																				Math.max(
																					Math.min(
																						this._smoothScrollState.target,
																						this._viewportElement.scrollHeight,
																					),
																					0,
																				)),
																			this._smoothScroll())
																		: this._clearSmoothScrollState())
																: (this._viewportElement.scrollTop += e),
															this._bubbleScroll(i, e))
														);
													}
													scrollLines(i) {
														if (i !== 0)
															if (
																this._optionsService.rawOptions
																	.smoothScrollDuration
															) {
																const e = i * this._currentRowHeight;
																((this._smoothScrollState.startTime =
																	Date.now()),
																	this._smoothScrollPercent() < 1
																		? ((this._smoothScrollState.origin =
																				this._viewportElement.scrollTop),
																			(this._smoothScrollState.target =
																				this._smoothScrollState.origin + e),
																			(this._smoothScrollState.target =
																				Math.max(
																					Math.min(
																						this._smoothScrollState.target,
																						this._viewportElement.scrollHeight,
																					),
																					0,
																				)),
																			this._smoothScroll())
																		: this._clearSmoothScrollState());
															} else
																this._onRequestScrollLines.fire({
																	amount: i,
																	suppressScrollEvent: !1,
																});
													}
													_getPixelsScrolled(i) {
														if (i.deltaY === 0 || i.shiftKey) return 0;
														let e = this._applyScrollModifier(i.deltaY, i);
														return (
															i.deltaMode === WheelEvent.DOM_DELTA_LINE
																? (e *= this._currentRowHeight)
																: i.deltaMode === WheelEvent.DOM_DELTA_PAGE &&
																	(e *=
																		this._currentRowHeight *
																		this._bufferService.rows),
															e
														);
													}
													getBufferElements(i, e) {
														var c;
														let t,
															o = '';
														const f = [],
															u = e ?? this._bufferService.buffer.lines.length,
															v = this._bufferService.buffer.lines;
														for (let m = i; m < u; m++) {
															const w = v.get(m);
															if (!w) continue;
															const k =
																(c = v.get(m + 1)) == null
																	? void 0
																	: c.isWrapped;
															if (
																((o += w.translateToString(!k)),
																!k || m === v.length - 1)
															) {
																const L = document.createElement('div');
																((L.textContent = o),
																	f.push(L),
																	o.length > 0 && (t = L),
																	(o = ''));
															}
														}
														return { bufferElements: f, cursorElement: t };
													}
													getLinesScrolled(i) {
														if (i.deltaY === 0 || i.shiftKey) return 0;
														let e = this._applyScrollModifier(i.deltaY, i);
														return (
															i.deltaMode === WheelEvent.DOM_DELTA_PIXEL
																? ((e /= this._currentRowHeight + 0),
																	(this._wheelPartialScroll += e),
																	(e =
																		Math.floor(
																			Math.abs(this._wheelPartialScroll),
																		) *
																		(this._wheelPartialScroll > 0 ? 1 : -1)),
																	(this._wheelPartialScroll %= 1))
																: i.deltaMode === WheelEvent.DOM_DELTA_PAGE &&
																	(e *= this._bufferService.rows),
															e
														);
													}
													_applyScrollModifier(i, e) {
														const t =
															this._optionsService.rawOptions
																.fastScrollModifier;
														return (t === 'alt' && e.altKey) ||
															(t === 'ctrl' && e.ctrlKey) ||
															(t === 'shift' && e.shiftKey)
															? i *
																	this._optionsService.rawOptions
																		.fastScrollSensitivity *
																	this._optionsService.rawOptions
																		.scrollSensitivity
															: i *
																	this._optionsService.rawOptions
																		.scrollSensitivity;
													}
													handleTouchStart(i) {
														this._lastTouchY = i.touches[0].pageY;
													}
													handleTouchMove(i) {
														const e = this._lastTouchY - i.touches[0].pageY;
														return (
															(this._lastTouchY = i.touches[0].pageY),
															e !== 0 &&
																((this._viewportElement.scrollTop += e),
																this._bubbleScroll(i, e))
														);
													}
												});
												r.Viewport = s = l(
													[
														_(2, h.IBufferService),
														_(3, h.IOptionsService),
														_(4, d.ICharSizeService),
														_(5, d.IRenderService),
														_(6, d.ICoreBrowserService),
														_(7, d.IThemeService),
													],
													s,
												);
											},
											3107: function (I, r, a) {
												var l =
														(this && this.__decorate) ||
														function (h, s, i, e) {
															var t,
																o = arguments.length,
																f =
																	o < 3
																		? s
																		: e === null
																			? (e = Object.getOwnPropertyDescriptor(
																					s,
																					i,
																				))
																			: e;
															if (
																typeof Reflect == 'object' &&
																typeof Reflect.decorate == 'function'
															)
																f = Reflect.decorate(h, s, i, e);
															else
																for (var u = h.length - 1; u >= 0; u--)
																	(t = h[u]) &&
																		(f =
																			(o < 3
																				? t(f)
																				: o > 3
																					? t(s, i, f)
																					: t(s, i)) || f);
															return (
																o > 3 && f && Object.defineProperty(s, i, f),
																f
															);
														},
													_ =
														(this && this.__param) ||
														function (h, s) {
															return function (i, e) {
																s(i, e, h);
															};
														};
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.BufferDecorationRenderer = void 0));
												const n = a(4725),
													d = a(844),
													p = a(2585);
												let g = (r.BufferDecorationRenderer = class extends (
													d.Disposable
												) {
													constructor(h, s, i, e, t) {
														(super(),
															(this._screenElement = h),
															(this._bufferService = s),
															(this._coreBrowserService = i),
															(this._decorationService = e),
															(this._renderService = t),
															(this._decorationElements = new Map()),
															(this._altBufferIsActive = !1),
															(this._dimensionsChanged = !1),
															(this._container = document.createElement('div')),
															this._container.classList.add(
																'xterm-decoration-container',
															),
															this._screenElement.appendChild(this._container),
															this.register(
																this._renderService.onRenderedViewportChange(
																	() => this._doRefreshDecorations(),
																),
															),
															this.register(
																this._renderService.onDimensionsChange(() => {
																	((this._dimensionsChanged = !0),
																		this._queueRefresh());
																}),
															),
															this.register(
																this._coreBrowserService.onDprChange(() =>
																	this._queueRefresh(),
																),
															),
															this.register(
																this._bufferService.buffers.onBufferActivate(
																	() => {
																		this._altBufferIsActive =
																			this._bufferService.buffer ===
																			this._bufferService.buffers.alt;
																	},
																),
															),
															this.register(
																this._decorationService.onDecorationRegistered(
																	() => this._queueRefresh(),
																),
															),
															this.register(
																this._decorationService.onDecorationRemoved(
																	(o) => this._removeDecoration(o),
																),
															),
															this.register(
																(0, d.toDisposable)(() => {
																	(this._container.remove(),
																		this._decorationElements.clear());
																}),
															));
													}
													_queueRefresh() {
														this._animationFrame === void 0 &&
															(this._animationFrame =
																this._renderService.addRefreshCallback(() => {
																	(this._doRefreshDecorations(),
																		(this._animationFrame = void 0));
																}));
													}
													_doRefreshDecorations() {
														for (const h of this._decorationService.decorations)
															this._renderDecoration(h);
														this._dimensionsChanged = !1;
													}
													_renderDecoration(h) {
														(this._refreshStyle(h),
															this._dimensionsChanged &&
																this._refreshXPosition(h));
													}
													_createElement(h) {
														var e;
														const s =
															this._coreBrowserService.mainDocument.createElement(
																'div',
															);
														(s.classList.add('xterm-decoration'),
															s.classList.toggle(
																'xterm-decoration-top-layer',
																((e = h == null ? void 0 : h.options) == null
																	? void 0
																	: e.layer) === 'top',
															),
															(s.style.width = `${Math.round((h.options.width || 1) * this._renderService.dimensions.css.cell.width)}px`),
															(s.style.height =
																(h.options.height || 1) *
																	this._renderService.dimensions.css.cell
																		.height +
																'px'),
															(s.style.top =
																(h.marker.line -
																	this._bufferService.buffers.active.ydisp) *
																	this._renderService.dimensions.css.cell
																		.height +
																'px'),
															(s.style.lineHeight = `${this._renderService.dimensions.css.cell.height}px`));
														const i = h.options.x ?? 0;
														return (
															i &&
																i > this._bufferService.cols &&
																(s.style.display = 'none'),
															this._refreshXPosition(h, s),
															s
														);
													}
													_refreshStyle(h) {
														const s =
															h.marker.line -
															this._bufferService.buffers.active.ydisp;
														if (s < 0 || s >= this._bufferService.rows)
															h.element &&
																((h.element.style.display = 'none'),
																h.onRenderEmitter.fire(h.element));
														else {
															let i = this._decorationElements.get(h);
															(i ||
																((i = this._createElement(h)),
																(h.element = i),
																this._decorationElements.set(h, i),
																this._container.appendChild(i),
																h.onDispose(() => {
																	(this._decorationElements.delete(h),
																		i.remove());
																})),
																(i.style.top =
																	s *
																		this._renderService.dimensions.css.cell
																			.height +
																	'px'),
																(i.style.display = this._altBufferIsActive
																	? 'none'
																	: 'block'),
																h.onRenderEmitter.fire(i));
														}
													}
													_refreshXPosition(h, s = h.element) {
														if (!s) return;
														const i = h.options.x ?? 0;
														(h.options.anchor || 'left') === 'right'
															? (s.style.right = i
																	? i *
																			this._renderService.dimensions.css.cell
																				.width +
																		'px'
																	: '')
															: (s.style.left = i
																	? i *
																			this._renderService.dimensions.css.cell
																				.width +
																		'px'
																	: '');
													}
													_removeDecoration(h) {
														var s;
														((s = this._decorationElements.get(h)) == null ||
															s.remove(),
															this._decorationElements.delete(h),
															h.dispose());
													}
												});
												r.BufferDecorationRenderer = g = l(
													[
														_(1, p.IBufferService),
														_(2, n.ICoreBrowserService),
														_(3, p.IDecorationService),
														_(4, n.IRenderService),
													],
													g,
												);
											},
											5871: (I, r) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.ColorZoneStore = void 0),
													(r.ColorZoneStore = class {
														constructor() {
															((this._zones = []),
																(this._zonePool = []),
																(this._zonePoolIndex = 0),
																(this._linePadding = {
																	full: 0,
																	left: 0,
																	center: 0,
																	right: 0,
																}));
														}
														get zones() {
															return (
																(this._zonePool.length = Math.min(
																	this._zonePool.length,
																	this._zones.length,
																)),
																this._zones
															);
														}
														clear() {
															((this._zones.length = 0),
																(this._zonePoolIndex = 0));
														}
														addDecoration(a) {
															if (a.options.overviewRulerOptions) {
																for (const l of this._zones)
																	if (
																		l.color ===
																			a.options.overviewRulerOptions.color &&
																		l.position ===
																			a.options.overviewRulerOptions.position
																	) {
																		if (
																			this._lineIntersectsZone(l, a.marker.line)
																		)
																			return;
																		if (
																			this._lineAdjacentToZone(
																				l,
																				a.marker.line,
																				a.options.overviewRulerOptions.position,
																			)
																		)
																			return void this._addLineToZone(
																				l,
																				a.marker.line,
																			);
																	}
																if (this._zonePoolIndex < this._zonePool.length)
																	return (
																		(this._zonePool[this._zonePoolIndex].color =
																			a.options.overviewRulerOptions.color),
																		(this._zonePool[
																			this._zonePoolIndex
																		].position =
																			a.options.overviewRulerOptions.position),
																		(this._zonePool[
																			this._zonePoolIndex
																		].startBufferLine = a.marker.line),
																		(this._zonePool[
																			this._zonePoolIndex
																		].endBufferLine = a.marker.line),
																		void this._zones.push(
																			this._zonePool[this._zonePoolIndex++],
																		)
																	);
																(this._zones.push({
																	color: a.options.overviewRulerOptions.color,
																	position:
																		a.options.overviewRulerOptions.position,
																	startBufferLine: a.marker.line,
																	endBufferLine: a.marker.line,
																}),
																	this._zonePool.push(
																		this._zones[this._zones.length - 1],
																	),
																	this._zonePoolIndex++);
															}
														}
														setPadding(a) {
															this._linePadding = a;
														}
														_lineIntersectsZone(a, l) {
															return (
																l >= a.startBufferLine && l <= a.endBufferLine
															);
														}
														_lineAdjacentToZone(a, l, _) {
															return (
																l >=
																	a.startBufferLine -
																		this._linePadding[_ || 'full'] &&
																l <=
																	a.endBufferLine +
																		this._linePadding[_ || 'full']
															);
														}
														_addLineToZone(a, l) {
															((a.startBufferLine = Math.min(
																a.startBufferLine,
																l,
															)),
																(a.endBufferLine = Math.max(
																	a.endBufferLine,
																	l,
																)));
														}
													}));
											},
											5744: function (I, r, a) {
												var l =
														(this && this.__decorate) ||
														function (t, o, f, u) {
															var v,
																c = arguments.length,
																m =
																	c < 3
																		? o
																		: u === null
																			? (u = Object.getOwnPropertyDescriptor(
																					o,
																					f,
																				))
																			: u;
															if (
																typeof Reflect == 'object' &&
																typeof Reflect.decorate == 'function'
															)
																m = Reflect.decorate(t, o, f, u);
															else
																for (var w = t.length - 1; w >= 0; w--)
																	(v = t[w]) &&
																		(m =
																			(c < 3
																				? v(m)
																				: c > 3
																					? v(o, f, m)
																					: v(o, f)) || m);
															return (
																c > 3 && m && Object.defineProperty(o, f, m),
																m
															);
														},
													_ =
														(this && this.__param) ||
														function (t, o) {
															return function (f, u) {
																o(f, u, t);
															};
														};
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.OverviewRulerRenderer = void 0));
												const n = a(5871),
													d = a(4725),
													p = a(844),
													g = a(2585),
													h = { full: 0, left: 0, center: 0, right: 0 },
													s = { full: 0, left: 0, center: 0, right: 0 },
													i = { full: 0, left: 0, center: 0, right: 0 };
												let e = (r.OverviewRulerRenderer = class extends (
													p.Disposable
												) {
													get _width() {
														return (
															this._optionsService.options.overviewRulerWidth ||
															0
														);
													}
													constructor(t, o, f, u, v, c, m) {
														var k;
														(super(),
															(this._viewportElement = t),
															(this._screenElement = o),
															(this._bufferService = f),
															(this._decorationService = u),
															(this._renderService = v),
															(this._optionsService = c),
															(this._coreBrowserService = m),
															(this._colorZoneStore = new n.ColorZoneStore()),
															(this._shouldUpdateDimensions = !0),
															(this._shouldUpdateAnchor = !0),
															(this._lastKnownBufferLength = 0),
															(this._canvas =
																this._coreBrowserService.mainDocument.createElement(
																	'canvas',
																)),
															this._canvas.classList.add(
																'xterm-decoration-overview-ruler',
															),
															this._refreshCanvasDimensions(),
															(k = this._viewportElement.parentElement) ==
																null ||
																k.insertBefore(
																	this._canvas,
																	this._viewportElement,
																));
														const w = this._canvas.getContext('2d');
														if (!w) throw new Error('Ctx cannot be null');
														((this._ctx = w),
															this._registerDecorationListeners(),
															this._registerBufferChangeListeners(),
															this._registerDimensionChangeListeners(),
															this.register(
																(0, p.toDisposable)(() => {
																	var L;
																	(L = this._canvas) == null || L.remove();
																}),
															));
													}
													_registerDecorationListeners() {
														(this.register(
															this._decorationService.onDecorationRegistered(
																() => this._queueRefresh(void 0, !0),
															),
														),
															this.register(
																this._decorationService.onDecorationRemoved(
																	() => this._queueRefresh(void 0, !0),
																),
															));
													}
													_registerBufferChangeListeners() {
														(this.register(
															this._renderService.onRenderedViewportChange(() =>
																this._queueRefresh(),
															),
														),
															this.register(
																this._bufferService.buffers.onBufferActivate(
																	() => {
																		this._canvas.style.display =
																			this._bufferService.buffer ===
																			this._bufferService.buffers.alt
																				? 'none'
																				: 'block';
																	},
																),
															),
															this.register(
																this._bufferService.onScroll(() => {
																	this._lastKnownBufferLength !==
																		this._bufferService.buffers.normal.lines
																			.length &&
																		(this._refreshDrawHeightConstants(),
																		this._refreshColorZonePadding());
																}),
															));
													}
													_registerDimensionChangeListeners() {
														(this.register(
															this._renderService.onRender(() => {
																(this._containerHeight &&
																	this._containerHeight ===
																		this._screenElement.clientHeight) ||
																	(this._queueRefresh(!0),
																	(this._containerHeight =
																		this._screenElement.clientHeight));
															}),
														),
															this.register(
																this._optionsService.onSpecificOptionChange(
																	'overviewRulerWidth',
																	() => this._queueRefresh(!0),
																),
															),
															this.register(
																this._coreBrowserService.onDprChange(() =>
																	this._queueRefresh(!0),
																),
															),
															this._queueRefresh(!0));
													}
													_refreshDrawConstants() {
														const t = Math.floor(this._canvas.width / 3),
															o = Math.ceil(this._canvas.width / 3);
														((s.full = this._canvas.width),
															(s.left = t),
															(s.center = o),
															(s.right = t),
															this._refreshDrawHeightConstants(),
															(i.full = 0),
															(i.left = 0),
															(i.center = s.left),
															(i.right = s.left + s.center));
													}
													_refreshDrawHeightConstants() {
														h.full = Math.round(
															2 * this._coreBrowserService.dpr,
														);
														const t =
																this._canvas.height /
																this._bufferService.buffer.lines.length,
															o = Math.round(
																Math.max(Math.min(t, 12), 6) *
																	this._coreBrowserService.dpr,
															);
														((h.left = o), (h.center = o), (h.right = o));
													}
													_refreshColorZonePadding() {
														(this._colorZoneStore.setPadding({
															full: Math.floor(
																(this._bufferService.buffers.active.lines
																	.length /
																	(this._canvas.height - 1)) *
																	h.full,
															),
															left: Math.floor(
																(this._bufferService.buffers.active.lines
																	.length /
																	(this._canvas.height - 1)) *
																	h.left,
															),
															center: Math.floor(
																(this._bufferService.buffers.active.lines
																	.length /
																	(this._canvas.height - 1)) *
																	h.center,
															),
															right: Math.floor(
																(this._bufferService.buffers.active.lines
																	.length /
																	(this._canvas.height - 1)) *
																	h.right,
															),
														}),
															(this._lastKnownBufferLength =
																this._bufferService.buffers.normal.lines.length));
													}
													_refreshCanvasDimensions() {
														((this._canvas.style.width = `${this._width}px`),
															(this._canvas.width = Math.round(
																this._width * this._coreBrowserService.dpr,
															)),
															(this._canvas.style.height = `${this._screenElement.clientHeight}px`),
															(this._canvas.height = Math.round(
																this._screenElement.clientHeight *
																	this._coreBrowserService.dpr,
															)),
															this._refreshDrawConstants(),
															this._refreshColorZonePadding());
													}
													_refreshDecorations() {
														(this._shouldUpdateDimensions &&
															this._refreshCanvasDimensions(),
															this._ctx.clearRect(
																0,
																0,
																this._canvas.width,
																this._canvas.height,
															),
															this._colorZoneStore.clear());
														for (const o of this._decorationService.decorations)
															this._colorZoneStore.addDecoration(o);
														this._ctx.lineWidth = 1;
														const t = this._colorZoneStore.zones;
														for (const o of t)
															o.position !== 'full' && this._renderColorZone(o);
														for (const o of t)
															o.position === 'full' && this._renderColorZone(o);
														((this._shouldUpdateDimensions = !1),
															(this._shouldUpdateAnchor = !1));
													}
													_renderColorZone(t) {
														((this._ctx.fillStyle = t.color),
															this._ctx.fillRect(
																i[t.position || 'full'],
																Math.round(
																	(this._canvas.height - 1) *
																		(t.startBufferLine /
																			this._bufferService.buffers.active.lines
																				.length) -
																		h[t.position || 'full'] / 2,
																),
																s[t.position || 'full'],
																Math.round(
																	(this._canvas.height - 1) *
																		((t.endBufferLine - t.startBufferLine) /
																			this._bufferService.buffers.active.lines
																				.length) +
																		h[t.position || 'full'],
																),
															));
													}
													_queueRefresh(t, o) {
														((this._shouldUpdateDimensions =
															t || this._shouldUpdateDimensions),
															(this._shouldUpdateAnchor =
																o || this._shouldUpdateAnchor),
															this._animationFrame === void 0 &&
																(this._animationFrame =
																	this._coreBrowserService.window.requestAnimationFrame(
																		() => {
																			(this._refreshDecorations(),
																				(this._animationFrame = void 0));
																		},
																	)));
													}
												});
												r.OverviewRulerRenderer = e = l(
													[
														_(2, g.IBufferService),
														_(3, g.IDecorationService),
														_(4, d.IRenderService),
														_(5, g.IOptionsService),
														_(6, d.ICoreBrowserService),
													],
													e,
												);
											},
											2950: function (I, r, a) {
												var l =
														(this && this.__decorate) ||
														function (h, s, i, e) {
															var t,
																o = arguments.length,
																f =
																	o < 3
																		? s
																		: e === null
																			? (e = Object.getOwnPropertyDescriptor(
																					s,
																					i,
																				))
																			: e;
															if (
																typeof Reflect == 'object' &&
																typeof Reflect.decorate == 'function'
															)
																f = Reflect.decorate(h, s, i, e);
															else
																for (var u = h.length - 1; u >= 0; u--)
																	(t = h[u]) &&
																		(f =
																			(o < 3
																				? t(f)
																				: o > 3
																					? t(s, i, f)
																					: t(s, i)) || f);
															return (
																o > 3 && f && Object.defineProperty(s, i, f),
																f
															);
														},
													_ =
														(this && this.__param) ||
														function (h, s) {
															return function (i, e) {
																s(i, e, h);
															};
														};
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.CompositionHelper = void 0));
												const n = a(4725),
													d = a(2585),
													p = a(2584);
												let g = (r.CompositionHelper = class {
													get isComposing() {
														return this._isComposing;
													}
													constructor(h, s, i, e, t, o) {
														((this._textarea = h),
															(this._compositionView = s),
															(this._bufferService = i),
															(this._optionsService = e),
															(this._coreService = t),
															(this._renderService = o),
															(this._isComposing = !1),
															(this._isSendingComposition = !1),
															(this._compositionPosition = {
																start: 0,
																end: 0,
															}),
															(this._dataAlreadySent = ''));
													}
													compositionstart() {
														((this._isComposing = !0),
															(this._compositionPosition.start =
																this._textarea.value.length),
															(this._compositionView.textContent = ''),
															(this._dataAlreadySent = ''),
															this._compositionView.classList.add('active'));
													}
													compositionupdate(h) {
														((this._compositionView.textContent = h.data),
															this.updateCompositionElements(),
															setTimeout(() => {
																this._compositionPosition.end =
																	this._textarea.value.length;
															}, 0));
													}
													compositionend() {
														this._finalizeComposition(!0);
													}
													keydown(h) {
														if (
															this._isComposing ||
															this._isSendingComposition
														) {
															if (
																h.keyCode === 229 ||
																h.keyCode === 16 ||
																h.keyCode === 17 ||
																h.keyCode === 18
															)
																return !1;
															this._finalizeComposition(!1);
														}
														return (
															h.keyCode !== 229 ||
															(this._handleAnyTextareaChanges(), !1)
														);
													}
													_finalizeComposition(h) {
														if (
															(this._compositionView.classList.remove('active'),
															(this._isComposing = !1),
															h)
														) {
															const s = {
																start: this._compositionPosition.start,
																end: this._compositionPosition.end,
															};
															((this._isSendingComposition = !0),
																setTimeout(() => {
																	if (this._isSendingComposition) {
																		let i;
																		((this._isSendingComposition = !1),
																			(s.start += this._dataAlreadySent.length),
																			(i = this._isComposing
																				? this._textarea.value.substring(
																						s.start,
																						s.end,
																					)
																				: this._textarea.value.substring(
																						s.start,
																					)),
																			i.length > 0 &&
																				this._coreService.triggerDataEvent(
																					i,
																					!0,
																				));
																	}
																}, 0));
														} else {
															this._isSendingComposition = !1;
															const s = this._textarea.value.substring(
																this._compositionPosition.start,
																this._compositionPosition.end,
															);
															this._coreService.triggerDataEvent(s, !0);
														}
													}
													_handleAnyTextareaChanges() {
														const h = this._textarea.value;
														setTimeout(() => {
															if (!this._isComposing) {
																const s = this._textarea.value,
																	i = s.replace(h, '');
																((this._dataAlreadySent = i),
																	s.length > h.length
																		? this._coreService.triggerDataEvent(i, !0)
																		: s.length < h.length
																			? this._coreService.triggerDataEvent(
																					`${p.C0.DEL}`,
																					!0,
																				)
																			: s.length === h.length &&
																				s !== h &&
																				this._coreService.triggerDataEvent(
																					s,
																					!0,
																				));
															}
														}, 0);
													}
													updateCompositionElements(h) {
														if (this._isComposing) {
															if (
																this._bufferService.buffer.isCursorInViewport
															) {
																const s = Math.min(
																		this._bufferService.buffer.x,
																		this._bufferService.cols - 1,
																	),
																	i =
																		this._renderService.dimensions.css.cell
																			.height,
																	e =
																		this._bufferService.buffer.y *
																		this._renderService.dimensions.css.cell
																			.height,
																	t =
																		s *
																		this._renderService.dimensions.css.cell
																			.width;
																((this._compositionView.style.left = t + 'px'),
																	(this._compositionView.style.top = e + 'px'),
																	(this._compositionView.style.height =
																		i + 'px'),
																	(this._compositionView.style.lineHeight =
																		i + 'px'),
																	(this._compositionView.style.fontFamily =
																		this._optionsService.rawOptions.fontFamily),
																	(this._compositionView.style.fontSize =
																		this._optionsService.rawOptions.fontSize +
																		'px'));
																const o =
																	this._compositionView.getBoundingClientRect();
																((this._textarea.style.left = t + 'px'),
																	(this._textarea.style.top = e + 'px'),
																	(this._textarea.style.width =
																		Math.max(o.width, 1) + 'px'),
																	(this._textarea.style.height =
																		Math.max(o.height, 1) + 'px'),
																	(this._textarea.style.lineHeight =
																		o.height + 'px'));
															}
															h ||
																setTimeout(
																	() => this.updateCompositionElements(!0),
																	0,
																);
														}
													}
												});
												r.CompositionHelper = g = l(
													[
														_(2, d.IBufferService),
														_(3, d.IOptionsService),
														_(4, d.ICoreService),
														_(5, n.IRenderService),
													],
													g,
												);
											},
											9806: (I, r) => {
												function a(l, _, n) {
													const d = n.getBoundingClientRect(),
														p = l.getComputedStyle(n),
														g = parseInt(p.getPropertyValue('padding-left')),
														h = parseInt(p.getPropertyValue('padding-top'));
													return [
														_.clientX - d.left - g,
														_.clientY - d.top - h,
													];
												}
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.getCoords = r.getCoordsRelativeToElement = void 0),
													(r.getCoordsRelativeToElement = a),
													(r.getCoords = function (l, _, n, d, p, g, h, s, i) {
														if (!g) return;
														const e = a(l, _, n);
														return e
															? ((e[0] = Math.ceil(
																	(e[0] + (i ? h / 2 : 0)) / h,
																)),
																(e[1] = Math.ceil(e[1] / s)),
																(e[0] = Math.min(
																	Math.max(e[0], 1),
																	d + (i ? 1 : 0),
																)),
																(e[1] = Math.min(Math.max(e[1], 1), p)),
																e)
															: void 0;
													}));
											},
											9504: (I, r, a) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.moveToCellSequence = void 0));
												const l = a(2584);
												function _(s, i, e, t) {
													const o = s - n(s, e),
														f = i - n(i, e),
														u =
															Math.abs(o - f) -
															(function (v, c, m) {
																let w = 0;
																const k = v - n(v, m),
																	L = c - n(c, m);
																for (let b = 0; b < Math.abs(k - L); b++) {
																	const A = d(v, c) === 'A' ? -1 : 1,
																		M = m.buffer.lines.get(k + A * b);
																	M != null && M.isWrapped && w++;
																}
																return w;
															})(s, i, e);
													return h(u, g(d(s, i), t));
												}
												function n(s, i) {
													let e = 0,
														t = i.buffer.lines.get(s),
														o = t == null ? void 0 : t.isWrapped;
													for (; o && s >= 0 && s < i.rows; )
														(e++,
															(t = i.buffer.lines.get(--s)),
															(o = t == null ? void 0 : t.isWrapped));
													return e;
												}
												function d(s, i) {
													return s > i ? 'A' : 'B';
												}
												function p(s, i, e, t, o, f) {
													let u = s,
														v = i,
														c = '';
													for (; u !== e || v !== t; )
														((u += o ? 1 : -1),
															o && u > f.cols - 1
																? ((c += f.buffer.translateBufferLineToString(
																		v,
																		!1,
																		s,
																		u,
																	)),
																	(u = 0),
																	(s = 0),
																	v++)
																: !o &&
																	u < 0 &&
																	((c += f.buffer.translateBufferLineToString(
																		v,
																		!1,
																		0,
																		s + 1,
																	)),
																	(u = f.cols - 1),
																	(s = u),
																	v--));
													return (
														c +
														f.buffer.translateBufferLineToString(v, !1, s, u)
													);
												}
												function g(s, i) {
													const e = i ? 'O' : '[';
													return l.C0.ESC + e + s;
												}
												function h(s, i) {
													s = Math.floor(s);
													let e = '';
													for (let t = 0; t < s; t++) e += i;
													return e;
												}
												r.moveToCellSequence = function (s, i, e, t) {
													const o = e.buffer.x,
														f = e.buffer.y;
													if (!e.buffer.hasScrollback)
														return (
															(function (c, m, w, k, L, b) {
																return _(m, k, L, b).length === 0
																	? ''
																	: h(
																			p(c, m, c, m - n(m, L), !1, L).length,
																			g('D', b),
																		);
															})(o, f, 0, i, e, t) +
															_(f, i, e, t) +
															(function (c, m, w, k, L, b) {
																let A;
																A = _(m, k, L, b).length > 0 ? k - n(k, L) : m;
																const M = k,
																	$ = (function (V, j, S, y, E, x) {
																		let W;
																		return (
																			(W =
																				_(S, y, E, x).length > 0
																					? y - n(y, E)
																					: j),
																			(V < S && W <= y) || (V >= S && W < y)
																				? 'C'
																				: 'D'
																		);
																	})(c, m, w, k, L, b);
																return h(
																	p(c, A, w, M, $ === 'C', L).length,
																	g($, b),
																);
															})(o, f, s, i, e, t)
														);
													let u;
													if (f === i)
														return (
															(u = o > s ? 'D' : 'C'),
															h(Math.abs(o - s), g(u, t))
														);
													u = f > i ? 'D' : 'C';
													const v = Math.abs(f - i);
													return h(
														(function (c, m) {
															return m.cols - c;
														})(f > i ? s : o, e) +
															(v - 1) * e.cols +
															1 +
															((f > i ? o : s) - 1),
														g(u, t),
													);
												};
											},
											1296: function (I, r, a) {
												var l =
														(this && this.__decorate) ||
														function (b, A, M, $) {
															var V,
																j = arguments.length,
																S =
																	j < 3
																		? A
																		: $ === null
																			? ($ = Object.getOwnPropertyDescriptor(
																					A,
																					M,
																				))
																			: $;
															if (
																typeof Reflect == 'object' &&
																typeof Reflect.decorate == 'function'
															)
																S = Reflect.decorate(b, A, M, $);
															else
																for (var y = b.length - 1; y >= 0; y--)
																	(V = b[y]) &&
																		(S =
																			(j < 3
																				? V(S)
																				: j > 3
																					? V(A, M, S)
																					: V(A, M)) || S);
															return (
																j > 3 && S && Object.defineProperty(A, M, S),
																S
															);
														},
													_ =
														(this && this.__param) ||
														function (b, A) {
															return function (M, $) {
																A(M, $, b);
															};
														};
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.DomRenderer = void 0));
												const n = a(3787),
													d = a(2550),
													p = a(2223),
													g = a(6171),
													h = a(6052),
													s = a(4725),
													i = a(8055),
													e = a(8460),
													t = a(844),
													o = a(2585),
													f = 'xterm-dom-renderer-owner-',
													u = 'xterm-rows',
													v = 'xterm-fg-',
													c = 'xterm-bg-',
													m = 'xterm-focus',
													w = 'xterm-selection';
												let k = 1,
													L = (r.DomRenderer = class extends t.Disposable {
														constructor(b, A, M, $, V, j, S, y, E, x, W, z, J) {
															(super(),
																(this._terminal = b),
																(this._document = A),
																(this._element = M),
																(this._screenElement = $),
																(this._viewportElement = V),
																(this._helperContainer = j),
																(this._linkifier2 = S),
																(this._charSizeService = E),
																(this._optionsService = x),
																(this._bufferService = W),
																(this._coreBrowserService = z),
																(this._themeService = J),
																(this._terminalClass = k++),
																(this._rowElements = []),
																(this._selectionRenderModel = (0,
																h.createSelectionRenderModel)()),
																(this.onRequestRedraw = this.register(
																	new e.EventEmitter(),
																).event),
																(this._rowContainer =
																	this._document.createElement('div')),
																this._rowContainer.classList.add(u),
																(this._rowContainer.style.lineHeight =
																	'normal'),
																this._rowContainer.setAttribute(
																	'aria-hidden',
																	'true',
																),
																this._refreshRowElements(
																	this._bufferService.cols,
																	this._bufferService.rows,
																),
																(this._selectionContainer =
																	this._document.createElement('div')),
																this._selectionContainer.classList.add(w),
																this._selectionContainer.setAttribute(
																	'aria-hidden',
																	'true',
																),
																(this.dimensions = (0,
																g.createRenderDimensions)()),
																this._updateDimensions(),
																this.register(
																	this._optionsService.onOptionChange(() =>
																		this._handleOptionsChanged(),
																	),
																),
																this.register(
																	this._themeService.onChangeColors((Y) =>
																		this._injectCss(Y),
																	),
																),
																this._injectCss(this._themeService.colors),
																(this._rowFactory = y.createInstance(
																	n.DomRendererRowFactory,
																	document,
																)),
																this._element.classList.add(
																	f + this._terminalClass,
																),
																this._screenElement.appendChild(
																	this._rowContainer,
																),
																this._screenElement.appendChild(
																	this._selectionContainer,
																),
																this.register(
																	this._linkifier2.onShowLinkUnderline((Y) =>
																		this._handleLinkHover(Y),
																	),
																),
																this.register(
																	this._linkifier2.onHideLinkUnderline((Y) =>
																		this._handleLinkLeave(Y),
																	),
																),
																this.register(
																	(0, t.toDisposable)(() => {
																		(this._element.classList.remove(
																			f + this._terminalClass,
																		),
																			this._rowContainer.remove(),
																			this._selectionContainer.remove(),
																			this._widthCache.dispose(),
																			this._themeStyleElement.remove(),
																			this._dimensionsStyleElement.remove());
																	}),
																),
																(this._widthCache = new d.WidthCache(
																	this._document,
																	this._helperContainer,
																)),
																this._widthCache.setFont(
																	this._optionsService.rawOptions.fontFamily,
																	this._optionsService.rawOptions.fontSize,
																	this._optionsService.rawOptions.fontWeight,
																	this._optionsService.rawOptions
																		.fontWeightBold,
																),
																this._setDefaultSpacing());
														}
														_updateDimensions() {
															const b = this._coreBrowserService.dpr;
															((this.dimensions.device.char.width =
																this._charSizeService.width * b),
																(this.dimensions.device.char.height = Math.ceil(
																	this._charSizeService.height * b,
																)),
																(this.dimensions.device.cell.width =
																	this.dimensions.device.char.width +
																	Math.round(
																		this._optionsService.rawOptions
																			.letterSpacing,
																	)),
																(this.dimensions.device.cell.height =
																	Math.floor(
																		this.dimensions.device.char.height *
																			this._optionsService.rawOptions
																				.lineHeight,
																	)),
																(this.dimensions.device.char.left = 0),
																(this.dimensions.device.char.top = 0),
																(this.dimensions.device.canvas.width =
																	this.dimensions.device.cell.width *
																	this._bufferService.cols),
																(this.dimensions.device.canvas.height =
																	this.dimensions.device.cell.height *
																	this._bufferService.rows),
																(this.dimensions.css.canvas.width = Math.round(
																	this.dimensions.device.canvas.width / b,
																)),
																(this.dimensions.css.canvas.height = Math.round(
																	this.dimensions.device.canvas.height / b,
																)),
																(this.dimensions.css.cell.width =
																	this.dimensions.css.canvas.width /
																	this._bufferService.cols),
																(this.dimensions.css.cell.height =
																	this.dimensions.css.canvas.height /
																	this._bufferService.rows));
															for (const M of this._rowElements)
																((M.style.width = `${this.dimensions.css.canvas.width}px`),
																	(M.style.height = `${this.dimensions.css.cell.height}px`),
																	(M.style.lineHeight = `${this.dimensions.css.cell.height}px`),
																	(M.style.overflow = 'hidden'));
															this._dimensionsStyleElement ||
																((this._dimensionsStyleElement =
																	this._document.createElement('style')),
																this._screenElement.appendChild(
																	this._dimensionsStyleElement,
																));
															const A = `${this._terminalSelector} .${u} span { display: inline-block; height: 100%; vertical-align: top;}`;
															((this._dimensionsStyleElement.textContent = A),
																(this._selectionContainer.style.height =
																	this._viewportElement.style.height),
																(this._screenElement.style.width = `${this.dimensions.css.canvas.width}px`),
																(this._screenElement.style.height = `${this.dimensions.css.canvas.height}px`));
														}
														_injectCss(b) {
															this._themeStyleElement ||
																((this._themeStyleElement =
																	this._document.createElement('style')),
																this._screenElement.appendChild(
																	this._themeStyleElement,
																));
															let A = `${this._terminalSelector} .${u} { color: ${b.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;
															((A += `${this._terminalSelector} .${u} .xterm-dim { color: ${i.color.multiplyOpacity(b.foreground, 0.5).css};}`),
																(A += `${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`));
															const M = `blink_underline_${this._terminalClass}`,
																$ = `blink_bar_${this._terminalClass}`,
																V = `blink_block_${this._terminalClass}`;
															((A += `@keyframes ${M} { 50% {  border-bottom-style: hidden; }}`),
																(A += `@keyframes ${$} { 50% {  box-shadow: none; }}`),
																(A += `@keyframes ${V} { 0% {  background-color: ${b.cursor.css};  color: ${b.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${b.cursor.css}; }}`),
																(A += `${this._terminalSelector} .${u}.${m} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${M} 1s step-end infinite;}${this._terminalSelector} .${u}.${m} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${$} 1s step-end infinite;}${this._terminalSelector} .${u}.${m} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${V} 1s step-end infinite;}${this._terminalSelector} .${u} .xterm-cursor.xterm-cursor-block { background-color: ${b.cursor.css}; color: ${b.cursorAccent.css};}${this._terminalSelector} .${u} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${b.cursor.css} !important; color: ${b.cursorAccent.css} !important;}${this._terminalSelector} .${u} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${b.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${u} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${b.cursor.css} inset;}${this._terminalSelector} .${u} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${b.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`),
																(A += `${this._terminalSelector} .${w} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${w} div { position: absolute; background-color: ${b.selectionBackgroundOpaque.css};}${this._terminalSelector} .${w} div { position: absolute; background-color: ${b.selectionInactiveBackgroundOpaque.css};}`));
															for (const [j, S] of b.ansi.entries())
																A += `${this._terminalSelector} .${v}${j} { color: ${S.css}; }${this._terminalSelector} .${v}${j}.xterm-dim { color: ${i.color.multiplyOpacity(S, 0.5).css}; }${this._terminalSelector} .${c}${j} { background-color: ${S.css}; }`;
															((A += `${this._terminalSelector} .${v}${p.INVERTED_DEFAULT_COLOR} { color: ${i.color.opaque(b.background).css}; }${this._terminalSelector} .${v}${p.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${i.color.multiplyOpacity(i.color.opaque(b.background), 0.5).css}; }${this._terminalSelector} .${c}${p.INVERTED_DEFAULT_COLOR} { background-color: ${b.foreground.css}; }`),
																(this._themeStyleElement.textContent = A));
														}
														_setDefaultSpacing() {
															const b =
																this.dimensions.css.cell.width -
																this._widthCache.get('W', !1, !1);
															((this._rowContainer.style.letterSpacing = `${b}px`),
																(this._rowFactory.defaultSpacing = b));
														}
														handleDevicePixelRatioChange() {
															(this._updateDimensions(),
																this._widthCache.clear(),
																this._setDefaultSpacing());
														}
														_refreshRowElements(b, A) {
															for (
																let M = this._rowElements.length;
																M <= A;
																M++
															) {
																const $ = this._document.createElement('div');
																(this._rowContainer.appendChild($),
																	this._rowElements.push($));
															}
															for (; this._rowElements.length > A; )
																this._rowContainer.removeChild(
																	this._rowElements.pop(),
																);
														}
														handleResize(b, A) {
															(this._refreshRowElements(b, A),
																this._updateDimensions(),
																this.handleSelectionChanged(
																	this._selectionRenderModel.selectionStart,
																	this._selectionRenderModel.selectionEnd,
																	this._selectionRenderModel.columnSelectMode,
																));
														}
														handleCharSizeChanged() {
															(this._updateDimensions(),
																this._widthCache.clear(),
																this._setDefaultSpacing());
														}
														handleBlur() {
															(this._rowContainer.classList.remove(m),
																this.renderRows(
																	0,
																	this._bufferService.rows - 1,
																));
														}
														handleFocus() {
															(this._rowContainer.classList.add(m),
																this.renderRows(
																	this._bufferService.buffer.y,
																	this._bufferService.buffer.y,
																));
														}
														handleSelectionChanged(b, A, M) {
															if (
																(this._selectionContainer.replaceChildren(),
																this._rowFactory.handleSelectionChanged(
																	b,
																	A,
																	M,
																),
																this.renderRows(
																	0,
																	this._bufferService.rows - 1,
																),
																!b || !A)
															)
																return;
															this._selectionRenderModel.update(
																this._terminal,
																b,
																A,
																M,
															);
															const $ =
																	this._selectionRenderModel.viewportStartRow,
																V = this._selectionRenderModel.viewportEndRow,
																j =
																	this._selectionRenderModel
																		.viewportCappedStartRow,
																S =
																	this._selectionRenderModel
																		.viewportCappedEndRow;
															if (j >= this._bufferService.rows || S < 0)
																return;
															const y = this._document.createDocumentFragment();
															if (M) {
																const E = b[0] > A[0];
																y.appendChild(
																	this._createSelectionElement(
																		j,
																		E ? A[0] : b[0],
																		E ? b[0] : A[0],
																		S - j + 1,
																	),
																);
															} else {
																const E = $ === j ? b[0] : 0,
																	x = j === V ? A[0] : this._bufferService.cols;
																y.appendChild(
																	this._createSelectionElement(j, E, x),
																);
																const W = S - j - 1;
																if (
																	(y.appendChild(
																		this._createSelectionElement(
																			j + 1,
																			0,
																			this._bufferService.cols,
																			W,
																		),
																	),
																	j !== S)
																) {
																	const z =
																		V === S ? A[0] : this._bufferService.cols;
																	y.appendChild(
																		this._createSelectionElement(S, 0, z),
																	);
																}
															}
															this._selectionContainer.appendChild(y);
														}
														_createSelectionElement(b, A, M, $ = 1) {
															const V = this._document.createElement('div'),
																j = A * this.dimensions.css.cell.width;
															let S = this.dimensions.css.cell.width * (M - A);
															return (
																j + S > this.dimensions.css.canvas.width &&
																	(S = this.dimensions.css.canvas.width - j),
																(V.style.height =
																	$ * this.dimensions.css.cell.height + 'px'),
																(V.style.top =
																	b * this.dimensions.css.cell.height + 'px'),
																(V.style.left = `${j}px`),
																(V.style.width = `${S}px`),
																V
															);
														}
														handleCursorMove() {}
														_handleOptionsChanged() {
															(this._updateDimensions(),
																this._injectCss(this._themeService.colors),
																this._widthCache.setFont(
																	this._optionsService.rawOptions.fontFamily,
																	this._optionsService.rawOptions.fontSize,
																	this._optionsService.rawOptions.fontWeight,
																	this._optionsService.rawOptions
																		.fontWeightBold,
																),
																this._setDefaultSpacing());
														}
														clear() {
															for (const b of this._rowElements)
																b.replaceChildren();
														}
														renderRows(b, A) {
															const M = this._bufferService.buffer,
																$ = M.ybase + M.y,
																V = Math.min(M.x, this._bufferService.cols - 1),
																j = this._optionsService.rawOptions.cursorBlink,
																S = this._optionsService.rawOptions.cursorStyle,
																y =
																	this._optionsService.rawOptions
																		.cursorInactiveStyle;
															for (let E = b; E <= A; E++) {
																const x = E + M.ydisp,
																	W = this._rowElements[E],
																	z = M.lines.get(x);
																if (!W || !z) break;
																W.replaceChildren(
																	...this._rowFactory.createRow(
																		z,
																		x,
																		x === $,
																		S,
																		y,
																		V,
																		j,
																		this.dimensions.css.cell.width,
																		this._widthCache,
																		-1,
																		-1,
																	),
																);
															}
														}
														get _terminalSelector() {
															return `.${f}${this._terminalClass}`;
														}
														_handleLinkHover(b) {
															this._setCellUnderline(
																b.x1,
																b.x2,
																b.y1,
																b.y2,
																b.cols,
																!0,
															);
														}
														_handleLinkLeave(b) {
															this._setCellUnderline(
																b.x1,
																b.x2,
																b.y1,
																b.y2,
																b.cols,
																!1,
															);
														}
														_setCellUnderline(b, A, M, $, V, j) {
															(M < 0 && (b = 0), $ < 0 && (A = 0));
															const S = this._bufferService.rows - 1;
															((M = Math.max(Math.min(M, S), 0)),
																($ = Math.max(Math.min($, S), 0)),
																(V = Math.min(V, this._bufferService.cols)));
															const y = this._bufferService.buffer,
																E = y.ybase + y.y,
																x = Math.min(y.x, V - 1),
																W = this._optionsService.rawOptions.cursorBlink,
																z = this._optionsService.rawOptions.cursorStyle,
																J =
																	this._optionsService.rawOptions
																		.cursorInactiveStyle;
															for (let Y = M; Y <= $; ++Y) {
																const D = Y + y.ydisp,
																	C = this._rowElements[Y],
																	F = y.lines.get(D);
																if (!C || !F) break;
																C.replaceChildren(
																	...this._rowFactory.createRow(
																		F,
																		D,
																		D === E,
																		z,
																		J,
																		x,
																		W,
																		this.dimensions.css.cell.width,
																		this._widthCache,
																		j ? (Y === M ? b : 0) : -1,
																		j ? (Y === $ ? A : V) - 1 : -1,
																	),
																);
															}
														}
													});
												r.DomRenderer = L = l(
													[
														_(7, o.IInstantiationService),
														_(8, s.ICharSizeService),
														_(9, o.IOptionsService),
														_(10, o.IBufferService),
														_(11, s.ICoreBrowserService),
														_(12, s.IThemeService),
													],
													L,
												);
											},
											3787: function (I, r, a) {
												var l =
														(this && this.__decorate) ||
														function (u, v, c, m) {
															var w,
																k = arguments.length,
																L =
																	k < 3
																		? v
																		: m === null
																			? (m = Object.getOwnPropertyDescriptor(
																					v,
																					c,
																				))
																			: m;
															if (
																typeof Reflect == 'object' &&
																typeof Reflect.decorate == 'function'
															)
																L = Reflect.decorate(u, v, c, m);
															else
																for (var b = u.length - 1; b >= 0; b--)
																	(w = u[b]) &&
																		(L =
																			(k < 3
																				? w(L)
																				: k > 3
																					? w(v, c, L)
																					: w(v, c)) || L);
															return (
																k > 3 && L && Object.defineProperty(v, c, L),
																L
															);
														},
													_ =
														(this && this.__param) ||
														function (u, v) {
															return function (c, m) {
																v(c, m, u);
															};
														};
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.DomRendererRowFactory = void 0));
												const n = a(2223),
													d = a(643),
													p = a(511),
													g = a(2585),
													h = a(8055),
													s = a(4725),
													i = a(4269),
													e = a(6171),
													t = a(3734);
												let o = (r.DomRendererRowFactory = class {
													constructor(u, v, c, m, w, k, L) {
														((this._document = u),
															(this._characterJoinerService = v),
															(this._optionsService = c),
															(this._coreBrowserService = m),
															(this._coreService = w),
															(this._decorationService = k),
															(this._themeService = L),
															(this._workCell = new p.CellData()),
															(this._columnSelectMode = !1),
															(this.defaultSpacing = 0));
													}
													handleSelectionChanged(u, v, c) {
														((this._selectionStart = u),
															(this._selectionEnd = v),
															(this._columnSelectMode = c));
													}
													createRow(u, v, c, m, w, k, L, b, A, M, $) {
														const V = [],
															j =
																this._characterJoinerService.getJoinedCharacters(
																	v,
																),
															S = this._themeService.colors;
														let y,
															E = u.getNoBgTrimmedLength();
														c && E < k + 1 && (E = k + 1);
														let x = 0,
															W = '',
															z = 0,
															J = 0,
															Y = 0,
															D = !1,
															C = 0,
															F = !1,
															B = 0;
														const K = [],
															q = M !== -1 && $ !== -1;
														for (let oe = 0; oe < E; oe++) {
															u.loadCell(oe, this._workCell);
															let Se = this._workCell.getWidth();
															if (Se === 0) continue;
															let ve = !1,
																be = oe,
																te = this._workCell;
															if (j.length > 0 && oe === j[0][0]) {
																ve = !0;
																const Z = j.shift();
																((te = new i.JoinedCellData(
																	this._workCell,
																	u.translateToString(!0, Z[0], Z[1]),
																	Z[1] - Z[0],
																)),
																	(be = Z[1] - 1),
																	(Se = te.getWidth()));
															}
															const xe = this._isCellInSelection(oe, v),
																Re = c && oe === k,
																Te = q && oe >= M && oe <= $;
															let He = !1;
															this._decorationService.forEachDecorationAtCell(
																oe,
																v,
																void 0,
																(Z) => {
																	He = !0;
																},
															);
															let Ae = te.getChars() || d.WHITESPACE_CELL_CHAR;
															if (
																(Ae === ' ' &&
																	(te.isUnderline() || te.isOverline()) &&
																	(Ae = 'Â '),
																(B =
																	Se * b -
																	A.get(Ae, te.isBold(), te.isItalic())),
																y)
															) {
																if (
																	x &&
																	((xe && F) || (!xe && !F && te.bg === z)) &&
																	((xe && F && S.selectionForeground) ||
																		te.fg === J) &&
																	te.extended.ext === Y &&
																	Te === D &&
																	B === C &&
																	!Re &&
																	!ve &&
																	!He
																) {
																	(te.isInvisible()
																		? (W += d.WHITESPACE_CELL_CHAR)
																		: (W += Ae),
																		x++);
																	continue;
																}
																(x && (y.textContent = W),
																	(y = this._document.createElement('span')),
																	(x = 0),
																	(W = ''));
															} else y = this._document.createElement('span');
															if (
																((z = te.bg),
																(J = te.fg),
																(Y = te.extended.ext),
																(D = Te),
																(C = B),
																(F = xe),
																ve && k >= oe && k <= be && (k = oe),
																!this._coreService.isCursorHidden &&
																	Re &&
																	this._coreService.isCursorInitialized)
															) {
																if (
																	(K.push('xterm-cursor'),
																	this._coreBrowserService.isFocused)
																)
																	(L && K.push('xterm-cursor-blink'),
																		K.push(
																			m === 'bar'
																				? 'xterm-cursor-bar'
																				: m === 'underline'
																					? 'xterm-cursor-underline'
																					: 'xterm-cursor-block',
																		));
																else if (w)
																	switch (w) {
																		case 'outline':
																			K.push('xterm-cursor-outline');
																			break;
																		case 'block':
																			K.push('xterm-cursor-block');
																			break;
																		case 'bar':
																			K.push('xterm-cursor-bar');
																			break;
																		case 'underline':
																			K.push('xterm-cursor-underline');
																	}
															}
															if (
																(te.isBold() && K.push('xterm-bold'),
																te.isItalic() && K.push('xterm-italic'),
																te.isDim() && K.push('xterm-dim'),
																(W = te.isInvisible()
																	? d.WHITESPACE_CELL_CHAR
																	: te.getChars() || d.WHITESPACE_CELL_CHAR),
																te.isUnderline() &&
																	(K.push(
																		`xterm-underline-${te.extended.underlineStyle}`,
																	),
																	W === ' ' && (W = 'Â '),
																	!te.isUnderlineColorDefault()))
															)
																if (te.isUnderlineColorRGB())
																	y.style.textDecorationColor = `rgb(${t.AttributeData.toColorRGB(te.getUnderlineColor()).join(',')})`;
																else {
																	let Z = te.getUnderlineColor();
																	(this._optionsService.rawOptions
																		.drawBoldTextInBrightColors &&
																		te.isBold() &&
																		Z < 8 &&
																		(Z += 8),
																		(y.style.textDecorationColor =
																			S.ansi[Z].css));
																}
															(te.isOverline() &&
																(K.push('xterm-overline'),
																W === ' ' && (W = 'Â ')),
																te.isStrikethrough() &&
																	K.push('xterm-strikethrough'),
																Te && (y.style.textDecoration = 'underline'));
															let Ee = te.getFgColor(),
																Be = te.getFgColorMode(),
																R = te.getBgColor(),
																U = te.getBgColorMode();
															const O = !!te.isInverse();
															if (O) {
																const Z = Ee;
																((Ee = R), (R = Z));
																const Q = Be;
																((Be = U), (U = Q));
															}
															let H,
																N,
																G,
																ie = !1;
															switch (
																(this._decorationService.forEachDecorationAtCell(
																	oe,
																	v,
																	void 0,
																	(Z) => {
																		(Z.options.layer !== 'top' && ie) ||
																			(Z.backgroundColorRGB &&
																				((U = 50331648),
																				(R =
																					(Z.backgroundColorRGB.rgba >> 8) &
																					16777215),
																				(H = Z.backgroundColorRGB)),
																			Z.foregroundColorRGB &&
																				((Be = 50331648),
																				(Ee =
																					(Z.foregroundColorRGB.rgba >> 8) &
																					16777215),
																				(N = Z.foregroundColorRGB)),
																			(ie = Z.options.layer === 'top'));
																	},
																),
																!ie &&
																	xe &&
																	((H = this._coreBrowserService.isFocused
																		? S.selectionBackgroundOpaque
																		: S.selectionInactiveBackgroundOpaque),
																	(R = (H.rgba >> 8) & 16777215),
																	(U = 50331648),
																	(ie = !0),
																	S.selectionForeground &&
																		((Be = 50331648),
																		(Ee =
																			(S.selectionForeground.rgba >> 8) &
																			16777215),
																		(N = S.selectionForeground))),
																ie && K.push('xterm-decoration-top'),
																U)
															) {
																case 16777216:
																case 33554432:
																	((G = S.ansi[R]), K.push(`xterm-bg-${R}`));
																	break;
																case 50331648:
																	((G = h.channels.toColor(
																		R >> 16,
																		(R >> 8) & 255,
																		255 & R,
																	)),
																		this._addStyle(
																			y,
																			`background-color:#${f((R >>> 0).toString(16), '0', 6)}`,
																		));
																	break;
																default:
																	O
																		? ((G = S.foreground),
																			K.push(
																				`xterm-bg-${n.INVERTED_DEFAULT_COLOR}`,
																			))
																		: (G = S.background);
															}
															switch (
																(H ||
																	(te.isDim() &&
																		(H = h.color.multiplyOpacity(G, 0.5))),
																Be)
															) {
																case 16777216:
																case 33554432:
																	(te.isBold() &&
																		Ee < 8 &&
																		this._optionsService.rawOptions
																			.drawBoldTextInBrightColors &&
																		(Ee += 8),
																		this._applyMinimumContrast(
																			y,
																			G,
																			S.ansi[Ee],
																			te,
																			H,
																			void 0,
																		) || K.push(`xterm-fg-${Ee}`));
																	break;
																case 50331648:
																	const Z = h.channels.toColor(
																		(Ee >> 16) & 255,
																		(Ee >> 8) & 255,
																		255 & Ee,
																	);
																	this._applyMinimumContrast(
																		y,
																		G,
																		Z,
																		te,
																		H,
																		N,
																	) ||
																		this._addStyle(
																			y,
																			`color:#${f(Ee.toString(16), '0', 6)}`,
																		);
																	break;
																default:
																	this._applyMinimumContrast(
																		y,
																		G,
																		S.foreground,
																		te,
																		H,
																		N,
																	) ||
																		(O &&
																			K.push(
																				`xterm-fg-${n.INVERTED_DEFAULT_COLOR}`,
																			));
															}
															(K.length &&
																((y.className = K.join(' ')), (K.length = 0)),
																Re || ve || He ? (y.textContent = W) : x++,
																B !== this.defaultSpacing &&
																	(y.style.letterSpacing = `${B}px`),
																V.push(y),
																(oe = be));
														}
														return (y && x && (y.textContent = W), V);
													}
													_applyMinimumContrast(u, v, c, m, w, k) {
														if (
															this._optionsService.rawOptions
																.minimumContrastRatio === 1 ||
															(0, e.treatGlyphAsBackgroundColor)(m.getCode())
														)
															return !1;
														const L = this._getContrastCache(m);
														let b;
														if (
															(w || k || (b = L.getColor(v.rgba, c.rgba)),
															b === void 0)
														) {
															const A =
																this._optionsService.rawOptions
																	.minimumContrastRatio / (m.isDim() ? 2 : 1);
															((b = h.color.ensureContrastRatio(
																w || v,
																k || c,
																A,
															)),
																L.setColor(
																	(w || v).rgba,
																	(k || c).rgba,
																	b ?? null,
																));
														}
														return (
															!!b && (this._addStyle(u, `color:${b.css}`), !0)
														);
													}
													_getContrastCache(u) {
														return u.isDim()
															? this._themeService.colors.halfContrastCache
															: this._themeService.colors.contrastCache;
													}
													_addStyle(u, v) {
														u.setAttribute(
															'style',
															`${u.getAttribute('style') || ''}${v};`,
														);
													}
													_isCellInSelection(u, v) {
														const c = this._selectionStart,
															m = this._selectionEnd;
														return (
															!(!c || !m) &&
															(this._columnSelectMode
																? c[0] <= m[0]
																	? u >= c[0] &&
																		v >= c[1] &&
																		u < m[0] &&
																		v <= m[1]
																	: u < c[0] &&
																		v >= c[1] &&
																		u >= m[0] &&
																		v <= m[1]
																: (v > c[1] && v < m[1]) ||
																	(c[1] === m[1] &&
																		v === c[1] &&
																		u >= c[0] &&
																		u < m[0]) ||
																	(c[1] < m[1] && v === m[1] && u < m[0]) ||
																	(c[1] < m[1] && v === c[1] && u >= c[0]))
														);
													}
												});
												function f(u, v, c) {
													for (; u.length < c; ) u = v + u;
													return u;
												}
												r.DomRendererRowFactory = o = l(
													[
														_(1, s.ICharacterJoinerService),
														_(2, g.IOptionsService),
														_(3, s.ICoreBrowserService),
														_(4, g.ICoreService),
														_(5, g.IDecorationService),
														_(6, s.IThemeService),
													],
													o,
												);
											},
											2550: (I, r) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.WidthCache = void 0),
													(r.WidthCache = class {
														constructor(a, l) {
															((this._flat = new Float32Array(256)),
																(this._font = ''),
																(this._fontSize = 0),
																(this._weight = 'normal'),
																(this._weightBold = 'bold'),
																(this._measureElements = []),
																(this._container = a.createElement('div')),
																this._container.classList.add(
																	'xterm-width-cache-measure-container',
																),
																this._container.setAttribute(
																	'aria-hidden',
																	'true',
																),
																(this._container.style.whiteSpace = 'pre'),
																(this._container.style.fontKerning = 'none'));
															const _ = a.createElement('span');
															_.classList.add('xterm-char-measure-element');
															const n = a.createElement('span');
															(n.classList.add('xterm-char-measure-element'),
																(n.style.fontWeight = 'bold'));
															const d = a.createElement('span');
															(d.classList.add('xterm-char-measure-element'),
																(d.style.fontStyle = 'italic'));
															const p = a.createElement('span');
															(p.classList.add('xterm-char-measure-element'),
																(p.style.fontWeight = 'bold'),
																(p.style.fontStyle = 'italic'),
																(this._measureElements = [_, n, d, p]),
																this._container.appendChild(_),
																this._container.appendChild(n),
																this._container.appendChild(d),
																this._container.appendChild(p),
																l.appendChild(this._container),
																this.clear());
														}
														dispose() {
															(this._container.remove(),
																(this._measureElements.length = 0),
																(this._holey = void 0));
														}
														clear() {
															(this._flat.fill(-9999),
																(this._holey = new Map()));
														}
														setFont(a, l, _, n) {
															(a === this._font &&
																l === this._fontSize &&
																_ === this._weight &&
																n === this._weightBold) ||
																((this._font = a),
																(this._fontSize = l),
																(this._weight = _),
																(this._weightBold = n),
																(this._container.style.fontFamily = this._font),
																(this._container.style.fontSize = `${this._fontSize}px`),
																(this._measureElements[0].style.fontWeight = `${_}`),
																(this._measureElements[1].style.fontWeight = `${n}`),
																(this._measureElements[2].style.fontWeight = `${_}`),
																(this._measureElements[3].style.fontWeight = `${n}`),
																this.clear());
														}
														get(a, l, _) {
															let n = 0;
															if (
																!l &&
																!_ &&
																a.length === 1 &&
																(n = a.charCodeAt(0)) < 256
															) {
																if (this._flat[n] !== -9999)
																	return this._flat[n];
																const g = this._measure(a, 0);
																return (g > 0 && (this._flat[n] = g), g);
															}
															let d = a;
															(l && (d += 'B'), _ && (d += 'I'));
															let p = this._holey.get(d);
															if (p === void 0) {
																let g = 0;
																(l && (g |= 1),
																	_ && (g |= 2),
																	(p = this._measure(a, g)),
																	p > 0 && this._holey.set(d, p));
															}
															return p;
														}
														_measure(a, l) {
															const _ = this._measureElements[l];
															return (
																(_.textContent = a.repeat(32)),
																_.offsetWidth / 32
															);
														}
													}));
											},
											2223: (I, r, a) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.TEXT_BASELINE =
														r.DIM_OPACITY =
														r.INVERTED_DEFAULT_COLOR =
															void 0));
												const l = a(6114);
												((r.INVERTED_DEFAULT_COLOR = 257),
													(r.DIM_OPACITY = 0.5),
													(r.TEXT_BASELINE =
														l.isFirefox || l.isLegacyEdge
															? 'bottom'
															: 'ideographic'));
											},
											6171: (I, r) => {
												function a(_) {
													return 57508 <= _ && _ <= 57558;
												}
												function l(_) {
													return (
														(_ >= 128512 && _ <= 128591) ||
														(_ >= 127744 && _ <= 128511) ||
														(_ >= 128640 && _ <= 128767) ||
														(_ >= 9728 && _ <= 9983) ||
														(_ >= 9984 && _ <= 10175) ||
														(_ >= 65024 && _ <= 65039) ||
														(_ >= 129280 && _ <= 129535) ||
														(_ >= 127462 && _ <= 127487)
													);
												}
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.computeNextVariantOffset =
														r.createRenderDimensions =
														r.treatGlyphAsBackgroundColor =
														r.allowRescaling =
														r.isEmoji =
														r.isRestrictedPowerlineGlyph =
														r.isPowerlineGlyph =
														r.throwIfFalsy =
															void 0),
													(r.throwIfFalsy = function (_) {
														if (!_) throw new Error('value must not be falsy');
														return _;
													}),
													(r.isPowerlineGlyph = a),
													(r.isRestrictedPowerlineGlyph = function (_) {
														return 57520 <= _ && _ <= 57527;
													}),
													(r.isEmoji = l),
													(r.allowRescaling = function (_, n, d, p) {
														return (
															n === 1 &&
															d > Math.ceil(1.5 * p) &&
															_ !== void 0 &&
															_ > 255 &&
															!l(_) &&
															!a(_) &&
															!(function (g) {
																return 57344 <= g && g <= 63743;
															})(_)
														);
													}),
													(r.treatGlyphAsBackgroundColor = function (_) {
														return (
															a(_) ||
															(function (n) {
																return 9472 <= n && n <= 9631;
															})(_)
														);
													}),
													(r.createRenderDimensions = function () {
														return {
															css: {
																canvas: { width: 0, height: 0 },
																cell: { width: 0, height: 0 },
															},
															device: {
																canvas: { width: 0, height: 0 },
																cell: { width: 0, height: 0 },
																char: { width: 0, height: 0, left: 0, top: 0 },
															},
														};
													}),
													(r.computeNextVariantOffset = function (_, n, d = 0) {
														return (
															(_ - (2 * Math.round(n) - d)) %
															(2 * Math.round(n))
														);
													}));
											},
											6052: (I, r) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.createSelectionRenderModel = void 0));
												class a {
													constructor() {
														this.clear();
													}
													clear() {
														((this.hasSelection = !1),
															(this.columnSelectMode = !1),
															(this.viewportStartRow = 0),
															(this.viewportEndRow = 0),
															(this.viewportCappedStartRow = 0),
															(this.viewportCappedEndRow = 0),
															(this.startCol = 0),
															(this.endCol = 0),
															(this.selectionStart = void 0),
															(this.selectionEnd = void 0));
													}
													update(_, n, d, p = !1) {
														if (
															((this.selectionStart = n),
															(this.selectionEnd = d),
															!n || !d || (n[0] === d[0] && n[1] === d[1]))
														)
															return void this.clear();
														const g = _.buffers.active.ydisp,
															h = n[1] - g,
															s = d[1] - g,
															i = Math.max(h, 0),
															e = Math.min(s, _.rows - 1);
														i >= _.rows || e < 0
															? this.clear()
															: ((this.hasSelection = !0),
																(this.columnSelectMode = p),
																(this.viewportStartRow = h),
																(this.viewportEndRow = s),
																(this.viewportCappedStartRow = i),
																(this.viewportCappedEndRow = e),
																(this.startCol = n[0]),
																(this.endCol = d[0]));
													}
													isCellSelected(_, n, d) {
														return (
															!!this.hasSelection &&
															((d -= _.buffer.active.viewportY),
															this.columnSelectMode
																? this.startCol <= this.endCol
																	? n >= this.startCol &&
																		d >= this.viewportCappedStartRow &&
																		n < this.endCol &&
																		d <= this.viewportCappedEndRow
																	: n < this.startCol &&
																		d >= this.viewportCappedStartRow &&
																		n >= this.endCol &&
																		d <= this.viewportCappedEndRow
																: (d > this.viewportStartRow &&
																		d < this.viewportEndRow) ||
																	(this.viewportStartRow ===
																		this.viewportEndRow &&
																		d === this.viewportStartRow &&
																		n >= this.startCol &&
																		n < this.endCol) ||
																	(this.viewportStartRow <
																		this.viewportEndRow &&
																		d === this.viewportEndRow &&
																		n < this.endCol) ||
																	(this.viewportStartRow <
																		this.viewportEndRow &&
																		d === this.viewportStartRow &&
																		n >= this.startCol))
														);
													}
												}
												r.createSelectionRenderModel = function () {
													return new a();
												};
											},
											456: (I, r) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.SelectionModel = void 0),
													(r.SelectionModel = class {
														constructor(a) {
															((this._bufferService = a),
																(this.isSelectAllActive = !1),
																(this.selectionStartLength = 0));
														}
														clearSelection() {
															((this.selectionStart = void 0),
																(this.selectionEnd = void 0),
																(this.isSelectAllActive = !1),
																(this.selectionStartLength = 0));
														}
														get finalSelectionStart() {
															return this.isSelectAllActive
																? [0, 0]
																: this.selectionEnd &&
																	  this.selectionStart &&
																	  this.areSelectionValuesReversed()
																	? this.selectionEnd
																	: this.selectionStart;
														}
														get finalSelectionEnd() {
															if (this.isSelectAllActive)
																return [
																	this._bufferService.cols,
																	this._bufferService.buffer.ybase +
																		this._bufferService.rows -
																		1,
																];
															if (this.selectionStart) {
																if (
																	!this.selectionEnd ||
																	this.areSelectionValuesReversed()
																) {
																	const a =
																		this.selectionStart[0] +
																		this.selectionStartLength;
																	return a > this._bufferService.cols
																		? a % this._bufferService.cols == 0
																			? [
																					this._bufferService.cols,
																					this.selectionStart[1] +
																						Math.floor(
																							a / this._bufferService.cols,
																						) -
																						1,
																				]
																			: [
																					a % this._bufferService.cols,
																					this.selectionStart[1] +
																						Math.floor(
																							a / this._bufferService.cols,
																						),
																				]
																		: [a, this.selectionStart[1]];
																}
																if (
																	this.selectionStartLength &&
																	this.selectionEnd[1] ===
																		this.selectionStart[1]
																) {
																	const a =
																		this.selectionStart[0] +
																		this.selectionStartLength;
																	return a > this._bufferService.cols
																		? [
																				a % this._bufferService.cols,
																				this.selectionStart[1] +
																					Math.floor(
																						a / this._bufferService.cols,
																					),
																			]
																		: [
																				Math.max(a, this.selectionEnd[0]),
																				this.selectionEnd[1],
																			];
																}
																return this.selectionEnd;
															}
														}
														areSelectionValuesReversed() {
															const a = this.selectionStart,
																l = this.selectionEnd;
															return (
																!(!a || !l) &&
																(a[1] > l[1] || (a[1] === l[1] && a[0] > l[0]))
															);
														}
														handleTrim(a) {
															return (
																this.selectionStart &&
																	(this.selectionStart[1] -= a),
																this.selectionEnd &&
																	(this.selectionEnd[1] -= a),
																this.selectionEnd && this.selectionEnd[1] < 0
																	? (this.clearSelection(), !0)
																	: (this.selectionStart &&
																			this.selectionStart[1] < 0 &&
																			(this.selectionStart[1] = 0),
																		!1)
															);
														}
													}));
											},
											428: function (I, r, a) {
												var l =
														(this && this.__decorate) ||
														function (e, t, o, f) {
															var u,
																v = arguments.length,
																c =
																	v < 3
																		? t
																		: f === null
																			? (f = Object.getOwnPropertyDescriptor(
																					t,
																					o,
																				))
																			: f;
															if (
																typeof Reflect == 'object' &&
																typeof Reflect.decorate == 'function'
															)
																c = Reflect.decorate(e, t, o, f);
															else
																for (var m = e.length - 1; m >= 0; m--)
																	(u = e[m]) &&
																		(c =
																			(v < 3
																				? u(c)
																				: v > 3
																					? u(t, o, c)
																					: u(t, o)) || c);
															return (
																v > 3 && c && Object.defineProperty(t, o, c),
																c
															);
														},
													_ =
														(this && this.__param) ||
														function (e, t) {
															return function (o, f) {
																t(o, f, e);
															};
														};
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.CharSizeService = void 0));
												const n = a(2585),
													d = a(8460),
													p = a(844);
												let g = (r.CharSizeService = class extends (
													p.Disposable
												) {
													get hasValidSize() {
														return this.width > 0 && this.height > 0;
													}
													constructor(e, t, o) {
														(super(),
															(this._optionsService = o),
															(this.width = 0),
															(this.height = 0),
															(this._onCharSizeChange = this.register(
																new d.EventEmitter(),
															)),
															(this.onCharSizeChange =
																this._onCharSizeChange.event));
														try {
															this._measureStrategy = this.register(
																new i(this._optionsService),
															);
														} catch {
															this._measureStrategy = this.register(
																new s(e, t, this._optionsService),
															);
														}
														this.register(
															this._optionsService.onMultipleOptionChange(
																['fontFamily', 'fontSize'],
																() => this.measure(),
															),
														);
													}
													measure() {
														const e = this._measureStrategy.measure();
														(e.width === this.width &&
															e.height === this.height) ||
															((this.width = e.width),
															(this.height = e.height),
															this._onCharSizeChange.fire());
													}
												});
												r.CharSizeService = g = l([_(2, n.IOptionsService)], g);
												class h extends p.Disposable {
													constructor() {
														(super(...arguments),
															(this._result = { width: 0, height: 0 }));
													}
													_validateAndSet(t, o) {
														t !== void 0 &&
															t > 0 &&
															o !== void 0 &&
															o > 0 &&
															((this._result.width = t),
															(this._result.height = o));
													}
												}
												class s extends h {
													constructor(t, o, f) {
														(super(),
															(this._document = t),
															(this._parentElement = o),
															(this._optionsService = f),
															(this._measureElement =
																this._document.createElement('span')),
															this._measureElement.classList.add(
																'xterm-char-measure-element',
															),
															(this._measureElement.textContent = 'W'.repeat(
																32,
															)),
															this._measureElement.setAttribute(
																'aria-hidden',
																'true',
															),
															(this._measureElement.style.whiteSpace = 'pre'),
															(this._measureElement.style.fontKerning = 'none'),
															this._parentElement.appendChild(
																this._measureElement,
															));
													}
													measure() {
														return (
															(this._measureElement.style.fontFamily =
																this._optionsService.rawOptions.fontFamily),
															(this._measureElement.style.fontSize = `${this._optionsService.rawOptions.fontSize}px`),
															this._validateAndSet(
																Number(this._measureElement.offsetWidth) / 32,
																Number(this._measureElement.offsetHeight),
															),
															this._result
														);
													}
												}
												class i extends h {
													constructor(t) {
														(super(),
															(this._optionsService = t),
															(this._canvas = new OffscreenCanvas(100, 100)),
															(this._ctx = this._canvas.getContext('2d')));
														const o = this._ctx.measureText('W');
														if (
															!(
																'width' in o &&
																'fontBoundingBoxAscent' in o &&
																'fontBoundingBoxDescent' in o
															)
														)
															throw new Error(
																'Required font metrics not supported',
															);
													}
													measure() {
														this._ctx.font = `${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;
														const t = this._ctx.measureText('W');
														return (
															this._validateAndSet(
																t.width,
																t.fontBoundingBoxAscent +
																	t.fontBoundingBoxDescent,
															),
															this._result
														);
													}
												}
											},
											4269: function (I, r, a) {
												var l =
														(this && this.__decorate) ||
														function (i, e, t, o) {
															var f,
																u = arguments.length,
																v =
																	u < 3
																		? e
																		: o === null
																			? (o = Object.getOwnPropertyDescriptor(
																					e,
																					t,
																				))
																			: o;
															if (
																typeof Reflect == 'object' &&
																typeof Reflect.decorate == 'function'
															)
																v = Reflect.decorate(i, e, t, o);
															else
																for (var c = i.length - 1; c >= 0; c--)
																	(f = i[c]) &&
																		(v =
																			(u < 3
																				? f(v)
																				: u > 3
																					? f(e, t, v)
																					: f(e, t)) || v);
															return (
																u > 3 && v && Object.defineProperty(e, t, v),
																v
															);
														},
													_ =
														(this && this.__param) ||
														function (i, e) {
															return function (t, o) {
																e(t, o, i);
															};
														};
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.CharacterJoinerService = r.JoinedCellData =
														void 0));
												const n = a(3734),
													d = a(643),
													p = a(511),
													g = a(2585);
												class h extends n.AttributeData {
													constructor(e, t, o) {
														(super(),
															(this.content = 0),
															(this.combinedData = ''),
															(this.fg = e.fg),
															(this.bg = e.bg),
															(this.combinedData = t),
															(this._width = o));
													}
													isCombined() {
														return 2097152;
													}
													getWidth() {
														return this._width;
													}
													getChars() {
														return this.combinedData;
													}
													getCode() {
														return 2097151;
													}
													setFromCharData(e) {
														throw new Error('not implemented');
													}
													getAsCharData() {
														return [
															this.fg,
															this.getChars(),
															this.getWidth(),
															this.getCode(),
														];
													}
												}
												r.JoinedCellData = h;
												let s = (r.CharacterJoinerService = class et {
													constructor(e) {
														((this._bufferService = e),
															(this._characterJoiners = []),
															(this._nextCharacterJoinerId = 0),
															(this._workCell = new p.CellData()));
													}
													register(e) {
														const t = {
															id: this._nextCharacterJoinerId++,
															handler: e,
														};
														return (this._characterJoiners.push(t), t.id);
													}
													deregister(e) {
														for (
															let t = 0;
															t < this._characterJoiners.length;
															t++
														)
															if (this._characterJoiners[t].id === e)
																return (
																	this._characterJoiners.splice(t, 1),
																	!0
																);
														return !1;
													}
													getJoinedCharacters(e) {
														if (this._characterJoiners.length === 0) return [];
														const t = this._bufferService.buffer.lines.get(e);
														if (!t || t.length === 0) return [];
														const o = [],
															f = t.translateToString(!0);
														let u = 0,
															v = 0,
															c = 0,
															m = t.getFg(0),
															w = t.getBg(0);
														for (let k = 0; k < t.getTrimmedLength(); k++)
															if (
																(t.loadCell(k, this._workCell),
																this._workCell.getWidth() !== 0)
															) {
																if (
																	this._workCell.fg !== m ||
																	this._workCell.bg !== w
																) {
																	if (k - u > 1) {
																		const L = this._getJoinedRanges(
																			f,
																			c,
																			v,
																			t,
																			u,
																		);
																		for (let b = 0; b < L.length; b++)
																			o.push(L[b]);
																	}
																	((u = k),
																		(c = v),
																		(m = this._workCell.fg),
																		(w = this._workCell.bg));
																}
																v +=
																	this._workCell.getChars().length ||
																	d.WHITESPACE_CELL_CHAR.length;
															}
														if (this._bufferService.cols - u > 1) {
															const k = this._getJoinedRanges(f, c, v, t, u);
															for (let L = 0; L < k.length; L++) o.push(k[L]);
														}
														return o;
													}
													_getJoinedRanges(e, t, o, f, u) {
														const v = e.substring(t, o);
														let c = [];
														try {
															c = this._characterJoiners[0].handler(v);
														} catch (m) {
															console.error(m);
														}
														for (
															let m = 1;
															m < this._characterJoiners.length;
															m++
														)
															try {
																const w = this._characterJoiners[m].handler(v);
																for (let k = 0; k < w.length; k++)
																	et._mergeRanges(c, w[k]);
															} catch (w) {
																console.error(w);
															}
														return (this._stringRangesToCellRanges(c, f, u), c);
													}
													_stringRangesToCellRanges(e, t, o) {
														let f = 0,
															u = !1,
															v = 0,
															c = e[f];
														if (c) {
															for (
																let m = o;
																m < this._bufferService.cols;
																m++
															) {
																const w = t.getWidth(m),
																	k =
																		t.getString(m).length ||
																		d.WHITESPACE_CELL_CHAR.length;
																if (w !== 0) {
																	if (
																		(!u && c[0] <= v && ((c[0] = m), (u = !0)),
																		c[1] <= v)
																	) {
																		if (((c[1] = m), (c = e[++f]), !c)) break;
																		c[0] <= v
																			? ((c[0] = m), (u = !0))
																			: (u = !1);
																	}
																	v += k;
																}
															}
															c && (c[1] = this._bufferService.cols);
														}
													}
													static _mergeRanges(e, t) {
														let o = !1;
														for (let f = 0; f < e.length; f++) {
															const u = e[f];
															if (o) {
																if (t[1] <= u[0])
																	return ((e[f - 1][1] = t[1]), e);
																if (t[1] <= u[1])
																	return (
																		(e[f - 1][1] = Math.max(t[1], u[1])),
																		e.splice(f, 1),
																		e
																	);
																(e.splice(f, 1), f--);
															} else {
																if (t[1] <= u[0]) return (e.splice(f, 0, t), e);
																if (t[1] <= u[1])
																	return ((u[0] = Math.min(t[0], u[0])), e);
																t[0] < u[1] &&
																	((u[0] = Math.min(t[0], u[0])), (o = !0));
															}
														}
														return (
															o ? (e[e.length - 1][1] = t[1]) : e.push(t),
															e
														);
													}
												});
												r.CharacterJoinerService = s = l(
													[_(0, g.IBufferService)],
													s,
												);
											},
											5114: (I, r, a) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.CoreBrowserService = void 0));
												const l = a(844),
													_ = a(8460),
													n = a(3656);
												class d extends l.Disposable {
													constructor(h, s, i) {
														(super(),
															(this._textarea = h),
															(this._window = s),
															(this.mainDocument = i),
															(this._isFocused = !1),
															(this._cachedIsFocused = void 0),
															(this._screenDprMonitor = new p(this._window)),
															(this._onDprChange = this.register(
																new _.EventEmitter(),
															)),
															(this.onDprChange = this._onDprChange.event),
															(this._onWindowChange = this.register(
																new _.EventEmitter(),
															)),
															(this.onWindowChange =
																this._onWindowChange.event),
															this.register(
																this.onWindowChange((e) =>
																	this._screenDprMonitor.setWindow(e),
																),
															),
															this.register(
																(0, _.forwardEvent)(
																	this._screenDprMonitor.onDprChange,
																	this._onDprChange,
																),
															),
															this._textarea.addEventListener(
																'focus',
																() => (this._isFocused = !0),
															),
															this._textarea.addEventListener(
																'blur',
																() => (this._isFocused = !1),
															));
													}
													get window() {
														return this._window;
													}
													set window(h) {
														this._window !== h &&
															((this._window = h),
															this._onWindowChange.fire(this._window));
													}
													get dpr() {
														return this.window.devicePixelRatio;
													}
													get isFocused() {
														return (
															this._cachedIsFocused === void 0 &&
																((this._cachedIsFocused =
																	this._isFocused &&
																	this._textarea.ownerDocument.hasFocus()),
																queueMicrotask(
																	() => (this._cachedIsFocused = void 0),
																)),
															this._cachedIsFocused
														);
													}
												}
												r.CoreBrowserService = d;
												class p extends l.Disposable {
													constructor(h) {
														(super(),
															(this._parentWindow = h),
															(this._windowResizeListener = this.register(
																new l.MutableDisposable(),
															)),
															(this._onDprChange = this.register(
																new _.EventEmitter(),
															)),
															(this.onDprChange = this._onDprChange.event),
															(this._outerListener = () =>
																this._setDprAndFireIfDiffers()),
															(this._currentDevicePixelRatio =
																this._parentWindow.devicePixelRatio),
															this._updateDpr(),
															this._setWindowResizeListener(),
															this.register(
																(0, l.toDisposable)(() => this.clearListener()),
															));
													}
													setWindow(h) {
														((this._parentWindow = h),
															this._setWindowResizeListener(),
															this._setDprAndFireIfDiffers());
													}
													_setWindowResizeListener() {
														this._windowResizeListener.value = (0,
														n.addDisposableDomListener)(
															this._parentWindow,
															'resize',
															() => this._setDprAndFireIfDiffers(),
														);
													}
													_setDprAndFireIfDiffers() {
														(this._parentWindow.devicePixelRatio !==
															this._currentDevicePixelRatio &&
															this._onDprChange.fire(
																this._parentWindow.devicePixelRatio,
															),
															this._updateDpr());
													}
													_updateDpr() {
														var h;
														this._outerListener &&
															((h = this._resolutionMediaMatchList) == null ||
																h.removeListener(this._outerListener),
															(this._currentDevicePixelRatio =
																this._parentWindow.devicePixelRatio),
															(this._resolutionMediaMatchList =
																this._parentWindow.matchMedia(
																	`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`,
																)),
															this._resolutionMediaMatchList.addListener(
																this._outerListener,
															));
													}
													clearListener() {
														this._resolutionMediaMatchList &&
															this._outerListener &&
															(this._resolutionMediaMatchList.removeListener(
																this._outerListener,
															),
															(this._resolutionMediaMatchList = void 0),
															(this._outerListener = void 0));
													}
												}
											},
											779: (I, r, a) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.LinkProviderService = void 0));
												const l = a(844);
												class _ extends l.Disposable {
													constructor() {
														(super(),
															(this.linkProviders = []),
															this.register(
																(0, l.toDisposable)(
																	() => (this.linkProviders.length = 0),
																),
															));
													}
													registerLinkProvider(d) {
														return (
															this.linkProviders.push(d),
															{
																dispose: () => {
																	const p = this.linkProviders.indexOf(d);
																	p !== -1 && this.linkProviders.splice(p, 1);
																},
															}
														);
													}
												}
												r.LinkProviderService = _;
											},
											8934: function (I, r, a) {
												var l =
														(this && this.__decorate) ||
														function (g, h, s, i) {
															var e,
																t = arguments.length,
																o =
																	t < 3
																		? h
																		: i === null
																			? (i = Object.getOwnPropertyDescriptor(
																					h,
																					s,
																				))
																			: i;
															if (
																typeof Reflect == 'object' &&
																typeof Reflect.decorate == 'function'
															)
																o = Reflect.decorate(g, h, s, i);
															else
																for (var f = g.length - 1; f >= 0; f--)
																	(e = g[f]) &&
																		(o =
																			(t < 3
																				? e(o)
																				: t > 3
																					? e(h, s, o)
																					: e(h, s)) || o);
															return (
																t > 3 && o && Object.defineProperty(h, s, o),
																o
															);
														},
													_ =
														(this && this.__param) ||
														function (g, h) {
															return function (s, i) {
																h(s, i, g);
															};
														};
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.MouseService = void 0));
												const n = a(4725),
													d = a(9806);
												let p = (r.MouseService = class {
													constructor(g, h) {
														((this._renderService = g),
															(this._charSizeService = h));
													}
													getCoords(g, h, s, i, e) {
														return (0, d.getCoords)(
															window,
															g,
															h,
															s,
															i,
															this._charSizeService.hasValidSize,
															this._renderService.dimensions.css.cell.width,
															this._renderService.dimensions.css.cell.height,
															e,
														);
													}
													getMouseReportCoords(g, h) {
														const s = (0, d.getCoordsRelativeToElement)(
															window,
															g,
															h,
														);
														if (this._charSizeService.hasValidSize)
															return (
																(s[0] = Math.min(
																	Math.max(s[0], 0),
																	this._renderService.dimensions.css.canvas
																		.width - 1,
																)),
																(s[1] = Math.min(
																	Math.max(s[1], 0),
																	this._renderService.dimensions.css.canvas
																		.height - 1,
																)),
																{
																	col: Math.floor(
																		s[0] /
																			this._renderService.dimensions.css.cell
																				.width,
																	),
																	row: Math.floor(
																		s[1] /
																			this._renderService.dimensions.css.cell
																				.height,
																	),
																	x: Math.floor(s[0]),
																	y: Math.floor(s[1]),
																}
															);
													}
												});
												r.MouseService = p = l(
													[_(0, n.IRenderService), _(1, n.ICharSizeService)],
													p,
												);
											},
											3230: function (I, r, a) {
												var l =
														(this && this.__decorate) ||
														function (e, t, o, f) {
															var u,
																v = arguments.length,
																c =
																	v < 3
																		? t
																		: f === null
																			? (f = Object.getOwnPropertyDescriptor(
																					t,
																					o,
																				))
																			: f;
															if (
																typeof Reflect == 'object' &&
																typeof Reflect.decorate == 'function'
															)
																c = Reflect.decorate(e, t, o, f);
															else
																for (var m = e.length - 1; m >= 0; m--)
																	(u = e[m]) &&
																		(c =
																			(v < 3
																				? u(c)
																				: v > 3
																					? u(t, o, c)
																					: u(t, o)) || c);
															return (
																v > 3 && c && Object.defineProperty(t, o, c),
																c
															);
														},
													_ =
														(this && this.__param) ||
														function (e, t) {
															return function (o, f) {
																t(o, f, e);
															};
														};
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.RenderService = void 0));
												const n = a(6193),
													d = a(4725),
													p = a(8460),
													g = a(844),
													h = a(7226),
													s = a(2585);
												let i = (r.RenderService = class extends g.Disposable {
													get dimensions() {
														return this._renderer.value.dimensions;
													}
													constructor(e, t, o, f, u, v, c, m) {
														(super(),
															(this._rowCount = e),
															(this._charSizeService = f),
															(this._renderer = this.register(
																new g.MutableDisposable(),
															)),
															(this._pausedResizeTask =
																new h.DebouncedIdleTask()),
															(this._observerDisposable = this.register(
																new g.MutableDisposable(),
															)),
															(this._isPaused = !1),
															(this._needsFullRefresh = !1),
															(this._isNextRenderRedrawOnly = !0),
															(this._needsSelectionRefresh = !1),
															(this._canvasWidth = 0),
															(this._canvasHeight = 0),
															(this._selectionState = {
																start: void 0,
																end: void 0,
																columnSelectMode: !1,
															}),
															(this._onDimensionsChange = this.register(
																new p.EventEmitter(),
															)),
															(this.onDimensionsChange =
																this._onDimensionsChange.event),
															(this._onRenderedViewportChange = this.register(
																new p.EventEmitter(),
															)),
															(this.onRenderedViewportChange =
																this._onRenderedViewportChange.event),
															(this._onRender = this.register(
																new p.EventEmitter(),
															)),
															(this.onRender = this._onRender.event),
															(this._onRefreshRequest = this.register(
																new p.EventEmitter(),
															)),
															(this.onRefreshRequest =
																this._onRefreshRequest.event),
															(this._renderDebouncer = new n.RenderDebouncer(
																(w, k) => this._renderRows(w, k),
																c,
															)),
															this.register(this._renderDebouncer),
															this.register(
																c.onDprChange(() =>
																	this.handleDevicePixelRatioChange(),
																),
															),
															this.register(
																v.onResize(() => this._fullRefresh()),
															),
															this.register(
																v.buffers.onBufferActivate(() => {
																	var w;
																	return (w = this._renderer.value) == null
																		? void 0
																		: w.clear();
																}),
															),
															this.register(
																o.onOptionChange(() =>
																	this._handleOptionsChanged(),
																),
															),
															this.register(
																this._charSizeService.onCharSizeChange(() =>
																	this.handleCharSizeChanged(),
																),
															),
															this.register(
																u.onDecorationRegistered(() =>
																	this._fullRefresh(),
																),
															),
															this.register(
																u.onDecorationRemoved(() =>
																	this._fullRefresh(),
																),
															),
															this.register(
																o.onMultipleOptionChange(
																	[
																		'customGlyphs',
																		'drawBoldTextInBrightColors',
																		'letterSpacing',
																		'lineHeight',
																		'fontFamily',
																		'fontSize',
																		'fontWeight',
																		'fontWeightBold',
																		'minimumContrastRatio',
																		'rescaleOverlappingGlyphs',
																	],
																	() => {
																		(this.clear(),
																			this.handleResize(v.cols, v.rows),
																			this._fullRefresh());
																	},
																),
															),
															this.register(
																o.onMultipleOptionChange(
																	['cursorBlink', 'cursorStyle'],
																	() =>
																		this.refreshRows(
																			v.buffer.y,
																			v.buffer.y,
																			!0,
																		),
																),
															),
															this.register(
																m.onChangeColors(() => this._fullRefresh()),
															),
															this._registerIntersectionObserver(c.window, t),
															this.register(
																c.onWindowChange((w) =>
																	this._registerIntersectionObserver(w, t),
																),
															));
													}
													_registerIntersectionObserver(e, t) {
														if ('IntersectionObserver' in e) {
															const o = new e.IntersectionObserver(
																(f) =>
																	this._handleIntersectionChange(
																		f[f.length - 1],
																	),
																{ threshold: 0 },
															);
															(o.observe(t),
																(this._observerDisposable.value = (0,
																g.toDisposable)(() => o.disconnect())));
														}
													}
													_handleIntersectionChange(e) {
														((this._isPaused =
															e.isIntersecting === void 0
																? e.intersectionRatio === 0
																: !e.isIntersecting),
															this._isPaused ||
																this._charSizeService.hasValidSize ||
																this._charSizeService.measure(),
															!this._isPaused &&
																this._needsFullRefresh &&
																(this._pausedResizeTask.flush(),
																this.refreshRows(0, this._rowCount - 1),
																(this._needsFullRefresh = !1)));
													}
													refreshRows(e, t, o = !1) {
														this._isPaused
															? (this._needsFullRefresh = !0)
															: (o || (this._isNextRenderRedrawOnly = !1),
																this._renderDebouncer.refresh(
																	e,
																	t,
																	this._rowCount,
																));
													}
													_renderRows(e, t) {
														this._renderer.value &&
															((e = Math.min(e, this._rowCount - 1)),
															(t = Math.min(t, this._rowCount - 1)),
															this._renderer.value.renderRows(e, t),
															this._needsSelectionRefresh &&
																(this._renderer.value.handleSelectionChanged(
																	this._selectionState.start,
																	this._selectionState.end,
																	this._selectionState.columnSelectMode,
																),
																(this._needsSelectionRefresh = !1)),
															this._isNextRenderRedrawOnly ||
																this._onRenderedViewportChange.fire({
																	start: e,
																	end: t,
																}),
															this._onRender.fire({ start: e, end: t }),
															(this._isNextRenderRedrawOnly = !0));
													}
													resize(e, t) {
														((this._rowCount = t), this._fireOnCanvasResize());
													}
													_handleOptionsChanged() {
														this._renderer.value &&
															(this.refreshRows(0, this._rowCount - 1),
															this._fireOnCanvasResize());
													}
													_fireOnCanvasResize() {
														this._renderer.value &&
															((this._renderer.value.dimensions.css.canvas
																.width === this._canvasWidth &&
																this._renderer.value.dimensions.css.canvas
																	.height === this._canvasHeight) ||
																this._onDimensionsChange.fire(
																	this._renderer.value.dimensions,
																));
													}
													hasRenderer() {
														return !!this._renderer.value;
													}
													setRenderer(e) {
														((this._renderer.value = e),
															this._renderer.value &&
																(this._renderer.value.onRequestRedraw((t) =>
																	this.refreshRows(t.start, t.end, !0),
																),
																(this._needsSelectionRefresh = !0),
																this._fullRefresh()));
													}
													addRefreshCallback(e) {
														return this._renderDebouncer.addRefreshCallback(e);
													}
													_fullRefresh() {
														this._isPaused
															? (this._needsFullRefresh = !0)
															: this.refreshRows(0, this._rowCount - 1);
													}
													clearTextureAtlas() {
														var e, t;
														this._renderer.value &&
															((t = (e = this._renderer.value)
																.clearTextureAtlas) == null || t.call(e),
															this._fullRefresh());
													}
													handleDevicePixelRatioChange() {
														(this._charSizeService.measure(),
															this._renderer.value &&
																(this._renderer.value.handleDevicePixelRatioChange(),
																this.refreshRows(0, this._rowCount - 1)));
													}
													handleResize(e, t) {
														this._renderer.value &&
															(this._isPaused
																? this._pausedResizeTask.set(() => {
																		var o;
																		return (o = this._renderer.value) == null
																			? void 0
																			: o.handleResize(e, t);
																	})
																: this._renderer.value.handleResize(e, t),
															this._fullRefresh());
													}
													handleCharSizeChanged() {
														var e;
														(e = this._renderer.value) == null ||
															e.handleCharSizeChanged();
													}
													handleBlur() {
														var e;
														(e = this._renderer.value) == null ||
															e.handleBlur();
													}
													handleFocus() {
														var e;
														(e = this._renderer.value) == null ||
															e.handleFocus();
													}
													handleSelectionChanged(e, t, o) {
														var f;
														((this._selectionState.start = e),
															(this._selectionState.end = t),
															(this._selectionState.columnSelectMode = o),
															(f = this._renderer.value) == null ||
																f.handleSelectionChanged(e, t, o));
													}
													handleCursorMove() {
														var e;
														(e = this._renderer.value) == null ||
															e.handleCursorMove();
													}
													clear() {
														var e;
														(e = this._renderer.value) == null || e.clear();
													}
												});
												r.RenderService = i = l(
													[
														_(2, s.IOptionsService),
														_(3, d.ICharSizeService),
														_(4, s.IDecorationService),
														_(5, s.IBufferService),
														_(6, d.ICoreBrowserService),
														_(7, d.IThemeService),
													],
													i,
												);
											},
											9312: function (I, r, a) {
												var l =
														(this && this.__decorate) ||
														function (c, m, w, k) {
															var L,
																b = arguments.length,
																A =
																	b < 3
																		? m
																		: k === null
																			? (k = Object.getOwnPropertyDescriptor(
																					m,
																					w,
																				))
																			: k;
															if (
																typeof Reflect == 'object' &&
																typeof Reflect.decorate == 'function'
															)
																A = Reflect.decorate(c, m, w, k);
															else
																for (var M = c.length - 1; M >= 0; M--)
																	(L = c[M]) &&
																		(A =
																			(b < 3
																				? L(A)
																				: b > 3
																					? L(m, w, A)
																					: L(m, w)) || A);
															return (
																b > 3 && A && Object.defineProperty(m, w, A),
																A
															);
														},
													_ =
														(this && this.__param) ||
														function (c, m) {
															return function (w, k) {
																m(w, k, c);
															};
														};
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.SelectionService = void 0));
												const n = a(9806),
													d = a(9504),
													p = a(456),
													g = a(4725),
													h = a(8460),
													s = a(844),
													i = a(6114),
													e = a(4841),
													t = a(511),
													o = a(2585),
													f = 'Â ',
													u = new RegExp(f, 'g');
												let v = (r.SelectionService = class extends (
													s.Disposable
												) {
													constructor(c, m, w, k, L, b, A, M, $) {
														(super(),
															(this._element = c),
															(this._screenElement = m),
															(this._linkifier = w),
															(this._bufferService = k),
															(this._coreService = L),
															(this._mouseService = b),
															(this._optionsService = A),
															(this._renderService = M),
															(this._coreBrowserService = $),
															(this._dragScrollAmount = 0),
															(this._enabled = !0),
															(this._workCell = new t.CellData()),
															(this._mouseDownTimeStamp = 0),
															(this._oldHasSelection = !1),
															(this._oldSelectionStart = void 0),
															(this._oldSelectionEnd = void 0),
															(this._onLinuxMouseSelection = this.register(
																new h.EventEmitter(),
															)),
															(this.onLinuxMouseSelection =
																this._onLinuxMouseSelection.event),
															(this._onRedrawRequest = this.register(
																new h.EventEmitter(),
															)),
															(this.onRequestRedraw =
																this._onRedrawRequest.event),
															(this._onSelectionChange = this.register(
																new h.EventEmitter(),
															)),
															(this.onSelectionChange =
																this._onSelectionChange.event),
															(this._onRequestScrollLines = this.register(
																new h.EventEmitter(),
															)),
															(this.onRequestScrollLines =
																this._onRequestScrollLines.event),
															(this._mouseMoveListener = (V) =>
																this._handleMouseMove(V)),
															(this._mouseUpListener = (V) =>
																this._handleMouseUp(V)),
															this._coreService.onUserInput(() => {
																this.hasSelection && this.clearSelection();
															}),
															(this._trimListener =
																this._bufferService.buffer.lines.onTrim((V) =>
																	this._handleTrim(V),
																)),
															this.register(
																this._bufferService.buffers.onBufferActivate(
																	(V) => this._handleBufferActivate(V),
																),
															),
															this.enable(),
															(this._model = new p.SelectionModel(
																this._bufferService,
															)),
															(this._activeSelectionMode = 0),
															this.register(
																(0, s.toDisposable)(() => {
																	this._removeMouseDownListeners();
																}),
															));
													}
													reset() {
														this.clearSelection();
													}
													disable() {
														(this.clearSelection(), (this._enabled = !1));
													}
													enable() {
														this._enabled = !0;
													}
													get selectionStart() {
														return this._model.finalSelectionStart;
													}
													get selectionEnd() {
														return this._model.finalSelectionEnd;
													}
													get hasSelection() {
														const c = this._model.finalSelectionStart,
															m = this._model.finalSelectionEnd;
														return !(
															!c ||
															!m ||
															(c[0] === m[0] && c[1] === m[1])
														);
													}
													get selectionText() {
														const c = this._model.finalSelectionStart,
															m = this._model.finalSelectionEnd;
														if (!c || !m) return '';
														const w = this._bufferService.buffer,
															k = [];
														if (this._activeSelectionMode === 3) {
															if (c[0] === m[0]) return '';
															const L = c[0] < m[0] ? c[0] : m[0],
																b = c[0] < m[0] ? m[0] : c[0];
															for (let A = c[1]; A <= m[1]; A++) {
																const M = w.translateBufferLineToString(
																	A,
																	!0,
																	L,
																	b,
																);
																k.push(M);
															}
														} else {
															const L = c[1] === m[1] ? m[0] : void 0;
															k.push(
																w.translateBufferLineToString(
																	c[1],
																	!0,
																	c[0],
																	L,
																),
															);
															for (let b = c[1] + 1; b <= m[1] - 1; b++) {
																const A = w.lines.get(b),
																	M = w.translateBufferLineToString(b, !0);
																A != null && A.isWrapped
																	? (k[k.length - 1] += M)
																	: k.push(M);
															}
															if (c[1] !== m[1]) {
																const b = w.lines.get(m[1]),
																	A = w.translateBufferLineToString(
																		m[1],
																		!0,
																		0,
																		m[0],
																	);
																b && b.isWrapped
																	? (k[k.length - 1] += A)
																	: k.push(A);
															}
														}
														return k
															.map((L) => L.replace(u, ' '))
															.join(
																i.isWindows
																	? `\r
`
																	: `
`,
															);
													}
													clearSelection() {
														(this._model.clearSelection(),
															this._removeMouseDownListeners(),
															this.refresh(),
															this._onSelectionChange.fire());
													}
													refresh(c) {
														(this._refreshAnimationFrame ||
															(this._refreshAnimationFrame =
																this._coreBrowserService.window.requestAnimationFrame(
																	() => this._refresh(),
																)),
															i.isLinux &&
																c &&
																this.selectionText.length &&
																this._onLinuxMouseSelection.fire(
																	this.selectionText,
																));
													}
													_refresh() {
														((this._refreshAnimationFrame = void 0),
															this._onRedrawRequest.fire({
																start: this._model.finalSelectionStart,
																end: this._model.finalSelectionEnd,
																columnSelectMode:
																	this._activeSelectionMode === 3,
															}));
													}
													_isClickInSelection(c) {
														const m = this._getMouseBufferCoords(c),
															w = this._model.finalSelectionStart,
															k = this._model.finalSelectionEnd;
														return (
															!!(w && k && m) &&
															this._areCoordsInSelection(m, w, k)
														);
													}
													isCellInSelection(c, m) {
														const w = this._model.finalSelectionStart,
															k = this._model.finalSelectionEnd;
														return (
															!(!w || !k) &&
															this._areCoordsInSelection([c, m], w, k)
														);
													}
													_areCoordsInSelection(c, m, w) {
														return (
															(c[1] > m[1] && c[1] < w[1]) ||
															(m[1] === w[1] &&
																c[1] === m[1] &&
																c[0] >= m[0] &&
																c[0] < w[0]) ||
															(m[1] < w[1] && c[1] === w[1] && c[0] < w[0]) ||
															(m[1] < w[1] && c[1] === m[1] && c[0] >= m[0])
														);
													}
													_selectWordAtCursor(c, m) {
														var L, b;
														const w =
															(b =
																(L = this._linkifier.currentLink) == null
																	? void 0
																	: L.link) == null
																? void 0
																: b.range;
														if (w)
															return (
																(this._model.selectionStart = [
																	w.start.x - 1,
																	w.start.y - 1,
																]),
																(this._model.selectionStartLength = (0,
																e.getRangeLength)(w, this._bufferService.cols)),
																(this._model.selectionEnd = void 0),
																!0
															);
														const k = this._getMouseBufferCoords(c);
														return (
															!!k &&
															(this._selectWordAt(k, m),
															(this._model.selectionEnd = void 0),
															!0)
														);
													}
													selectAll() {
														((this._model.isSelectAllActive = !0),
															this.refresh(),
															this._onSelectionChange.fire());
													}
													selectLines(c, m) {
														(this._model.clearSelection(),
															(c = Math.max(c, 0)),
															(m = Math.min(
																m,
																this._bufferService.buffer.lines.length - 1,
															)),
															(this._model.selectionStart = [0, c]),
															(this._model.selectionEnd = [
																this._bufferService.cols,
																m,
															]),
															this.refresh(),
															this._onSelectionChange.fire());
													}
													_handleTrim(c) {
														this._model.handleTrim(c) && this.refresh();
													}
													_getMouseBufferCoords(c) {
														const m = this._mouseService.getCoords(
															c,
															this._screenElement,
															this._bufferService.cols,
															this._bufferService.rows,
															!0,
														);
														if (m)
															return (
																m[0]--,
																m[1]--,
																(m[1] += this._bufferService.buffer.ydisp),
																m
															);
													}
													_getMouseEventScrollAmount(c) {
														let m = (0, n.getCoordsRelativeToElement)(
															this._coreBrowserService.window,
															c,
															this._screenElement,
														)[1];
														const w =
															this._renderService.dimensions.css.canvas.height;
														return m >= 0 && m <= w
															? 0
															: (m > w && (m -= w),
																(m = Math.min(Math.max(m, -50), 50)),
																(m /= 50),
																m / Math.abs(m) + Math.round(14 * m));
													}
													shouldForceSelection(c) {
														return i.isMac
															? c.altKey &&
																	this._optionsService.rawOptions
																		.macOptionClickForcesSelection
															: c.shiftKey;
													}
													handleMouseDown(c) {
														if (
															((this._mouseDownTimeStamp = c.timeStamp),
															(c.button !== 2 || !this.hasSelection) &&
																c.button === 0)
														) {
															if (!this._enabled) {
																if (!this.shouldForceSelection(c)) return;
																c.stopPropagation();
															}
															(c.preventDefault(),
																(this._dragScrollAmount = 0),
																this._enabled && c.shiftKey
																	? this._handleIncrementalClick(c)
																	: c.detail === 1
																		? this._handleSingleClick(c)
																		: c.detail === 2
																			? this._handleDoubleClick(c)
																			: c.detail === 3 &&
																				this._handleTripleClick(c),
																this._addMouseDownListeners(),
																this.refresh(!0));
														}
													}
													_addMouseDownListeners() {
														(this._screenElement.ownerDocument &&
															(this._screenElement.ownerDocument.addEventListener(
																'mousemove',
																this._mouseMoveListener,
															),
															this._screenElement.ownerDocument.addEventListener(
																'mouseup',
																this._mouseUpListener,
															)),
															(this._dragScrollIntervalTimer =
																this._coreBrowserService.window.setInterval(
																	() => this._dragScroll(),
																	50,
																)));
													}
													_removeMouseDownListeners() {
														(this._screenElement.ownerDocument &&
															(this._screenElement.ownerDocument.removeEventListener(
																'mousemove',
																this._mouseMoveListener,
															),
															this._screenElement.ownerDocument.removeEventListener(
																'mouseup',
																this._mouseUpListener,
															)),
															this._coreBrowserService.window.clearInterval(
																this._dragScrollIntervalTimer,
															),
															(this._dragScrollIntervalTimer = void 0));
													}
													_handleIncrementalClick(c) {
														this._model.selectionStart &&
															(this._model.selectionEnd =
																this._getMouseBufferCoords(c));
													}
													_handleSingleClick(c) {
														if (
															((this._model.selectionStartLength = 0),
															(this._model.isSelectAllActive = !1),
															(this._activeSelectionMode =
																this.shouldColumnSelect(c) ? 3 : 0),
															(this._model.selectionStart =
																this._getMouseBufferCoords(c)),
															!this._model.selectionStart)
														)
															return;
														this._model.selectionEnd = void 0;
														const m = this._bufferService.buffer.lines.get(
															this._model.selectionStart[1],
														);
														m &&
															m.length !== this._model.selectionStart[0] &&
															m.hasWidth(this._model.selectionStart[0]) === 0 &&
															this._model.selectionStart[0]++;
													}
													_handleDoubleClick(c) {
														this._selectWordAtCursor(c, !0) &&
															(this._activeSelectionMode = 1);
													}
													_handleTripleClick(c) {
														const m = this._getMouseBufferCoords(c);
														m &&
															((this._activeSelectionMode = 2),
															this._selectLineAt(m[1]));
													}
													shouldColumnSelect(c) {
														return (
															c.altKey &&
															!(
																i.isMac &&
																this._optionsService.rawOptions
																	.macOptionClickForcesSelection
															)
														);
													}
													_handleMouseMove(c) {
														if (
															(c.stopImmediatePropagation(),
															!this._model.selectionStart)
														)
															return;
														const m = this._model.selectionEnd
															? [
																	this._model.selectionEnd[0],
																	this._model.selectionEnd[1],
																]
															: null;
														if (
															((this._model.selectionEnd =
																this._getMouseBufferCoords(c)),
															!this._model.selectionEnd)
														)
															return void this.refresh(!0);
														(this._activeSelectionMode === 2
															? this._model.selectionEnd[1] <
																this._model.selectionStart[1]
																? (this._model.selectionEnd[0] = 0)
																: (this._model.selectionEnd[0] =
																		this._bufferService.cols)
															: this._activeSelectionMode === 1 &&
																this._selectToWordAt(this._model.selectionEnd),
															(this._dragScrollAmount =
																this._getMouseEventScrollAmount(c)),
															this._activeSelectionMode !== 3 &&
																(this._dragScrollAmount > 0
																	? (this._model.selectionEnd[0] =
																			this._bufferService.cols)
																	: this._dragScrollAmount < 0 &&
																		(this._model.selectionEnd[0] = 0)));
														const w = this._bufferService.buffer;
														if (this._model.selectionEnd[1] < w.lines.length) {
															const k = w.lines.get(
																this._model.selectionEnd[1],
															);
															k &&
																k.hasWidth(this._model.selectionEnd[0]) === 0 &&
																this._model.selectionEnd[0] <
																	this._bufferService.cols &&
																this._model.selectionEnd[0]++;
														}
														(m &&
															m[0] === this._model.selectionEnd[0] &&
															m[1] === this._model.selectionEnd[1]) ||
															this.refresh(!0);
													}
													_dragScroll() {
														if (
															this._model.selectionEnd &&
															this._model.selectionStart &&
															this._dragScrollAmount
														) {
															this._onRequestScrollLines.fire({
																amount: this._dragScrollAmount,
																suppressScrollEvent: !1,
															});
															const c = this._bufferService.buffer;
															(this._dragScrollAmount > 0
																? (this._activeSelectionMode !== 3 &&
																		(this._model.selectionEnd[0] =
																			this._bufferService.cols),
																	(this._model.selectionEnd[1] = Math.min(
																		c.ydisp + this._bufferService.rows,
																		c.lines.length - 1,
																	)))
																: (this._activeSelectionMode !== 3 &&
																		(this._model.selectionEnd[0] = 0),
																	(this._model.selectionEnd[1] = c.ydisp)),
																this.refresh());
														}
													}
													_handleMouseUp(c) {
														const m = c.timeStamp - this._mouseDownTimeStamp;
														if (
															(this._removeMouseDownListeners(),
															this.selectionText.length <= 1 &&
																m < 500 &&
																c.altKey &&
																this._optionsService.rawOptions
																	.altClickMovesCursor)
														) {
															if (
																this._bufferService.buffer.ybase ===
																this._bufferService.buffer.ydisp
															) {
																const w = this._mouseService.getCoords(
																	c,
																	this._element,
																	this._bufferService.cols,
																	this._bufferService.rows,
																	!1,
																);
																if (w && w[0] !== void 0 && w[1] !== void 0) {
																	const k = (0, d.moveToCellSequence)(
																		w[0] - 1,
																		w[1] - 1,
																		this._bufferService,
																		this._coreService.decPrivateModes
																			.applicationCursorKeys,
																	);
																	this._coreService.triggerDataEvent(k, !0);
																}
															}
														} else this._fireEventIfSelectionChanged();
													}
													_fireEventIfSelectionChanged() {
														const c = this._model.finalSelectionStart,
															m = this._model.finalSelectionEnd,
															w = !(
																!c ||
																!m ||
																(c[0] === m[0] && c[1] === m[1])
															);
														w
															? c &&
																m &&
																((this._oldSelectionStart &&
																	this._oldSelectionEnd &&
																	c[0] === this._oldSelectionStart[0] &&
																	c[1] === this._oldSelectionStart[1] &&
																	m[0] === this._oldSelectionEnd[0] &&
																	m[1] === this._oldSelectionEnd[1]) ||
																	this._fireOnSelectionChange(c, m, w))
															: this._oldHasSelection &&
																this._fireOnSelectionChange(c, m, w);
													}
													_fireOnSelectionChange(c, m, w) {
														((this._oldSelectionStart = c),
															(this._oldSelectionEnd = m),
															(this._oldHasSelection = w),
															this._onSelectionChange.fire());
													}
													_handleBufferActivate(c) {
														(this.clearSelection(),
															this._trimListener.dispose(),
															(this._trimListener = c.activeBuffer.lines.onTrim(
																(m) => this._handleTrim(m),
															)));
													}
													_convertViewportColToCharacterIndex(c, m) {
														let w = m;
														for (let k = 0; m >= k; k++) {
															const L = c
																.loadCell(k, this._workCell)
																.getChars().length;
															this._workCell.getWidth() === 0
																? w--
																: L > 1 && m !== k && (w += L - 1);
														}
														return w;
													}
													setSelection(c, m, w) {
														(this._model.clearSelection(),
															this._removeMouseDownListeners(),
															(this._model.selectionStart = [c, m]),
															(this._model.selectionStartLength = w),
															this.refresh(),
															this._fireEventIfSelectionChanged());
													}
													rightClickSelect(c) {
														this._isClickInSelection(c) ||
															(this._selectWordAtCursor(c, !1) &&
																this.refresh(!0),
															this._fireEventIfSelectionChanged());
													}
													_getWordAt(c, m, w = !0, k = !0) {
														if (c[0] >= this._bufferService.cols) return;
														const L = this._bufferService.buffer,
															b = L.lines.get(c[1]);
														if (!b) return;
														const A = L.translateBufferLineToString(c[1], !1);
														let M = this._convertViewportColToCharacterIndex(
																b,
																c[0],
															),
															$ = M;
														const V = c[0] - M;
														let j = 0,
															S = 0,
															y = 0,
															E = 0;
														if (A.charAt(M) === ' ') {
															for (; M > 0 && A.charAt(M - 1) === ' '; ) M--;
															for (; $ < A.length && A.charAt($ + 1) === ' '; )
																$++;
														} else {
															let z = c[0],
																J = c[0];
															(b.getWidth(z) === 0 && (j++, z--),
																b.getWidth(J) === 2 && (S++, J++));
															const Y = b.getString(J).length;
															for (
																Y > 1 && ((E += Y - 1), ($ += Y - 1));
																z > 0 &&
																M > 0 &&
																!this._isCharWordSeparator(
																	b.loadCell(z - 1, this._workCell),
																);

															) {
																b.loadCell(z - 1, this._workCell);
																const D = this._workCell.getChars().length;
																(this._workCell.getWidth() === 0
																	? (j++, z--)
																	: D > 1 && ((y += D - 1), (M -= D - 1)),
																	M--,
																	z--);
															}
															for (
																;
																J < b.length &&
																$ + 1 < A.length &&
																!this._isCharWordSeparator(
																	b.loadCell(J + 1, this._workCell),
																);

															) {
																b.loadCell(J + 1, this._workCell);
																const D = this._workCell.getChars().length;
																(this._workCell.getWidth() === 2
																	? (S++, J++)
																	: D > 1 && ((E += D - 1), ($ += D - 1)),
																	$++,
																	J++);
															}
														}
														$++;
														let x = M + V - j + y,
															W = Math.min(
																this._bufferService.cols,
																$ - M + j + S - y - E,
															);
														if (m || A.slice(M, $).trim() !== '') {
															if (w && x === 0 && b.getCodePoint(0) !== 32) {
																const z = L.lines.get(c[1] - 1);
																if (
																	z &&
																	b.isWrapped &&
																	z.getCodePoint(
																		this._bufferService.cols - 1,
																	) !== 32
																) {
																	const J = this._getWordAt(
																		[this._bufferService.cols - 1, c[1] - 1],
																		!1,
																		!0,
																		!1,
																	);
																	if (J) {
																		const Y =
																			this._bufferService.cols - J.start;
																		((x -= Y), (W += Y));
																	}
																}
															}
															if (
																k &&
																x + W === this._bufferService.cols &&
																b.getCodePoint(this._bufferService.cols - 1) !==
																	32
															) {
																const z = L.lines.get(c[1] + 1);
																if (
																	z != null &&
																	z.isWrapped &&
																	z.getCodePoint(0) !== 32
																) {
																	const J = this._getWordAt(
																		[0, c[1] + 1],
																		!1,
																		!1,
																		!0,
																	);
																	J && (W += J.length);
																}
															}
															return { start: x, length: W };
														}
													}
													_selectWordAt(c, m) {
														const w = this._getWordAt(c, m);
														if (w) {
															for (; w.start < 0; )
																((w.start += this._bufferService.cols), c[1]--);
															((this._model.selectionStart = [w.start, c[1]]),
																(this._model.selectionStartLength = w.length));
														}
													}
													_selectToWordAt(c) {
														const m = this._getWordAt(c, !0);
														if (m) {
															let w = c[1];
															for (; m.start < 0; )
																((m.start += this._bufferService.cols), w--);
															if (!this._model.areSelectionValuesReversed())
																for (
																	;
																	m.start + m.length > this._bufferService.cols;

																)
																	((m.length -= this._bufferService.cols), w++);
															this._model.selectionEnd = [
																this._model.areSelectionValuesReversed()
																	? m.start
																	: m.start + m.length,
																w,
															];
														}
													}
													_isCharWordSeparator(c) {
														return (
															c.getWidth() !== 0 &&
															this._optionsService.rawOptions.wordSeparator.indexOf(
																c.getChars(),
															) >= 0
														);
													}
													_selectLineAt(c) {
														const m =
																this._bufferService.buffer.getWrappedRangeForLine(
																	c,
																),
															w = {
																start: { x: 0, y: m.first },
																end: {
																	x: this._bufferService.cols - 1,
																	y: m.last,
																},
															};
														((this._model.selectionStart = [0, m.first]),
															(this._model.selectionEnd = void 0),
															(this._model.selectionStartLength = (0,
															e.getRangeLength)(w, this._bufferService.cols)));
													}
												});
												r.SelectionService = v = l(
													[
														_(3, o.IBufferService),
														_(4, o.ICoreService),
														_(5, g.IMouseService),
														_(6, o.IOptionsService),
														_(7, g.IRenderService),
														_(8, g.ICoreBrowserService),
													],
													v,
												);
											},
											4725: (I, r, a) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.ILinkProviderService =
														r.IThemeService =
														r.ICharacterJoinerService =
														r.ISelectionService =
														r.IRenderService =
														r.IMouseService =
														r.ICoreBrowserService =
														r.ICharSizeService =
															void 0));
												const l = a(8343);
												((r.ICharSizeService = (0, l.createDecorator)(
													'CharSizeService',
												)),
													(r.ICoreBrowserService = (0, l.createDecorator)(
														'CoreBrowserService',
													)),
													(r.IMouseService = (0, l.createDecorator)(
														'MouseService',
													)),
													(r.IRenderService = (0, l.createDecorator)(
														'RenderService',
													)),
													(r.ISelectionService = (0, l.createDecorator)(
														'SelectionService',
													)),
													(r.ICharacterJoinerService = (0, l.createDecorator)(
														'CharacterJoinerService',
													)),
													(r.IThemeService = (0, l.createDecorator)(
														'ThemeService',
													)),
													(r.ILinkProviderService = (0, l.createDecorator)(
														'LinkProviderService',
													)));
											},
											6731: function (I, r, a) {
												var l =
														(this && this.__decorate) ||
														function (v, c, m, w) {
															var k,
																L = arguments.length,
																b =
																	L < 3
																		? c
																		: w === null
																			? (w = Object.getOwnPropertyDescriptor(
																					c,
																					m,
																				))
																			: w;
															if (
																typeof Reflect == 'object' &&
																typeof Reflect.decorate == 'function'
															)
																b = Reflect.decorate(v, c, m, w);
															else
																for (var A = v.length - 1; A >= 0; A--)
																	(k = v[A]) &&
																		(b =
																			(L < 3
																				? k(b)
																				: L > 3
																					? k(c, m, b)
																					: k(c, m)) || b);
															return (
																L > 3 && b && Object.defineProperty(c, m, b),
																b
															);
														},
													_ =
														(this && this.__param) ||
														function (v, c) {
															return function (m, w) {
																c(m, w, v);
															};
														};
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.ThemeService = r.DEFAULT_ANSI_COLORS = void 0));
												const n = a(7239),
													d = a(8055),
													p = a(8460),
													g = a(844),
													h = a(2585),
													s = d.css.toColor('#ffffff'),
													i = d.css.toColor('#000000'),
													e = d.css.toColor('#ffffff'),
													t = d.css.toColor('#000000'),
													o = {
														css: 'rgba(255, 255, 255, 0.3)',
														rgba: 4294967117,
													};
												r.DEFAULT_ANSI_COLORS = Object.freeze(
													(() => {
														const v = [
																d.css.toColor('#2e3436'),
																d.css.toColor('#cc0000'),
																d.css.toColor('#4e9a06'),
																d.css.toColor('#c4a000'),
																d.css.toColor('#3465a4'),
																d.css.toColor('#75507b'),
																d.css.toColor('#06989a'),
																d.css.toColor('#d3d7cf'),
																d.css.toColor('#555753'),
																d.css.toColor('#ef2929'),
																d.css.toColor('#8ae234'),
																d.css.toColor('#fce94f'),
																d.css.toColor('#729fcf'),
																d.css.toColor('#ad7fa8'),
																d.css.toColor('#34e2e2'),
																d.css.toColor('#eeeeec'),
															],
															c = [0, 95, 135, 175, 215, 255];
														for (let m = 0; m < 216; m++) {
															const w = c[(m / 36) % 6 | 0],
																k = c[(m / 6) % 6 | 0],
																L = c[m % 6];
															v.push({
																css: d.channels.toCss(w, k, L),
																rgba: d.channels.toRgba(w, k, L),
															});
														}
														for (let m = 0; m < 24; m++) {
															const w = 8 + 10 * m;
															v.push({
																css: d.channels.toCss(w, w, w),
																rgba: d.channels.toRgba(w, w, w),
															});
														}
														return v;
													})(),
												);
												let f = (r.ThemeService = class extends g.Disposable {
													get colors() {
														return this._colors;
													}
													constructor(v) {
														(super(),
															(this._optionsService = v),
															(this._contrastCache =
																new n.ColorContrastCache()),
															(this._halfContrastCache =
																new n.ColorContrastCache()),
															(this._onChangeColors = this.register(
																new p.EventEmitter(),
															)),
															(this.onChangeColors =
																this._onChangeColors.event),
															(this._colors = {
																foreground: s,
																background: i,
																cursor: e,
																cursorAccent: t,
																selectionForeground: void 0,
																selectionBackgroundTransparent: o,
																selectionBackgroundOpaque: d.color.blend(i, o),
																selectionInactiveBackgroundTransparent: o,
																selectionInactiveBackgroundOpaque:
																	d.color.blend(i, o),
																ansi: r.DEFAULT_ANSI_COLORS.slice(),
																contrastCache: this._contrastCache,
																halfContrastCache: this._halfContrastCache,
															}),
															this._updateRestoreColors(),
															this._setTheme(
																this._optionsService.rawOptions.theme,
															),
															this.register(
																this._optionsService.onSpecificOptionChange(
																	'minimumContrastRatio',
																	() => this._contrastCache.clear(),
																),
															),
															this.register(
																this._optionsService.onSpecificOptionChange(
																	'theme',
																	() =>
																		this._setTheme(
																			this._optionsService.rawOptions.theme,
																		),
																),
															));
													}
													_setTheme(v = {}) {
														const c = this._colors;
														if (
															((c.foreground = u(v.foreground, s)),
															(c.background = u(v.background, i)),
															(c.cursor = u(v.cursor, e)),
															(c.cursorAccent = u(v.cursorAccent, t)),
															(c.selectionBackgroundTransparent = u(
																v.selectionBackground,
																o,
															)),
															(c.selectionBackgroundOpaque = d.color.blend(
																c.background,
																c.selectionBackgroundTransparent,
															)),
															(c.selectionInactiveBackgroundTransparent = u(
																v.selectionInactiveBackground,
																c.selectionBackgroundTransparent,
															)),
															(c.selectionInactiveBackgroundOpaque =
																d.color.blend(
																	c.background,
																	c.selectionInactiveBackgroundTransparent,
																)),
															(c.selectionForeground = v.selectionForeground
																? u(v.selectionForeground, d.NULL_COLOR)
																: void 0),
															c.selectionForeground === d.NULL_COLOR &&
																(c.selectionForeground = void 0),
															d.color.isOpaque(
																c.selectionBackgroundTransparent,
															) &&
																(c.selectionBackgroundTransparent =
																	d.color.opacity(
																		c.selectionBackgroundTransparent,
																		0.3,
																	)),
															d.color.isOpaque(
																c.selectionInactiveBackgroundTransparent,
															) &&
																(c.selectionInactiveBackgroundTransparent =
																	d.color.opacity(
																		c.selectionInactiveBackgroundTransparent,
																		0.3,
																	)),
															(c.ansi = r.DEFAULT_ANSI_COLORS.slice()),
															(c.ansi[0] = u(
																v.black,
																r.DEFAULT_ANSI_COLORS[0],
															)),
															(c.ansi[1] = u(v.red, r.DEFAULT_ANSI_COLORS[1])),
															(c.ansi[2] = u(
																v.green,
																r.DEFAULT_ANSI_COLORS[2],
															)),
															(c.ansi[3] = u(
																v.yellow,
																r.DEFAULT_ANSI_COLORS[3],
															)),
															(c.ansi[4] = u(v.blue, r.DEFAULT_ANSI_COLORS[4])),
															(c.ansi[5] = u(
																v.magenta,
																r.DEFAULT_ANSI_COLORS[5],
															)),
															(c.ansi[6] = u(v.cyan, r.DEFAULT_ANSI_COLORS[6])),
															(c.ansi[7] = u(
																v.white,
																r.DEFAULT_ANSI_COLORS[7],
															)),
															(c.ansi[8] = u(
																v.brightBlack,
																r.DEFAULT_ANSI_COLORS[8],
															)),
															(c.ansi[9] = u(
																v.brightRed,
																r.DEFAULT_ANSI_COLORS[9],
															)),
															(c.ansi[10] = u(
																v.brightGreen,
																r.DEFAULT_ANSI_COLORS[10],
															)),
															(c.ansi[11] = u(
																v.brightYellow,
																r.DEFAULT_ANSI_COLORS[11],
															)),
															(c.ansi[12] = u(
																v.brightBlue,
																r.DEFAULT_ANSI_COLORS[12],
															)),
															(c.ansi[13] = u(
																v.brightMagenta,
																r.DEFAULT_ANSI_COLORS[13],
															)),
															(c.ansi[14] = u(
																v.brightCyan,
																r.DEFAULT_ANSI_COLORS[14],
															)),
															(c.ansi[15] = u(
																v.brightWhite,
																r.DEFAULT_ANSI_COLORS[15],
															)),
															v.extendedAnsi)
														) {
															const m = Math.min(
																c.ansi.length - 16,
																v.extendedAnsi.length,
															);
															for (let w = 0; w < m; w++)
																c.ansi[w + 16] = u(
																	v.extendedAnsi[w],
																	r.DEFAULT_ANSI_COLORS[w + 16],
																);
														}
														(this._contrastCache.clear(),
															this._halfContrastCache.clear(),
															this._updateRestoreColors(),
															this._onChangeColors.fire(this.colors));
													}
													restoreColor(v) {
														(this._restoreColor(v),
															this._onChangeColors.fire(this.colors));
													}
													_restoreColor(v) {
														if (v !== void 0)
															switch (v) {
																case 256:
																	this._colors.foreground =
																		this._restoreColors.foreground;
																	break;
																case 257:
																	this._colors.background =
																		this._restoreColors.background;
																	break;
																case 258:
																	this._colors.cursor =
																		this._restoreColors.cursor;
																	break;
																default:
																	this._colors.ansi[v] =
																		this._restoreColors.ansi[v];
															}
														else
															for (
																let c = 0;
																c < this._restoreColors.ansi.length;
																++c
															)
																this._colors.ansi[c] =
																	this._restoreColors.ansi[c];
													}
													modifyColors(v) {
														(v(this._colors),
															this._onChangeColors.fire(this.colors));
													}
													_updateRestoreColors() {
														this._restoreColors = {
															foreground: this._colors.foreground,
															background: this._colors.background,
															cursor: this._colors.cursor,
															ansi: this._colors.ansi.slice(),
														};
													}
												});
												function u(v, c) {
													if (v !== void 0)
														try {
															return d.css.toColor(v);
														} catch {}
													return c;
												}
												r.ThemeService = f = l([_(0, h.IOptionsService)], f);
											},
											6349: (I, r, a) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.CircularList = void 0));
												const l = a(8460),
													_ = a(844);
												class n extends _.Disposable {
													constructor(p) {
														(super(),
															(this._maxLength = p),
															(this.onDeleteEmitter = this.register(
																new l.EventEmitter(),
															)),
															(this.onDelete = this.onDeleteEmitter.event),
															(this.onInsertEmitter = this.register(
																new l.EventEmitter(),
															)),
															(this.onInsert = this.onInsertEmitter.event),
															(this.onTrimEmitter = this.register(
																new l.EventEmitter(),
															)),
															(this.onTrim = this.onTrimEmitter.event),
															(this._array = new Array(this._maxLength)),
															(this._startIndex = 0),
															(this._length = 0));
													}
													get maxLength() {
														return this._maxLength;
													}
													set maxLength(p) {
														if (this._maxLength === p) return;
														const g = new Array(p);
														for (let h = 0; h < Math.min(p, this.length); h++)
															g[h] = this._array[this._getCyclicIndex(h)];
														((this._array = g),
															(this._maxLength = p),
															(this._startIndex = 0));
													}
													get length() {
														return this._length;
													}
													set length(p) {
														if (p > this._length)
															for (let g = this._length; g < p; g++)
																this._array[g] = void 0;
														this._length = p;
													}
													get(p) {
														return this._array[this._getCyclicIndex(p)];
													}
													set(p, g) {
														this._array[this._getCyclicIndex(p)] = g;
													}
													push(p) {
														((this._array[this._getCyclicIndex(this._length)] =
															p),
															this._length === this._maxLength
																? ((this._startIndex =
																		++this._startIndex % this._maxLength),
																	this.onTrimEmitter.fire(1))
																: this._length++);
													}
													recycle() {
														if (this._length !== this._maxLength)
															throw new Error(
																'Can only recycle when the buffer is full',
															);
														return (
															(this._startIndex =
																++this._startIndex % this._maxLength),
															this.onTrimEmitter.fire(1),
															this._array[
																this._getCyclicIndex(this._length - 1)
															]
														);
													}
													get isFull() {
														return this._length === this._maxLength;
													}
													pop() {
														return this._array[
															this._getCyclicIndex(this._length-- - 1)
														];
													}
													splice(p, g, ...h) {
														if (g) {
															for (let s = p; s < this._length - g; s++)
																this._array[this._getCyclicIndex(s)] =
																	this._array[this._getCyclicIndex(s + g)];
															((this._length -= g),
																this.onDeleteEmitter.fire({
																	index: p,
																	amount: g,
																}));
														}
														for (let s = this._length - 1; s >= p; s--)
															this._array[this._getCyclicIndex(s + h.length)] =
																this._array[this._getCyclicIndex(s)];
														for (let s = 0; s < h.length; s++)
															this._array[this._getCyclicIndex(p + s)] = h[s];
														if (
															(h.length &&
																this.onInsertEmitter.fire({
																	index: p,
																	amount: h.length,
																}),
															this._length + h.length > this._maxLength)
														) {
															const s =
																this._length + h.length - this._maxLength;
															((this._startIndex += s),
																(this._length = this._maxLength),
																this.onTrimEmitter.fire(s));
														} else this._length += h.length;
													}
													trimStart(p) {
														(p > this._length && (p = this._length),
															(this._startIndex += p),
															(this._length -= p),
															this.onTrimEmitter.fire(p));
													}
													shiftElements(p, g, h) {
														if (!(g <= 0)) {
															if (p < 0 || p >= this._length)
																throw new Error('start argument out of range');
															if (p + h < 0)
																throw new Error(
																	'Cannot shift elements in list beyond index 0',
																);
															if (h > 0) {
																for (let i = g - 1; i >= 0; i--)
																	this.set(p + i + h, this.get(p + i));
																const s = p + g + h - this._length;
																if (s > 0)
																	for (
																		this._length += s;
																		this._length > this._maxLength;

																	)
																		(this._length--,
																			this._startIndex++,
																			this.onTrimEmitter.fire(1));
															} else
																for (let s = 0; s < g; s++)
																	this.set(p + s + h, this.get(p + s));
														}
													}
													_getCyclicIndex(p) {
														return (this._startIndex + p) % this._maxLength;
													}
												}
												r.CircularList = n;
											},
											1439: (I, r) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.clone = void 0),
													(r.clone = function a(l, _ = 5) {
														if (typeof l != 'object') return l;
														const n = Array.isArray(l) ? [] : {};
														for (const d in l)
															n[d] = _ <= 1 ? l[d] : l[d] && a(l[d], _ - 1);
														return n;
													}));
											},
											8055: (I, r) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.contrastRatio =
														r.toPaddedHex =
														r.rgba =
														r.rgb =
														r.css =
														r.color =
														r.channels =
														r.NULL_COLOR =
															void 0));
												let a = 0,
													l = 0,
													_ = 0,
													n = 0;
												var d, p, g, h, s;
												function i(t) {
													const o = t.toString(16);
													return o.length < 2 ? '0' + o : o;
												}
												function e(t, o) {
													return t < o
														? (o + 0.05) / (t + 0.05)
														: (t + 0.05) / (o + 0.05);
												}
												((r.NULL_COLOR = { css: '#00000000', rgba: 0 }),
													(function (t) {
														((t.toCss = function (o, f, u, v) {
															return v !== void 0
																? `#${i(o)}${i(f)}${i(u)}${i(v)}`
																: `#${i(o)}${i(f)}${i(u)}`;
														}),
															(t.toRgba = function (o, f, u, v = 255) {
																return (
																	((o << 24) | (f << 16) | (u << 8) | v) >>> 0
																);
															}),
															(t.toColor = function (o, f, u, v) {
																return {
																	css: t.toCss(o, f, u, v),
																	rgba: t.toRgba(o, f, u, v),
																};
															}));
													})(d || (r.channels = d = {})),
													(function (t) {
														function o(f, u) {
															return (
																(n = Math.round(255 * u)),
																([a, l, _] = s.toChannels(f.rgba)),
																{
																	css: d.toCss(a, l, _, n),
																	rgba: d.toRgba(a, l, _, n),
																}
															);
														}
														((t.blend = function (f, u) {
															if (((n = (255 & u.rgba) / 255), n === 1))
																return { css: u.css, rgba: u.rgba };
															const v = (u.rgba >> 24) & 255,
																c = (u.rgba >> 16) & 255,
																m = (u.rgba >> 8) & 255,
																w = (f.rgba >> 24) & 255,
																k = (f.rgba >> 16) & 255,
																L = (f.rgba >> 8) & 255;
															return (
																(a = w + Math.round((v - w) * n)),
																(l = k + Math.round((c - k) * n)),
																(_ = L + Math.round((m - L) * n)),
																{
																	css: d.toCss(a, l, _),
																	rgba: d.toRgba(a, l, _),
																}
															);
														}),
															(t.isOpaque = function (f) {
																return (255 & f.rgba) == 255;
															}),
															(t.ensureContrastRatio = function (f, u, v) {
																const c = s.ensureContrastRatio(
																	f.rgba,
																	u.rgba,
																	v,
																);
																if (c)
																	return d.toColor(
																		(c >> 24) & 255,
																		(c >> 16) & 255,
																		(c >> 8) & 255,
																	);
															}),
															(t.opaque = function (f) {
																const u = (255 | f.rgba) >>> 0;
																return (
																	([a, l, _] = s.toChannels(u)),
																	{ css: d.toCss(a, l, _), rgba: u }
																);
															}),
															(t.opacity = o),
															(t.multiplyOpacity = function (f, u) {
																return (
																	(n = 255 & f.rgba),
																	o(f, (n * u) / 255)
																);
															}),
															(t.toColorRGB = function (f) {
																return [
																	(f.rgba >> 24) & 255,
																	(f.rgba >> 16) & 255,
																	(f.rgba >> 8) & 255,
																];
															}));
													})(p || (r.color = p = {})),
													(function (t) {
														let o, f;
														try {
															const u = document.createElement('canvas');
															((u.width = 1), (u.height = 1));
															const v = u.getContext('2d', {
																willReadFrequently: !0,
															});
															v &&
																((o = v),
																(o.globalCompositeOperation = 'copy'),
																(f = o.createLinearGradient(0, 0, 1, 1)));
														} catch {}
														t.toColor = function (u) {
															if (u.match(/#[\da-f]{3,8}/i))
																switch (u.length) {
																	case 4:
																		return (
																			(a = parseInt(
																				u.slice(1, 2).repeat(2),
																				16,
																			)),
																			(l = parseInt(
																				u.slice(2, 3).repeat(2),
																				16,
																			)),
																			(_ = parseInt(
																				u.slice(3, 4).repeat(2),
																				16,
																			)),
																			d.toColor(a, l, _)
																		);
																	case 5:
																		return (
																			(a = parseInt(
																				u.slice(1, 2).repeat(2),
																				16,
																			)),
																			(l = parseInt(
																				u.slice(2, 3).repeat(2),
																				16,
																			)),
																			(_ = parseInt(
																				u.slice(3, 4).repeat(2),
																				16,
																			)),
																			(n = parseInt(
																				u.slice(4, 5).repeat(2),
																				16,
																			)),
																			d.toColor(a, l, _, n)
																		);
																	case 7:
																		return {
																			css: u,
																			rgba:
																				((parseInt(u.slice(1), 16) << 8) |
																					255) >>>
																				0,
																		};
																	case 9:
																		return {
																			css: u,
																			rgba: parseInt(u.slice(1), 16) >>> 0,
																		};
																}
															const v = u.match(
																/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/,
															);
															if (v)
																return (
																	(a = parseInt(v[1])),
																	(l = parseInt(v[2])),
																	(_ = parseInt(v[3])),
																	(n = Math.round(
																		255 *
																			(v[5] === void 0 ? 1 : parseFloat(v[5])),
																	)),
																	d.toColor(a, l, _, n)
																);
															if (!o || !f)
																throw new Error(
																	'css.toColor: Unsupported css format',
																);
															if (
																((o.fillStyle = f),
																(o.fillStyle = u),
																typeof o.fillStyle != 'string')
															)
																throw new Error(
																	'css.toColor: Unsupported css format',
																);
															if (
																(o.fillRect(0, 0, 1, 1),
																([a, l, _, n] = o.getImageData(
																	0,
																	0,
																	1,
																	1,
																).data),
																n !== 255)
															)
																throw new Error(
																	'css.toColor: Unsupported css format',
																);
															return { rgba: d.toRgba(a, l, _, n), css: u };
														};
													})(g || (r.css = g = {})),
													(function (t) {
														function o(f, u, v) {
															const c = f / 255,
																m = u / 255,
																w = v / 255;
															return (
																0.2126 *
																	(c <= 0.03928
																		? c / 12.92
																		: Math.pow((c + 0.055) / 1.055, 2.4)) +
																0.7152 *
																	(m <= 0.03928
																		? m / 12.92
																		: Math.pow((m + 0.055) / 1.055, 2.4)) +
																0.0722 *
																	(w <= 0.03928
																		? w / 12.92
																		: Math.pow((w + 0.055) / 1.055, 2.4))
															);
														}
														((t.relativeLuminance = function (f) {
															return o(
																(f >> 16) & 255,
																(f >> 8) & 255,
																255 & f,
															);
														}),
															(t.relativeLuminance2 = o));
													})(h || (r.rgb = h = {})),
													(function (t) {
														function o(u, v, c) {
															const m = (u >> 24) & 255,
																w = (u >> 16) & 255,
																k = (u >> 8) & 255;
															let L = (v >> 24) & 255,
																b = (v >> 16) & 255,
																A = (v >> 8) & 255,
																M = e(
																	h.relativeLuminance2(L, b, A),
																	h.relativeLuminance2(m, w, k),
																);
															for (; M < c && (L > 0 || b > 0 || A > 0); )
																((L -= Math.max(0, Math.ceil(0.1 * L))),
																	(b -= Math.max(0, Math.ceil(0.1 * b))),
																	(A -= Math.max(0, Math.ceil(0.1 * A))),
																	(M = e(
																		h.relativeLuminance2(L, b, A),
																		h.relativeLuminance2(m, w, k),
																	)));
															return (
																((L << 24) | (b << 16) | (A << 8) | 255) >>> 0
															);
														}
														function f(u, v, c) {
															const m = (u >> 24) & 255,
																w = (u >> 16) & 255,
																k = (u >> 8) & 255;
															let L = (v >> 24) & 255,
																b = (v >> 16) & 255,
																A = (v >> 8) & 255,
																M = e(
																	h.relativeLuminance2(L, b, A),
																	h.relativeLuminance2(m, w, k),
																);
															for (; M < c && (L < 255 || b < 255 || A < 255); )
																((L = Math.min(
																	255,
																	L + Math.ceil(0.1 * (255 - L)),
																)),
																	(b = Math.min(
																		255,
																		b + Math.ceil(0.1 * (255 - b)),
																	)),
																	(A = Math.min(
																		255,
																		A + Math.ceil(0.1 * (255 - A)),
																	)),
																	(M = e(
																		h.relativeLuminance2(L, b, A),
																		h.relativeLuminance2(m, w, k),
																	)));
															return (
																((L << 24) | (b << 16) | (A << 8) | 255) >>> 0
															);
														}
														((t.blend = function (u, v) {
															if (((n = (255 & v) / 255), n === 1)) return v;
															const c = (v >> 24) & 255,
																m = (v >> 16) & 255,
																w = (v >> 8) & 255,
																k = (u >> 24) & 255,
																L = (u >> 16) & 255,
																b = (u >> 8) & 255;
															return (
																(a = k + Math.round((c - k) * n)),
																(l = L + Math.round((m - L) * n)),
																(_ = b + Math.round((w - b) * n)),
																d.toRgba(a, l, _)
															);
														}),
															(t.ensureContrastRatio = function (u, v, c) {
																const m = h.relativeLuminance(u >> 8),
																	w = h.relativeLuminance(v >> 8);
																if (e(m, w) < c) {
																	if (w < m) {
																		const b = o(u, v, c),
																			A = e(m, h.relativeLuminance(b >> 8));
																		if (A < c) {
																			const M = f(u, v, c);
																			return A >
																				e(m, h.relativeLuminance(M >> 8))
																				? b
																				: M;
																		}
																		return b;
																	}
																	const k = f(u, v, c),
																		L = e(m, h.relativeLuminance(k >> 8));
																	if (L < c) {
																		const b = o(u, v, c);
																		return L > e(m, h.relativeLuminance(b >> 8))
																			? k
																			: b;
																	}
																	return k;
																}
															}),
															(t.reduceLuminance = o),
															(t.increaseLuminance = f),
															(t.toChannels = function (u) {
																return [
																	(u >> 24) & 255,
																	(u >> 16) & 255,
																	(u >> 8) & 255,
																	255 & u,
																];
															}));
													})(s || (r.rgba = s = {})),
													(r.toPaddedHex = i),
													(r.contrastRatio = e));
											},
											8969: (I, r, a) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.CoreTerminal = void 0));
												const l = a(844),
													_ = a(2585),
													n = a(4348),
													d = a(7866),
													p = a(744),
													g = a(7302),
													h = a(6975),
													s = a(8460),
													i = a(1753),
													e = a(1480),
													t = a(7994),
													o = a(9282),
													f = a(5435),
													u = a(5981),
													v = a(2660);
												let c = !1;
												class m extends l.Disposable {
													get onScroll() {
														return (
															this._onScrollApi ||
																((this._onScrollApi = this.register(
																	new s.EventEmitter(),
																)),
																this._onScroll.event((k) => {
																	var L;
																	(L = this._onScrollApi) == null ||
																		L.fire(k.position);
																})),
															this._onScrollApi.event
														);
													}
													get cols() {
														return this._bufferService.cols;
													}
													get rows() {
														return this._bufferService.rows;
													}
													get buffers() {
														return this._bufferService.buffers;
													}
													get options() {
														return this.optionsService.options;
													}
													set options(k) {
														for (const L in k)
															this.optionsService.options[L] = k[L];
													}
													constructor(k) {
														(super(),
															(this._windowsWrappingHeuristics = this.register(
																new l.MutableDisposable(),
															)),
															(this._onBinary = this.register(
																new s.EventEmitter(),
															)),
															(this.onBinary = this._onBinary.event),
															(this._onData = this.register(
																new s.EventEmitter(),
															)),
															(this.onData = this._onData.event),
															(this._onLineFeed = this.register(
																new s.EventEmitter(),
															)),
															(this.onLineFeed = this._onLineFeed.event),
															(this._onResize = this.register(
																new s.EventEmitter(),
															)),
															(this.onResize = this._onResize.event),
															(this._onWriteParsed = this.register(
																new s.EventEmitter(),
															)),
															(this.onWriteParsed = this._onWriteParsed.event),
															(this._onScroll = this.register(
																new s.EventEmitter(),
															)),
															(this._instantiationService =
																new n.InstantiationService()),
															(this.optionsService = this.register(
																new g.OptionsService(k),
															)),
															this._instantiationService.setService(
																_.IOptionsService,
																this.optionsService,
															),
															(this._bufferService = this.register(
																this._instantiationService.createInstance(
																	p.BufferService,
																),
															)),
															this._instantiationService.setService(
																_.IBufferService,
																this._bufferService,
															),
															(this._logService = this.register(
																this._instantiationService.createInstance(
																	d.LogService,
																),
															)),
															this._instantiationService.setService(
																_.ILogService,
																this._logService,
															),
															(this.coreService = this.register(
																this._instantiationService.createInstance(
																	h.CoreService,
																),
															)),
															this._instantiationService.setService(
																_.ICoreService,
																this.coreService,
															),
															(this.coreMouseService = this.register(
																this._instantiationService.createInstance(
																	i.CoreMouseService,
																),
															)),
															this._instantiationService.setService(
																_.ICoreMouseService,
																this.coreMouseService,
															),
															(this.unicodeService = this.register(
																this._instantiationService.createInstance(
																	e.UnicodeService,
																),
															)),
															this._instantiationService.setService(
																_.IUnicodeService,
																this.unicodeService,
															),
															(this._charsetService =
																this._instantiationService.createInstance(
																	t.CharsetService,
																)),
															this._instantiationService.setService(
																_.ICharsetService,
																this._charsetService,
															),
															(this._oscLinkService =
																this._instantiationService.createInstance(
																	v.OscLinkService,
																)),
															this._instantiationService.setService(
																_.IOscLinkService,
																this._oscLinkService,
															),
															(this._inputHandler = this.register(
																new f.InputHandler(
																	this._bufferService,
																	this._charsetService,
																	this.coreService,
																	this._logService,
																	this.optionsService,
																	this._oscLinkService,
																	this.coreMouseService,
																	this.unicodeService,
																),
															)),
															this.register(
																(0, s.forwardEvent)(
																	this._inputHandler.onLineFeed,
																	this._onLineFeed,
																),
															),
															this.register(this._inputHandler),
															this.register(
																(0, s.forwardEvent)(
																	this._bufferService.onResize,
																	this._onResize,
																),
															),
															this.register(
																(0, s.forwardEvent)(
																	this.coreService.onData,
																	this._onData,
																),
															),
															this.register(
																(0, s.forwardEvent)(
																	this.coreService.onBinary,
																	this._onBinary,
																),
															),
															this.register(
																this.coreService.onRequestScrollToBottom(() =>
																	this.scrollToBottom(),
																),
															),
															this.register(
																this.coreService.onUserInput(() =>
																	this._writeBuffer.handleUserInput(),
																),
															),
															this.register(
																this.optionsService.onMultipleOptionChange(
																	['windowsMode', 'windowsPty'],
																	() => this._handleWindowsPtyOptionChange(),
																),
															),
															this.register(
																this._bufferService.onScroll((L) => {
																	(this._onScroll.fire({
																		position: this._bufferService.buffer.ydisp,
																		source: 0,
																	}),
																		this._inputHandler.markRangeDirty(
																			this._bufferService.buffer.scrollTop,
																			this._bufferService.buffer.scrollBottom,
																		));
																}),
															),
															this.register(
																this._inputHandler.onScroll((L) => {
																	(this._onScroll.fire({
																		position: this._bufferService.buffer.ydisp,
																		source: 0,
																	}),
																		this._inputHandler.markRangeDirty(
																			this._bufferService.buffer.scrollTop,
																			this._bufferService.buffer.scrollBottom,
																		));
																}),
															),
															(this._writeBuffer = this.register(
																new u.WriteBuffer((L, b) =>
																	this._inputHandler.parse(L, b),
																),
															)),
															this.register(
																(0, s.forwardEvent)(
																	this._writeBuffer.onWriteParsed,
																	this._onWriteParsed,
																),
															));
													}
													write(k, L) {
														this._writeBuffer.write(k, L);
													}
													writeSync(k, L) {
														(this._logService.logLevel <= _.LogLevelEnum.WARN &&
															!c &&
															(this._logService.warn(
																'writeSync is unreliable and will be removed soon.',
															),
															(c = !0)),
															this._writeBuffer.writeSync(k, L));
													}
													input(k, L = !0) {
														this.coreService.triggerDataEvent(k, L);
													}
													resize(k, L) {
														isNaN(k) ||
															isNaN(L) ||
															((k = Math.max(k, p.MINIMUM_COLS)),
															(L = Math.max(L, p.MINIMUM_ROWS)),
															this._bufferService.resize(k, L));
													}
													scroll(k, L = !1) {
														this._bufferService.scroll(k, L);
													}
													scrollLines(k, L, b) {
														this._bufferService.scrollLines(k, L, b);
													}
													scrollPages(k) {
														this.scrollLines(k * (this.rows - 1));
													}
													scrollToTop() {
														this.scrollLines(-this._bufferService.buffer.ydisp);
													}
													scrollToBottom() {
														this.scrollLines(
															this._bufferService.buffer.ybase -
																this._bufferService.buffer.ydisp,
														);
													}
													scrollToLine(k) {
														const L = k - this._bufferService.buffer.ydisp;
														L !== 0 && this.scrollLines(L);
													}
													registerEscHandler(k, L) {
														return this._inputHandler.registerEscHandler(k, L);
													}
													registerDcsHandler(k, L) {
														return this._inputHandler.registerDcsHandler(k, L);
													}
													registerCsiHandler(k, L) {
														return this._inputHandler.registerCsiHandler(k, L);
													}
													registerOscHandler(k, L) {
														return this._inputHandler.registerOscHandler(k, L);
													}
													_setup() {
														this._handleWindowsPtyOptionChange();
													}
													reset() {
														(this._inputHandler.reset(),
															this._bufferService.reset(),
															this._charsetService.reset(),
															this.coreService.reset(),
															this.coreMouseService.reset());
													}
													_handleWindowsPtyOptionChange() {
														let k = !1;
														const L = this.optionsService.rawOptions.windowsPty;
														(L &&
														L.buildNumber !== void 0 &&
														L.buildNumber !== void 0
															? (k =
																	L.backend === 'conpty' &&
																	L.buildNumber < 21376)
															: this.optionsService.rawOptions.windowsMode &&
																(k = !0),
															k
																? this._enableWindowsWrappingHeuristics()
																: this._windowsWrappingHeuristics.clear());
													}
													_enableWindowsWrappingHeuristics() {
														if (!this._windowsWrappingHeuristics.value) {
															const k = [];
															(k.push(
																this.onLineFeed(
																	o.updateWindowsModeWrappedState.bind(
																		null,
																		this._bufferService,
																	),
																),
															),
																k.push(
																	this.registerCsiHandler(
																		{ final: 'H' },
																		() => (
																			(0, o.updateWindowsModeWrappedState)(
																				this._bufferService,
																			),
																			!1
																		),
																	),
																),
																(this._windowsWrappingHeuristics.value = (0,
																l.toDisposable)(() => {
																	for (const L of k) L.dispose();
																})));
														}
													}
												}
												r.CoreTerminal = m;
											},
											8460: (I, r) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.runAndSubscribe =
														r.forwardEvent =
														r.EventEmitter =
															void 0),
													(r.EventEmitter = class {
														constructor() {
															((this._listeners = []), (this._disposed = !1));
														}
														get event() {
															return (
																this._event ||
																	(this._event = (a) => (
																		this._listeners.push(a),
																		{
																			dispose: () => {
																				if (!this._disposed) {
																					for (
																						let l = 0;
																						l < this._listeners.length;
																						l++
																					)
																						if (this._listeners[l] === a)
																							return void this._listeners.splice(
																								l,
																								1,
																							);
																				}
																			},
																		}
																	)),
																this._event
															);
														}
														fire(a, l) {
															const _ = [];
															for (let n = 0; n < this._listeners.length; n++)
																_.push(this._listeners[n]);
															for (let n = 0; n < _.length; n++)
																_[n].call(void 0, a, l);
														}
														dispose() {
															(this.clearListeners(), (this._disposed = !0));
														}
														clearListeners() {
															this._listeners && (this._listeners.length = 0);
														}
													}),
													(r.forwardEvent = function (a, l) {
														return a((_) => l.fire(_));
													}),
													(r.runAndSubscribe = function (a, l) {
														return (l(void 0), a((_) => l(_)));
													}));
											},
											5435: function (I, r, a) {
												var l =
														(this && this.__decorate) ||
														function (j, S, y, E) {
															var x,
																W = arguments.length,
																z =
																	W < 3
																		? S
																		: E === null
																			? (E = Object.getOwnPropertyDescriptor(
																					S,
																					y,
																				))
																			: E;
															if (
																typeof Reflect == 'object' &&
																typeof Reflect.decorate == 'function'
															)
																z = Reflect.decorate(j, S, y, E);
															else
																for (var J = j.length - 1; J >= 0; J--)
																	(x = j[J]) &&
																		(z =
																			(W < 3
																				? x(z)
																				: W > 3
																					? x(S, y, z)
																					: x(S, y)) || z);
															return (
																W > 3 && z && Object.defineProperty(S, y, z),
																z
															);
														},
													_ =
														(this && this.__param) ||
														function (j, S) {
															return function (y, E) {
																S(y, E, j);
															};
														};
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.InputHandler = r.WindowsOptionsReportType =
														void 0));
												const n = a(2584),
													d = a(7116),
													p = a(2015),
													g = a(844),
													h = a(482),
													s = a(8437),
													i = a(8460),
													e = a(643),
													t = a(511),
													o = a(3734),
													f = a(2585),
													u = a(1480),
													v = a(6242),
													c = a(6351),
													m = a(5941),
													w = {
														'(': 0,
														')': 1,
														'*': 2,
														'+': 3,
														'-': 1,
														'.': 2,
													},
													k = 131072;
												function L(j, S) {
													if (j > 24) return S.setWinLines || !1;
													switch (j) {
														case 1:
															return !!S.restoreWin;
														case 2:
															return !!S.minimizeWin;
														case 3:
															return !!S.setWinPosition;
														case 4:
															return !!S.setWinSizePixels;
														case 5:
															return !!S.raiseWin;
														case 6:
															return !!S.lowerWin;
														case 7:
															return !!S.refreshWin;
														case 8:
															return !!S.setWinSizeChars;
														case 9:
															return !!S.maximizeWin;
														case 10:
															return !!S.fullscreenWin;
														case 11:
															return !!S.getWinState;
														case 13:
															return !!S.getWinPosition;
														case 14:
															return !!S.getWinSizePixels;
														case 15:
															return !!S.getScreenSizePixels;
														case 16:
															return !!S.getCellSizePixels;
														case 18:
															return !!S.getWinSizeChars;
														case 19:
															return !!S.getScreenSizeChars;
														case 20:
															return !!S.getIconTitle;
														case 21:
															return !!S.getWinTitle;
														case 22:
															return !!S.pushTitle;
														case 23:
															return !!S.popTitle;
														case 24:
															return !!S.setWinLines;
													}
													return !1;
												}
												var b;
												(function (j) {
													((j[(j.GET_WIN_SIZE_PIXELS = 0)] =
														'GET_WIN_SIZE_PIXELS'),
														(j[(j.GET_CELL_SIZE_PIXELS = 1)] =
															'GET_CELL_SIZE_PIXELS'));
												})(b || (r.WindowsOptionsReportType = b = {}));
												let A = 0;
												class M extends g.Disposable {
													getAttrData() {
														return this._curAttrData;
													}
													constructor(
														S,
														y,
														E,
														x,
														W,
														z,
														J,
														Y,
														D = new p.EscapeSequenceParser(),
													) {
														(super(),
															(this._bufferService = S),
															(this._charsetService = y),
															(this._coreService = E),
															(this._logService = x),
															(this._optionsService = W),
															(this._oscLinkService = z),
															(this._coreMouseService = J),
															(this._unicodeService = Y),
															(this._parser = D),
															(this._parseBuffer = new Uint32Array(4096)),
															(this._stringDecoder = new h.StringToUtf32()),
															(this._utf8Decoder = new h.Utf8ToUtf32()),
															(this._workCell = new t.CellData()),
															(this._windowTitle = ''),
															(this._iconName = ''),
															(this._windowTitleStack = []),
															(this._iconNameStack = []),
															(this._curAttrData = s.DEFAULT_ATTR_DATA.clone()),
															(this._eraseAttrDataInternal =
																s.DEFAULT_ATTR_DATA.clone()),
															(this._onRequestBell = this.register(
																new i.EventEmitter(),
															)),
															(this.onRequestBell = this._onRequestBell.event),
															(this._onRequestRefreshRows = this.register(
																new i.EventEmitter(),
															)),
															(this.onRequestRefreshRows =
																this._onRequestRefreshRows.event),
															(this._onRequestReset = this.register(
																new i.EventEmitter(),
															)),
															(this.onRequestReset =
																this._onRequestReset.event),
															(this._onRequestSendFocus = this.register(
																new i.EventEmitter(),
															)),
															(this.onRequestSendFocus =
																this._onRequestSendFocus.event),
															(this._onRequestSyncScrollBar = this.register(
																new i.EventEmitter(),
															)),
															(this.onRequestSyncScrollBar =
																this._onRequestSyncScrollBar.event),
															(this._onRequestWindowsOptionsReport =
																this.register(new i.EventEmitter())),
															(this.onRequestWindowsOptionsReport =
																this._onRequestWindowsOptionsReport.event),
															(this._onA11yChar = this.register(
																new i.EventEmitter(),
															)),
															(this.onA11yChar = this._onA11yChar.event),
															(this._onA11yTab = this.register(
																new i.EventEmitter(),
															)),
															(this.onA11yTab = this._onA11yTab.event),
															(this._onCursorMove = this.register(
																new i.EventEmitter(),
															)),
															(this.onCursorMove = this._onCursorMove.event),
															(this._onLineFeed = this.register(
																new i.EventEmitter(),
															)),
															(this.onLineFeed = this._onLineFeed.event),
															(this._onScroll = this.register(
																new i.EventEmitter(),
															)),
															(this.onScroll = this._onScroll.event),
															(this._onTitleChange = this.register(
																new i.EventEmitter(),
															)),
															(this.onTitleChange = this._onTitleChange.event),
															(this._onColor = this.register(
																new i.EventEmitter(),
															)),
															(this.onColor = this._onColor.event),
															(this._parseStack = {
																paused: !1,
																cursorStartX: 0,
																cursorStartY: 0,
																decodedLength: 0,
																position: 0,
															}),
															(this._specialColors = [256, 257, 258]),
															this.register(this._parser),
															(this._dirtyRowTracker = new $(
																this._bufferService,
															)),
															(this._activeBuffer = this._bufferService.buffer),
															this.register(
																this._bufferService.buffers.onBufferActivate(
																	(C) => (this._activeBuffer = C.activeBuffer),
																),
															),
															this._parser.setCsiHandlerFallback((C, F) => {
																this._logService.debug('Unknown CSI code: ', {
																	identifier: this._parser.identToString(C),
																	params: F.toArray(),
																});
															}),
															this._parser.setEscHandlerFallback((C) => {
																this._logService.debug('Unknown ESC code: ', {
																	identifier: this._parser.identToString(C),
																});
															}),
															this._parser.setExecuteHandlerFallback((C) => {
																this._logService.debug(
																	'Unknown EXECUTE code: ',
																	{ code: C },
																);
															}),
															this._parser.setOscHandlerFallback((C, F, B) => {
																this._logService.debug('Unknown OSC code: ', {
																	identifier: C,
																	action: F,
																	data: B,
																});
															}),
															this._parser.setDcsHandlerFallback((C, F, B) => {
																(F === 'HOOK' && (B = B.toArray()),
																	this._logService.debug('Unknown DCS code: ', {
																		identifier: this._parser.identToString(C),
																		action: F,
																		payload: B,
																	}));
															}),
															this._parser.setPrintHandler((C, F, B) =>
																this.print(C, F, B),
															),
															this._parser.registerCsiHandler(
																{ final: '@' },
																(C) => this.insertChars(C),
															),
															this._parser.registerCsiHandler(
																{ intermediates: ' ', final: '@' },
																(C) => this.scrollLeft(C),
															),
															this._parser.registerCsiHandler(
																{ final: 'A' },
																(C) => this.cursorUp(C),
															),
															this._parser.registerCsiHandler(
																{ intermediates: ' ', final: 'A' },
																(C) => this.scrollRight(C),
															),
															this._parser.registerCsiHandler(
																{ final: 'B' },
																(C) => this.cursorDown(C),
															),
															this._parser.registerCsiHandler(
																{ final: 'C' },
																(C) => this.cursorForward(C),
															),
															this._parser.registerCsiHandler(
																{ final: 'D' },
																(C) => this.cursorBackward(C),
															),
															this._parser.registerCsiHandler(
																{ final: 'E' },
																(C) => this.cursorNextLine(C),
															),
															this._parser.registerCsiHandler(
																{ final: 'F' },
																(C) => this.cursorPrecedingLine(C),
															),
															this._parser.registerCsiHandler(
																{ final: 'G' },
																(C) => this.cursorCharAbsolute(C),
															),
															this._parser.registerCsiHandler(
																{ final: 'H' },
																(C) => this.cursorPosition(C),
															),
															this._parser.registerCsiHandler(
																{ final: 'I' },
																(C) => this.cursorForwardTab(C),
															),
															this._parser.registerCsiHandler(
																{ final: 'J' },
																(C) => this.eraseInDisplay(C, !1),
															),
															this._parser.registerCsiHandler(
																{ prefix: '?', final: 'J' },
																(C) => this.eraseInDisplay(C, !0),
															),
															this._parser.registerCsiHandler(
																{ final: 'K' },
																(C) => this.eraseInLine(C, !1),
															),
															this._parser.registerCsiHandler(
																{ prefix: '?', final: 'K' },
																(C) => this.eraseInLine(C, !0),
															),
															this._parser.registerCsiHandler(
																{ final: 'L' },
																(C) => this.insertLines(C),
															),
															this._parser.registerCsiHandler(
																{ final: 'M' },
																(C) => this.deleteLines(C),
															),
															this._parser.registerCsiHandler(
																{ final: 'P' },
																(C) => this.deleteChars(C),
															),
															this._parser.registerCsiHandler(
																{ final: 'S' },
																(C) => this.scrollUp(C),
															),
															this._parser.registerCsiHandler(
																{ final: 'T' },
																(C) => this.scrollDown(C),
															),
															this._parser.registerCsiHandler(
																{ final: 'X' },
																(C) => this.eraseChars(C),
															),
															this._parser.registerCsiHandler(
																{ final: 'Z' },
																(C) => this.cursorBackwardTab(C),
															),
															this._parser.registerCsiHandler(
																{ final: '`' },
																(C) => this.charPosAbsolute(C),
															),
															this._parser.registerCsiHandler(
																{ final: 'a' },
																(C) => this.hPositionRelative(C),
															),
															this._parser.registerCsiHandler(
																{ final: 'b' },
																(C) => this.repeatPrecedingCharacter(C),
															),
															this._parser.registerCsiHandler(
																{ final: 'c' },
																(C) => this.sendDeviceAttributesPrimary(C),
															),
															this._parser.registerCsiHandler(
																{ prefix: '>', final: 'c' },
																(C) => this.sendDeviceAttributesSecondary(C),
															),
															this._parser.registerCsiHandler(
																{ final: 'd' },
																(C) => this.linePosAbsolute(C),
															),
															this._parser.registerCsiHandler(
																{ final: 'e' },
																(C) => this.vPositionRelative(C),
															),
															this._parser.registerCsiHandler(
																{ final: 'f' },
																(C) => this.hVPosition(C),
															),
															this._parser.registerCsiHandler(
																{ final: 'g' },
																(C) => this.tabClear(C),
															),
															this._parser.registerCsiHandler(
																{ final: 'h' },
																(C) => this.setMode(C),
															),
															this._parser.registerCsiHandler(
																{ prefix: '?', final: 'h' },
																(C) => this.setModePrivate(C),
															),
															this._parser.registerCsiHandler(
																{ final: 'l' },
																(C) => this.resetMode(C),
															),
															this._parser.registerCsiHandler(
																{ prefix: '?', final: 'l' },
																(C) => this.resetModePrivate(C),
															),
															this._parser.registerCsiHandler(
																{ final: 'm' },
																(C) => this.charAttributes(C),
															),
															this._parser.registerCsiHandler(
																{ final: 'n' },
																(C) => this.deviceStatus(C),
															),
															this._parser.registerCsiHandler(
																{ prefix: '?', final: 'n' },
																(C) => this.deviceStatusPrivate(C),
															),
															this._parser.registerCsiHandler(
																{ intermediates: '!', final: 'p' },
																(C) => this.softReset(C),
															),
															this._parser.registerCsiHandler(
																{ intermediates: ' ', final: 'q' },
																(C) => this.setCursorStyle(C),
															),
															this._parser.registerCsiHandler(
																{ final: 'r' },
																(C) => this.setScrollRegion(C),
															),
															this._parser.registerCsiHandler(
																{ final: 's' },
																(C) => this.saveCursor(C),
															),
															this._parser.registerCsiHandler(
																{ final: 't' },
																(C) => this.windowOptions(C),
															),
															this._parser.registerCsiHandler(
																{ final: 'u' },
																(C) => this.restoreCursor(C),
															),
															this._parser.registerCsiHandler(
																{ intermediates: "'", final: '}' },
																(C) => this.insertColumns(C),
															),
															this._parser.registerCsiHandler(
																{ intermediates: "'", final: '~' },
																(C) => this.deleteColumns(C),
															),
															this._parser.registerCsiHandler(
																{ intermediates: '"', final: 'q' },
																(C) => this.selectProtected(C),
															),
															this._parser.registerCsiHandler(
																{ intermediates: '$', final: 'p' },
																(C) => this.requestMode(C, !0),
															),
															this._parser.registerCsiHandler(
																{ prefix: '?', intermediates: '$', final: 'p' },
																(C) => this.requestMode(C, !1),
															),
															this._parser.setExecuteHandler(n.C0.BEL, () =>
																this.bell(),
															),
															this._parser.setExecuteHandler(n.C0.LF, () =>
																this.lineFeed(),
															),
															this._parser.setExecuteHandler(n.C0.VT, () =>
																this.lineFeed(),
															),
															this._parser.setExecuteHandler(n.C0.FF, () =>
																this.lineFeed(),
															),
															this._parser.setExecuteHandler(n.C0.CR, () =>
																this.carriageReturn(),
															),
															this._parser.setExecuteHandler(n.C0.BS, () =>
																this.backspace(),
															),
															this._parser.setExecuteHandler(n.C0.HT, () =>
																this.tab(),
															),
															this._parser.setExecuteHandler(n.C0.SO, () =>
																this.shiftOut(),
															),
															this._parser.setExecuteHandler(n.C0.SI, () =>
																this.shiftIn(),
															),
															this._parser.setExecuteHandler(n.C1.IND, () =>
																this.index(),
															),
															this._parser.setExecuteHandler(n.C1.NEL, () =>
																this.nextLine(),
															),
															this._parser.setExecuteHandler(n.C1.HTS, () =>
																this.tabSet(),
															),
															this._parser.registerOscHandler(
																0,
																new v.OscHandler(
																	(C) => (
																		this.setTitle(C),
																		this.setIconName(C),
																		!0
																	),
																),
															),
															this._parser.registerOscHandler(
																1,
																new v.OscHandler((C) => this.setIconName(C)),
															),
															this._parser.registerOscHandler(
																2,
																new v.OscHandler((C) => this.setTitle(C)),
															),
															this._parser.registerOscHandler(
																4,
																new v.OscHandler((C) =>
																	this.setOrReportIndexedColor(C),
																),
															),
															this._parser.registerOscHandler(
																8,
																new v.OscHandler((C) => this.setHyperlink(C)),
															),
															this._parser.registerOscHandler(
																10,
																new v.OscHandler((C) =>
																	this.setOrReportFgColor(C),
																),
															),
															this._parser.registerOscHandler(
																11,
																new v.OscHandler((C) =>
																	this.setOrReportBgColor(C),
																),
															),
															this._parser.registerOscHandler(
																12,
																new v.OscHandler((C) =>
																	this.setOrReportCursorColor(C),
																),
															),
															this._parser.registerOscHandler(
																104,
																new v.OscHandler((C) =>
																	this.restoreIndexedColor(C),
																),
															),
															this._parser.registerOscHandler(
																110,
																new v.OscHandler((C) => this.restoreFgColor(C)),
															),
															this._parser.registerOscHandler(
																111,
																new v.OscHandler((C) => this.restoreBgColor(C)),
															),
															this._parser.registerOscHandler(
																112,
																new v.OscHandler((C) =>
																	this.restoreCursorColor(C),
																),
															),
															this._parser.registerEscHandler(
																{ final: '7' },
																() => this.saveCursor(),
															),
															this._parser.registerEscHandler(
																{ final: '8' },
																() => this.restoreCursor(),
															),
															this._parser.registerEscHandler(
																{ final: 'D' },
																() => this.index(),
															),
															this._parser.registerEscHandler(
																{ final: 'E' },
																() => this.nextLine(),
															),
															this._parser.registerEscHandler(
																{ final: 'H' },
																() => this.tabSet(),
															),
															this._parser.registerEscHandler(
																{ final: 'M' },
																() => this.reverseIndex(),
															),
															this._parser.registerEscHandler(
																{ final: '=' },
																() => this.keypadApplicationMode(),
															),
															this._parser.registerEscHandler(
																{ final: '>' },
																() => this.keypadNumericMode(),
															),
															this._parser.registerEscHandler(
																{ final: 'c' },
																() => this.fullReset(),
															),
															this._parser.registerEscHandler(
																{ final: 'n' },
																() => this.setgLevel(2),
															),
															this._parser.registerEscHandler(
																{ final: 'o' },
																() => this.setgLevel(3),
															),
															this._parser.registerEscHandler(
																{ final: '|' },
																() => this.setgLevel(3),
															),
															this._parser.registerEscHandler(
																{ final: '}' },
																() => this.setgLevel(2),
															),
															this._parser.registerEscHandler(
																{ final: '~' },
																() => this.setgLevel(1),
															),
															this._parser.registerEscHandler(
																{ intermediates: '%', final: '@' },
																() => this.selectDefaultCharset(),
															),
															this._parser.registerEscHandler(
																{ intermediates: '%', final: 'G' },
																() => this.selectDefaultCharset(),
															));
														for (const C in d.CHARSETS)
															(this._parser.registerEscHandler(
																{ intermediates: '(', final: C },
																() => this.selectCharset('(' + C),
															),
																this._parser.registerEscHandler(
																	{ intermediates: ')', final: C },
																	() => this.selectCharset(')' + C),
																),
																this._parser.registerEscHandler(
																	{ intermediates: '*', final: C },
																	() => this.selectCharset('*' + C),
																),
																this._parser.registerEscHandler(
																	{ intermediates: '+', final: C },
																	() => this.selectCharset('+' + C),
																),
																this._parser.registerEscHandler(
																	{ intermediates: '-', final: C },
																	() => this.selectCharset('-' + C),
																),
																this._parser.registerEscHandler(
																	{ intermediates: '.', final: C },
																	() => this.selectCharset('.' + C),
																),
																this._parser.registerEscHandler(
																	{ intermediates: '/', final: C },
																	() => this.selectCharset('/' + C),
																));
														(this._parser.registerEscHandler(
															{ intermediates: '#', final: '8' },
															() => this.screenAlignmentPattern(),
														),
															this._parser.setErrorHandler(
																(C) => (
																	this._logService.error('Parsing error: ', C),
																	C
																),
															),
															this._parser.registerDcsHandler(
																{ intermediates: '$', final: 'q' },
																new c.DcsHandler((C, F) =>
																	this.requestStatusString(C, F),
																),
															));
													}
													_preserveStack(S, y, E, x) {
														((this._parseStack.paused = !0),
															(this._parseStack.cursorStartX = S),
															(this._parseStack.cursorStartY = y),
															(this._parseStack.decodedLength = E),
															(this._parseStack.position = x));
													}
													_logSlowResolvingAsync(S) {
														this._logService.logLevel <= f.LogLevelEnum.WARN &&
															Promise.race([
																S,
																new Promise((y, E) =>
																	setTimeout(() => E('#SLOW_TIMEOUT'), 5e3),
																),
															]).catch((y) => {
																if (y !== '#SLOW_TIMEOUT') throw y;
																console.warn(
																	'async parser handler taking longer than 5000 ms',
																);
															});
													}
													_getCurrentLinkId() {
														return this._curAttrData.extended.urlId;
													}
													parse(S, y) {
														let E,
															x = this._activeBuffer.x,
															W = this._activeBuffer.y,
															z = 0;
														const J = this._parseStack.paused;
														if (J) {
															if (
																(E = this._parser.parse(
																	this._parseBuffer,
																	this._parseStack.decodedLength,
																	y,
																))
															)
																return (this._logSlowResolvingAsync(E), E);
															((x = this._parseStack.cursorStartX),
																(W = this._parseStack.cursorStartY),
																(this._parseStack.paused = !1),
																S.length > k &&
																	(z = this._parseStack.position + k));
														}
														if (
															(this._logService.logLevel <=
																f.LogLevelEnum.DEBUG &&
																this._logService.debug(
																	'parsing data' +
																		(typeof S == 'string'
																			? ` "${S}"`
																			: ` "${Array.prototype.map.call(S, (C) => String.fromCharCode(C)).join('')}"`),
																	typeof S == 'string'
																		? S.split('').map((C) => C.charCodeAt(0))
																		: S,
																),
															this._parseBuffer.length < S.length &&
																this._parseBuffer.length < k &&
																(this._parseBuffer = new Uint32Array(
																	Math.min(S.length, k),
																)),
															J || this._dirtyRowTracker.clearRange(),
															S.length > k)
														)
															for (let C = z; C < S.length; C += k) {
																const F = C + k < S.length ? C + k : S.length,
																	B =
																		typeof S == 'string'
																			? this._stringDecoder.decode(
																					S.substring(C, F),
																					this._parseBuffer,
																				)
																			: this._utf8Decoder.decode(
																					S.subarray(C, F),
																					this._parseBuffer,
																				);
																if (
																	(E = this._parser.parse(this._parseBuffer, B))
																)
																	return (
																		this._preserveStack(x, W, B, C),
																		this._logSlowResolvingAsync(E),
																		E
																	);
															}
														else if (!J) {
															const C =
																typeof S == 'string'
																	? this._stringDecoder.decode(
																			S,
																			this._parseBuffer,
																		)
																	: this._utf8Decoder.decode(
																			S,
																			this._parseBuffer,
																		);
															if (
																(E = this._parser.parse(this._parseBuffer, C))
															)
																return (
																	this._preserveStack(x, W, C, 0),
																	this._logSlowResolvingAsync(E),
																	E
																);
														}
														(this._activeBuffer.x === x &&
															this._activeBuffer.y === W) ||
															this._onCursorMove.fire();
														const Y =
																this._dirtyRowTracker.end +
																(this._bufferService.buffer.ybase -
																	this._bufferService.buffer.ydisp),
															D =
																this._dirtyRowTracker.start +
																(this._bufferService.buffer.ybase -
																	this._bufferService.buffer.ydisp);
														D < this._bufferService.rows &&
															this._onRequestRefreshRows.fire(
																Math.min(D, this._bufferService.rows - 1),
																Math.min(Y, this._bufferService.rows - 1),
															);
													}
													print(S, y, E) {
														let x, W;
														const z = this._charsetService.charset,
															J =
																this._optionsService.rawOptions
																	.screenReaderMode,
															Y = this._bufferService.cols,
															D = this._coreService.decPrivateModes.wraparound,
															C = this._coreService.modes.insertMode,
															F = this._curAttrData;
														let B = this._activeBuffer.lines.get(
															this._activeBuffer.ybase + this._activeBuffer.y,
														);
														(this._dirtyRowTracker.markDirty(
															this._activeBuffer.y,
														),
															this._activeBuffer.x &&
																E - y > 0 &&
																B.getWidth(this._activeBuffer.x - 1) === 2 &&
																B.setCellFromCodepoint(
																	this._activeBuffer.x - 1,
																	0,
																	1,
																	F,
																));
														let K = this._parser.precedingJoinState;
														for (let q = y; q < E; ++q) {
															if (((x = S[q]), x < 127 && z)) {
																const be = z[String.fromCharCode(x)];
																be && (x = be.charCodeAt(0));
															}
															const oe = this._unicodeService.charProperties(
																x,
																K,
															);
															W = u.UnicodeService.extractWidth(oe);
															const Se = u.UnicodeService.extractShouldJoin(oe),
																ve = Se ? u.UnicodeService.extractWidth(K) : 0;
															if (
																((K = oe),
																J &&
																	this._onA11yChar.fire(
																		(0, h.stringFromCodePoint)(x),
																	),
																this._getCurrentLinkId() &&
																	this._oscLinkService.addLineToLink(
																		this._getCurrentLinkId(),
																		this._activeBuffer.ybase +
																			this._activeBuffer.y,
																	),
																this._activeBuffer.x + W - ve > Y)
															) {
																if (D) {
																	const be = B;
																	let te = this._activeBuffer.x - ve;
																	for (
																		this._activeBuffer.x = ve,
																			this._activeBuffer.y++,
																			this._activeBuffer.y ===
																			this._activeBuffer.scrollBottom + 1
																				? (this._activeBuffer.y--,
																					this._bufferService.scroll(
																						this._eraseAttrData(),
																						!0,
																					))
																				: (this._activeBuffer.y >=
																						this._bufferService.rows &&
																						(this._activeBuffer.y =
																							this._bufferService.rows - 1),
																					(this._activeBuffer.lines.get(
																						this._activeBuffer.ybase +
																							this._activeBuffer.y,
																					).isWrapped = !0)),
																			B = this._activeBuffer.lines.get(
																				this._activeBuffer.ybase +
																					this._activeBuffer.y,
																			),
																			ve > 0 &&
																				B instanceof s.BufferLine &&
																				B.copyCellsFrom(be, te, 0, ve, !1);
																		te < Y;

																	)
																		be.setCellFromCodepoint(te++, 0, 1, F);
																} else if (
																	((this._activeBuffer.x = Y - 1), W === 2)
																)
																	continue;
															}
															if (Se && this._activeBuffer.x) {
																const be = B.getWidth(this._activeBuffer.x - 1)
																	? 1
																	: 2;
																B.addCodepointToCell(
																	this._activeBuffer.x - be,
																	x,
																	W,
																);
																for (let te = W - ve; --te >= 0; )
																	B.setCellFromCodepoint(
																		this._activeBuffer.x++,
																		0,
																		0,
																		F,
																	);
															} else if (
																(C &&
																	(B.insertCells(
																		this._activeBuffer.x,
																		W - ve,
																		this._activeBuffer.getNullCell(F),
																	),
																	B.getWidth(Y - 1) === 2 &&
																		B.setCellFromCodepoint(
																			Y - 1,
																			e.NULL_CELL_CODE,
																			e.NULL_CELL_WIDTH,
																			F,
																		)),
																B.setCellFromCodepoint(
																	this._activeBuffer.x++,
																	x,
																	W,
																	F,
																),
																W > 0)
															)
																for (; --W; )
																	B.setCellFromCodepoint(
																		this._activeBuffer.x++,
																		0,
																		0,
																		F,
																	);
														}
														((this._parser.precedingJoinState = K),
															this._activeBuffer.x < Y &&
																E - y > 0 &&
																B.getWidth(this._activeBuffer.x) === 0 &&
																!B.hasContent(this._activeBuffer.x) &&
																B.setCellFromCodepoint(
																	this._activeBuffer.x,
																	0,
																	1,
																	F,
																),
															this._dirtyRowTracker.markDirty(
																this._activeBuffer.y,
															));
													}
													registerCsiHandler(S, y) {
														return S.final !== 't' ||
															S.prefix ||
															S.intermediates
															? this._parser.registerCsiHandler(S, y)
															: this._parser.registerCsiHandler(
																	S,
																	(E) =>
																		!L(
																			E.params[0],
																			this._optionsService.rawOptions
																				.windowOptions,
																		) || y(E),
																);
													}
													registerDcsHandler(S, y) {
														return this._parser.registerDcsHandler(
															S,
															new c.DcsHandler(y),
														);
													}
													registerEscHandler(S, y) {
														return this._parser.registerEscHandler(S, y);
													}
													registerOscHandler(S, y) {
														return this._parser.registerOscHandler(
															S,
															new v.OscHandler(y),
														);
													}
													bell() {
														return (this._onRequestBell.fire(), !0);
													}
													lineFeed() {
														return (
															this._dirtyRowTracker.markDirty(
																this._activeBuffer.y,
															),
															this._optionsService.rawOptions.convertEol &&
																(this._activeBuffer.x = 0),
															this._activeBuffer.y++,
															this._activeBuffer.y ===
															this._activeBuffer.scrollBottom + 1
																? (this._activeBuffer.y--,
																	this._bufferService.scroll(
																		this._eraseAttrData(),
																	))
																: this._activeBuffer.y >=
																	  this._bufferService.rows
																	? (this._activeBuffer.y =
																			this._bufferService.rows - 1)
																	: (this._activeBuffer.lines.get(
																			this._activeBuffer.ybase +
																				this._activeBuffer.y,
																		).isWrapped = !1),
															this._activeBuffer.x >=
																this._bufferService.cols &&
																this._activeBuffer.x--,
															this._dirtyRowTracker.markDirty(
																this._activeBuffer.y,
															),
															this._onLineFeed.fire(),
															!0
														);
													}
													carriageReturn() {
														return ((this._activeBuffer.x = 0), !0);
													}
													backspace() {
														var S;
														if (
															!this._coreService.decPrivateModes
																.reverseWraparound
														)
															return (
																this._restrictCursor(),
																this._activeBuffer.x > 0 &&
																	this._activeBuffer.x--,
																!0
															);
														if (
															(this._restrictCursor(this._bufferService.cols),
															this._activeBuffer.x > 0)
														)
															this._activeBuffer.x--;
														else if (
															this._activeBuffer.x === 0 &&
															this._activeBuffer.y >
																this._activeBuffer.scrollTop &&
															this._activeBuffer.y <=
																this._activeBuffer.scrollBottom &&
															(S = this._activeBuffer.lines.get(
																this._activeBuffer.ybase + this._activeBuffer.y,
															)) != null &&
															S.isWrapped
														) {
															((this._activeBuffer.lines.get(
																this._activeBuffer.ybase + this._activeBuffer.y,
															).isWrapped = !1),
																this._activeBuffer.y--,
																(this._activeBuffer.x =
																	this._bufferService.cols - 1));
															const y = this._activeBuffer.lines.get(
																this._activeBuffer.ybase + this._activeBuffer.y,
															);
															y.hasWidth(this._activeBuffer.x) &&
																!y.hasContent(this._activeBuffer.x) &&
																this._activeBuffer.x--;
														}
														return (this._restrictCursor(), !0);
													}
													tab() {
														if (
															this._activeBuffer.x >= this._bufferService.cols
														)
															return !0;
														const S = this._activeBuffer.x;
														return (
															(this._activeBuffer.x =
																this._activeBuffer.nextStop()),
															this._optionsService.rawOptions
																.screenReaderMode &&
																this._onA11yTab.fire(this._activeBuffer.x - S),
															!0
														);
													}
													shiftOut() {
														return (this._charsetService.setgLevel(1), !0);
													}
													shiftIn() {
														return (this._charsetService.setgLevel(0), !0);
													}
													_restrictCursor(S = this._bufferService.cols - 1) {
														((this._activeBuffer.x = Math.min(
															S,
															Math.max(0, this._activeBuffer.x),
														)),
															(this._activeBuffer.y = this._coreService
																.decPrivateModes.origin
																? Math.min(
																		this._activeBuffer.scrollBottom,
																		Math.max(
																			this._activeBuffer.scrollTop,
																			this._activeBuffer.y,
																		),
																	)
																: Math.min(
																		this._bufferService.rows - 1,
																		Math.max(0, this._activeBuffer.y),
																	)),
															this._dirtyRowTracker.markDirty(
																this._activeBuffer.y,
															));
													}
													_setCursor(S, y) {
														(this._dirtyRowTracker.markDirty(
															this._activeBuffer.y,
														),
															this._coreService.decPrivateModes.origin
																? ((this._activeBuffer.x = S),
																	(this._activeBuffer.y =
																		this._activeBuffer.scrollTop + y))
																: ((this._activeBuffer.x = S),
																	(this._activeBuffer.y = y)),
															this._restrictCursor(),
															this._dirtyRowTracker.markDirty(
																this._activeBuffer.y,
															));
													}
													_moveCursor(S, y) {
														(this._restrictCursor(),
															this._setCursor(
																this._activeBuffer.x + S,
																this._activeBuffer.y + y,
															));
													}
													cursorUp(S) {
														const y =
															this._activeBuffer.y -
															this._activeBuffer.scrollTop;
														return (
															y >= 0
																? this._moveCursor(
																		0,
																		-Math.min(y, S.params[0] || 1),
																	)
																: this._moveCursor(0, -(S.params[0] || 1)),
															!0
														);
													}
													cursorDown(S) {
														const y =
															this._activeBuffer.scrollBottom -
															this._activeBuffer.y;
														return (
															y >= 0
																? this._moveCursor(
																		0,
																		Math.min(y, S.params[0] || 1),
																	)
																: this._moveCursor(0, S.params[0] || 1),
															!0
														);
													}
													cursorForward(S) {
														return (this._moveCursor(S.params[0] || 1, 0), !0);
													}
													cursorBackward(S) {
														return (
															this._moveCursor(-(S.params[0] || 1), 0),
															!0
														);
													}
													cursorNextLine(S) {
														return (
															this.cursorDown(S),
															(this._activeBuffer.x = 0),
															!0
														);
													}
													cursorPrecedingLine(S) {
														return (
															this.cursorUp(S),
															(this._activeBuffer.x = 0),
															!0
														);
													}
													cursorCharAbsolute(S) {
														return (
															this._setCursor(
																(S.params[0] || 1) - 1,
																this._activeBuffer.y,
															),
															!0
														);
													}
													cursorPosition(S) {
														return (
															this._setCursor(
																S.length >= 2 ? (S.params[1] || 1) - 1 : 0,
																(S.params[0] || 1) - 1,
															),
															!0
														);
													}
													charPosAbsolute(S) {
														return (
															this._setCursor(
																(S.params[0] || 1) - 1,
																this._activeBuffer.y,
															),
															!0
														);
													}
													hPositionRelative(S) {
														return (this._moveCursor(S.params[0] || 1, 0), !0);
													}
													linePosAbsolute(S) {
														return (
															this._setCursor(
																this._activeBuffer.x,
																(S.params[0] || 1) - 1,
															),
															!0
														);
													}
													vPositionRelative(S) {
														return (this._moveCursor(0, S.params[0] || 1), !0);
													}
													hVPosition(S) {
														return (this.cursorPosition(S), !0);
													}
													tabClear(S) {
														const y = S.params[0];
														return (
															y === 0
																? delete this._activeBuffer.tabs[
																		this._activeBuffer.x
																	]
																: y === 3 && (this._activeBuffer.tabs = {}),
															!0
														);
													}
													cursorForwardTab(S) {
														if (
															this._activeBuffer.x >= this._bufferService.cols
														)
															return !0;
														let y = S.params[0] || 1;
														for (; y--; )
															this._activeBuffer.x =
																this._activeBuffer.nextStop();
														return !0;
													}
													cursorBackwardTab(S) {
														if (
															this._activeBuffer.x >= this._bufferService.cols
														)
															return !0;
														let y = S.params[0] || 1;
														for (; y--; )
															this._activeBuffer.x =
																this._activeBuffer.prevStop();
														return !0;
													}
													selectProtected(S) {
														const y = S.params[0];
														return (
															y === 1 && (this._curAttrData.bg |= 536870912),
															(y !== 2 && y !== 0) ||
																(this._curAttrData.bg &= -536870913),
															!0
														);
													}
													_eraseInBufferLine(S, y, E, x = !1, W = !1) {
														const z = this._activeBuffer.lines.get(
															this._activeBuffer.ybase + S,
														);
														(z.replaceCells(
															y,
															E,
															this._activeBuffer.getNullCell(
																this._eraseAttrData(),
															),
															W,
														),
															x && (z.isWrapped = !1));
													}
													_resetBufferLine(S, y = !1) {
														const E = this._activeBuffer.lines.get(
															this._activeBuffer.ybase + S,
														);
														E &&
															(E.fill(
																this._activeBuffer.getNullCell(
																	this._eraseAttrData(),
																),
																y,
															),
															this._bufferService.buffer.clearMarkers(
																this._activeBuffer.ybase + S,
															),
															(E.isWrapped = !1));
													}
													eraseInDisplay(S, y = !1) {
														let E;
														switch (
															(this._restrictCursor(this._bufferService.cols),
															S.params[0])
														) {
															case 0:
																for (
																	E = this._activeBuffer.y,
																		this._dirtyRowTracker.markDirty(E),
																		this._eraseInBufferLine(
																			E++,
																			this._activeBuffer.x,
																			this._bufferService.cols,
																			this._activeBuffer.x === 0,
																			y,
																		);
																	E < this._bufferService.rows;
																	E++
																)
																	this._resetBufferLine(E, y);
																this._dirtyRowTracker.markDirty(E);
																break;
															case 1:
																for (
																	E = this._activeBuffer.y,
																		this._dirtyRowTracker.markDirty(E),
																		this._eraseInBufferLine(
																			E,
																			0,
																			this._activeBuffer.x + 1,
																			!0,
																			y,
																		),
																		this._activeBuffer.x + 1 >=
																			this._bufferService.cols &&
																			(this._activeBuffer.lines.get(
																				E + 1,
																			).isWrapped = !1);
																	E--;

																)
																	this._resetBufferLine(E, y);
																this._dirtyRowTracker.markDirty(0);
																break;
															case 2:
																for (
																	E = this._bufferService.rows,
																		this._dirtyRowTracker.markDirty(E - 1);
																	E--;

																)
																	this._resetBufferLine(E, y);
																this._dirtyRowTracker.markDirty(0);
																break;
															case 3:
																const x =
																	this._activeBuffer.lines.length -
																	this._bufferService.rows;
																x > 0 &&
																	(this._activeBuffer.lines.trimStart(x),
																	(this._activeBuffer.ybase = Math.max(
																		this._activeBuffer.ybase - x,
																		0,
																	)),
																	(this._activeBuffer.ydisp = Math.max(
																		this._activeBuffer.ydisp - x,
																		0,
																	)),
																	this._onScroll.fire(0));
														}
														return !0;
													}
													eraseInLine(S, y = !1) {
														switch (
															(this._restrictCursor(this._bufferService.cols),
															S.params[0])
														) {
															case 0:
																this._eraseInBufferLine(
																	this._activeBuffer.y,
																	this._activeBuffer.x,
																	this._bufferService.cols,
																	this._activeBuffer.x === 0,
																	y,
																);
																break;
															case 1:
																this._eraseInBufferLine(
																	this._activeBuffer.y,
																	0,
																	this._activeBuffer.x + 1,
																	!1,
																	y,
																);
																break;
															case 2:
																this._eraseInBufferLine(
																	this._activeBuffer.y,
																	0,
																	this._bufferService.cols,
																	!0,
																	y,
																);
														}
														return (
															this._dirtyRowTracker.markDirty(
																this._activeBuffer.y,
															),
															!0
														);
													}
													insertLines(S) {
														this._restrictCursor();
														let y = S.params[0] || 1;
														if (
															this._activeBuffer.y >
																this._activeBuffer.scrollBottom ||
															this._activeBuffer.y <
																this._activeBuffer.scrollTop
														)
															return !0;
														const E =
																this._activeBuffer.ybase + this._activeBuffer.y,
															x =
																this._bufferService.rows -
																1 -
																this._activeBuffer.scrollBottom,
															W =
																this._bufferService.rows -
																1 +
																this._activeBuffer.ybase -
																x +
																1;
														for (; y--; )
															(this._activeBuffer.lines.splice(W - 1, 1),
																this._activeBuffer.lines.splice(
																	E,
																	0,
																	this._activeBuffer.getBlankLine(
																		this._eraseAttrData(),
																	),
																));
														return (
															this._dirtyRowTracker.markRangeDirty(
																this._activeBuffer.y,
																this._activeBuffer.scrollBottom,
															),
															(this._activeBuffer.x = 0),
															!0
														);
													}
													deleteLines(S) {
														this._restrictCursor();
														let y = S.params[0] || 1;
														if (
															this._activeBuffer.y >
																this._activeBuffer.scrollBottom ||
															this._activeBuffer.y <
																this._activeBuffer.scrollTop
														)
															return !0;
														const E =
															this._activeBuffer.ybase + this._activeBuffer.y;
														let x;
														for (
															x =
																this._bufferService.rows -
																1 -
																this._activeBuffer.scrollBottom,
																x =
																	this._bufferService.rows -
																	1 +
																	this._activeBuffer.ybase -
																	x;
															y--;

														)
															(this._activeBuffer.lines.splice(E, 1),
																this._activeBuffer.lines.splice(
																	x,
																	0,
																	this._activeBuffer.getBlankLine(
																		this._eraseAttrData(),
																	),
																));
														return (
															this._dirtyRowTracker.markRangeDirty(
																this._activeBuffer.y,
																this._activeBuffer.scrollBottom,
															),
															(this._activeBuffer.x = 0),
															!0
														);
													}
													insertChars(S) {
														this._restrictCursor();
														const y = this._activeBuffer.lines.get(
															this._activeBuffer.ybase + this._activeBuffer.y,
														);
														return (
															y &&
																(y.insertCells(
																	this._activeBuffer.x,
																	S.params[0] || 1,
																	this._activeBuffer.getNullCell(
																		this._eraseAttrData(),
																	),
																),
																this._dirtyRowTracker.markDirty(
																	this._activeBuffer.y,
																)),
															!0
														);
													}
													deleteChars(S) {
														this._restrictCursor();
														const y = this._activeBuffer.lines.get(
															this._activeBuffer.ybase + this._activeBuffer.y,
														);
														return (
															y &&
																(y.deleteCells(
																	this._activeBuffer.x,
																	S.params[0] || 1,
																	this._activeBuffer.getNullCell(
																		this._eraseAttrData(),
																	),
																),
																this._dirtyRowTracker.markDirty(
																	this._activeBuffer.y,
																)),
															!0
														);
													}
													scrollUp(S) {
														let y = S.params[0] || 1;
														for (; y--; )
															(this._activeBuffer.lines.splice(
																this._activeBuffer.ybase +
																	this._activeBuffer.scrollTop,
																1,
															),
																this._activeBuffer.lines.splice(
																	this._activeBuffer.ybase +
																		this._activeBuffer.scrollBottom,
																	0,
																	this._activeBuffer.getBlankLine(
																		this._eraseAttrData(),
																	),
																));
														return (
															this._dirtyRowTracker.markRangeDirty(
																this._activeBuffer.scrollTop,
																this._activeBuffer.scrollBottom,
															),
															!0
														);
													}
													scrollDown(S) {
														let y = S.params[0] || 1;
														for (; y--; )
															(this._activeBuffer.lines.splice(
																this._activeBuffer.ybase +
																	this._activeBuffer.scrollBottom,
																1,
															),
																this._activeBuffer.lines.splice(
																	this._activeBuffer.ybase +
																		this._activeBuffer.scrollTop,
																	0,
																	this._activeBuffer.getBlankLine(
																		s.DEFAULT_ATTR_DATA,
																	),
																));
														return (
															this._dirtyRowTracker.markRangeDirty(
																this._activeBuffer.scrollTop,
																this._activeBuffer.scrollBottom,
															),
															!0
														);
													}
													scrollLeft(S) {
														if (
															this._activeBuffer.y >
																this._activeBuffer.scrollBottom ||
															this._activeBuffer.y <
																this._activeBuffer.scrollTop
														)
															return !0;
														const y = S.params[0] || 1;
														for (
															let E = this._activeBuffer.scrollTop;
															E <= this._activeBuffer.scrollBottom;
															++E
														) {
															const x = this._activeBuffer.lines.get(
																this._activeBuffer.ybase + E,
															);
															(x.deleteCells(
																0,
																y,
																this._activeBuffer.getNullCell(
																	this._eraseAttrData(),
																),
															),
																(x.isWrapped = !1));
														}
														return (
															this._dirtyRowTracker.markRangeDirty(
																this._activeBuffer.scrollTop,
																this._activeBuffer.scrollBottom,
															),
															!0
														);
													}
													scrollRight(S) {
														if (
															this._activeBuffer.y >
																this._activeBuffer.scrollBottom ||
															this._activeBuffer.y <
																this._activeBuffer.scrollTop
														)
															return !0;
														const y = S.params[0] || 1;
														for (
															let E = this._activeBuffer.scrollTop;
															E <= this._activeBuffer.scrollBottom;
															++E
														) {
															const x = this._activeBuffer.lines.get(
																this._activeBuffer.ybase + E,
															);
															(x.insertCells(
																0,
																y,
																this._activeBuffer.getNullCell(
																	this._eraseAttrData(),
																),
															),
																(x.isWrapped = !1));
														}
														return (
															this._dirtyRowTracker.markRangeDirty(
																this._activeBuffer.scrollTop,
																this._activeBuffer.scrollBottom,
															),
															!0
														);
													}
													insertColumns(S) {
														if (
															this._activeBuffer.y >
																this._activeBuffer.scrollBottom ||
															this._activeBuffer.y <
																this._activeBuffer.scrollTop
														)
															return !0;
														const y = S.params[0] || 1;
														for (
															let E = this._activeBuffer.scrollTop;
															E <= this._activeBuffer.scrollBottom;
															++E
														) {
															const x = this._activeBuffer.lines.get(
																this._activeBuffer.ybase + E,
															);
															(x.insertCells(
																this._activeBuffer.x,
																y,
																this._activeBuffer.getNullCell(
																	this._eraseAttrData(),
																),
															),
																(x.isWrapped = !1));
														}
														return (
															this._dirtyRowTracker.markRangeDirty(
																this._activeBuffer.scrollTop,
																this._activeBuffer.scrollBottom,
															),
															!0
														);
													}
													deleteColumns(S) {
														if (
															this._activeBuffer.y >
																this._activeBuffer.scrollBottom ||
															this._activeBuffer.y <
																this._activeBuffer.scrollTop
														)
															return !0;
														const y = S.params[0] || 1;
														for (
															let E = this._activeBuffer.scrollTop;
															E <= this._activeBuffer.scrollBottom;
															++E
														) {
															const x = this._activeBuffer.lines.get(
																this._activeBuffer.ybase + E,
															);
															(x.deleteCells(
																this._activeBuffer.x,
																y,
																this._activeBuffer.getNullCell(
																	this._eraseAttrData(),
																),
															),
																(x.isWrapped = !1));
														}
														return (
															this._dirtyRowTracker.markRangeDirty(
																this._activeBuffer.scrollTop,
																this._activeBuffer.scrollBottom,
															),
															!0
														);
													}
													eraseChars(S) {
														this._restrictCursor();
														const y = this._activeBuffer.lines.get(
															this._activeBuffer.ybase + this._activeBuffer.y,
														);
														return (
															y &&
																(y.replaceCells(
																	this._activeBuffer.x,
																	this._activeBuffer.x + (S.params[0] || 1),
																	this._activeBuffer.getNullCell(
																		this._eraseAttrData(),
																	),
																),
																this._dirtyRowTracker.markDirty(
																	this._activeBuffer.y,
																)),
															!0
														);
													}
													repeatPrecedingCharacter(S) {
														const y = this._parser.precedingJoinState;
														if (!y) return !0;
														const E = S.params[0] || 1,
															x = u.UnicodeService.extractWidth(y),
															W = this._activeBuffer.x - x,
															z = this._activeBuffer.lines
																.get(
																	this._activeBuffer.ybase +
																		this._activeBuffer.y,
																)
																.getString(W),
															J = new Uint32Array(z.length * E);
														let Y = 0;
														for (let C = 0; C < z.length; ) {
															const F = z.codePointAt(C) || 0;
															((J[Y++] = F), (C += F > 65535 ? 2 : 1));
														}
														let D = Y;
														for (let C = 1; C < E; ++C)
															(J.copyWithin(D, 0, Y), (D += Y));
														return (this.print(J, 0, D), !0);
													}
													sendDeviceAttributesPrimary(S) {
														return (
															S.params[0] > 0 ||
																(this._is('xterm') ||
																this._is('rxvt-unicode') ||
																this._is('screen')
																	? this._coreService.triggerDataEvent(
																			n.C0.ESC + '[?1;2c',
																		)
																	: this._is('linux') &&
																		this._coreService.triggerDataEvent(
																			n.C0.ESC + '[?6c',
																		)),
															!0
														);
													}
													sendDeviceAttributesSecondary(S) {
														return (
															S.params[0] > 0 ||
																(this._is('xterm')
																	? this._coreService.triggerDataEvent(
																			n.C0.ESC + '[>0;276;0c',
																		)
																	: this._is('rxvt-unicode')
																		? this._coreService.triggerDataEvent(
																				n.C0.ESC + '[>85;95;0c',
																			)
																		: this._is('linux')
																			? this._coreService.triggerDataEvent(
																					S.params[0] + 'c',
																				)
																			: this._is('screen') &&
																				this._coreService.triggerDataEvent(
																					n.C0.ESC + '[>83;40003;0c',
																				)),
															!0
														);
													}
													_is(S) {
														return (
															(
																this._optionsService.rawOptions.termName + ''
															).indexOf(S) === 0
														);
													}
													setMode(S) {
														for (let y = 0; y < S.length; y++)
															switch (S.params[y]) {
																case 4:
																	this._coreService.modes.insertMode = !0;
																	break;
																case 20:
																	this._optionsService.options.convertEol = !0;
															}
														return !0;
													}
													setModePrivate(S) {
														for (let y = 0; y < S.length; y++)
															switch (S.params[y]) {
																case 1:
																	this._coreService.decPrivateModes.applicationCursorKeys =
																		!0;
																	break;
																case 2:
																	(this._charsetService.setgCharset(
																		0,
																		d.DEFAULT_CHARSET,
																	),
																		this._charsetService.setgCharset(
																			1,
																			d.DEFAULT_CHARSET,
																		),
																		this._charsetService.setgCharset(
																			2,
																			d.DEFAULT_CHARSET,
																		),
																		this._charsetService.setgCharset(
																			3,
																			d.DEFAULT_CHARSET,
																		));
																	break;
																case 3:
																	this._optionsService.rawOptions.windowOptions
																		.setWinLines &&
																		(this._bufferService.resize(
																			132,
																			this._bufferService.rows,
																		),
																		this._onRequestReset.fire());
																	break;
																case 6:
																	((this._coreService.decPrivateModes.origin =
																		!0),
																		this._setCursor(0, 0));
																	break;
																case 7:
																	this._coreService.decPrivateModes.wraparound =
																		!0;
																	break;
																case 12:
																	this._optionsService.options.cursorBlink = !0;
																	break;
																case 45:
																	this._coreService.decPrivateModes.reverseWraparound =
																		!0;
																	break;
																case 66:
																	(this._logService.debug(
																		'Serial port requested application keypad.',
																	),
																		(this._coreService.decPrivateModes.applicationKeypad =
																			!0),
																		this._onRequestSyncScrollBar.fire());
																	break;
																case 9:
																	this._coreMouseService.activeProtocol = 'X10';
																	break;
																case 1e3:
																	this._coreMouseService.activeProtocol =
																		'VT200';
																	break;
																case 1002:
																	this._coreMouseService.activeProtocol =
																		'DRAG';
																	break;
																case 1003:
																	this._coreMouseService.activeProtocol = 'ANY';
																	break;
																case 1004:
																	((this._coreService.decPrivateModes.sendFocus =
																		!0),
																		this._onRequestSendFocus.fire());
																	break;
																case 1005:
																	this._logService.debug(
																		'DECSET 1005 not supported (see #2507)',
																	);
																	break;
																case 1006:
																	this._coreMouseService.activeEncoding = 'SGR';
																	break;
																case 1015:
																	this._logService.debug(
																		'DECSET 1015 not supported (see #2507)',
																	);
																	break;
																case 1016:
																	this._coreMouseService.activeEncoding =
																		'SGR_PIXELS';
																	break;
																case 25:
																	this._coreService.isCursorHidden = !1;
																	break;
																case 1048:
																	this.saveCursor();
																	break;
																case 1049:
																	this.saveCursor();
																case 47:
																case 1047:
																	(this._bufferService.buffers.activateAltBuffer(
																		this._eraseAttrData(),
																	),
																		(this._coreService.isCursorInitialized =
																			!0),
																		this._onRequestRefreshRows.fire(
																			0,
																			this._bufferService.rows - 1,
																		),
																		this._onRequestSyncScrollBar.fire());
																	break;
																case 2004:
																	this._coreService.decPrivateModes.bracketedPasteMode =
																		!0;
															}
														return !0;
													}
													resetMode(S) {
														for (let y = 0; y < S.length; y++)
															switch (S.params[y]) {
																case 4:
																	this._coreService.modes.insertMode = !1;
																	break;
																case 20:
																	this._optionsService.options.convertEol = !1;
															}
														return !0;
													}
													resetModePrivate(S) {
														for (let y = 0; y < S.length; y++)
															switch (S.params[y]) {
																case 1:
																	this._coreService.decPrivateModes.applicationCursorKeys =
																		!1;
																	break;
																case 3:
																	this._optionsService.rawOptions.windowOptions
																		.setWinLines &&
																		(this._bufferService.resize(
																			80,
																			this._bufferService.rows,
																		),
																		this._onRequestReset.fire());
																	break;
																case 6:
																	((this._coreService.decPrivateModes.origin =
																		!1),
																		this._setCursor(0, 0));
																	break;
																case 7:
																	this._coreService.decPrivateModes.wraparound =
																		!1;
																	break;
																case 12:
																	this._optionsService.options.cursorBlink = !1;
																	break;
																case 45:
																	this._coreService.decPrivateModes.reverseWraparound =
																		!1;
																	break;
																case 66:
																	(this._logService.debug(
																		'Switching back to normal keypad.',
																	),
																		(this._coreService.decPrivateModes.applicationKeypad =
																			!1),
																		this._onRequestSyncScrollBar.fire());
																	break;
																case 9:
																case 1e3:
																case 1002:
																case 1003:
																	this._coreMouseService.activeProtocol =
																		'NONE';
																	break;
																case 1004:
																	this._coreService.decPrivateModes.sendFocus =
																		!1;
																	break;
																case 1005:
																	this._logService.debug(
																		'DECRST 1005 not supported (see #2507)',
																	);
																	break;
																case 1006:
																case 1016:
																	this._coreMouseService.activeEncoding =
																		'DEFAULT';
																	break;
																case 1015:
																	this._logService.debug(
																		'DECRST 1015 not supported (see #2507)',
																	);
																	break;
																case 25:
																	this._coreService.isCursorHidden = !0;
																	break;
																case 1048:
																	this.restoreCursor();
																	break;
																case 1049:
																case 47:
																case 1047:
																	(this._bufferService.buffers.activateNormalBuffer(),
																		S.params[y] === 1049 &&
																			this.restoreCursor(),
																		(this._coreService.isCursorInitialized =
																			!0),
																		this._onRequestRefreshRows.fire(
																			0,
																			this._bufferService.rows - 1,
																		),
																		this._onRequestSyncScrollBar.fire());
																	break;
																case 2004:
																	this._coreService.decPrivateModes.bracketedPasteMode =
																		!1;
															}
														return !0;
													}
													requestMode(S, y) {
														const E = this._coreService.decPrivateModes,
															{ activeProtocol: x, activeEncoding: W } =
																this._coreMouseService,
															z = this._coreService,
															{ buffers: J, cols: Y } = this._bufferService,
															{ active: D, alt: C } = J,
															F = this._optionsService.rawOptions,
															B = (Se) => (Se ? 1 : 2),
															K = S.params[0];
														return (
															(q = K),
															(oe = y
																? K === 2
																	? 4
																	: K === 4
																		? B(z.modes.insertMode)
																		: K === 12
																			? 3
																			: K === 20
																				? B(F.convertEol)
																				: 0
																: K === 1
																	? B(E.applicationCursorKeys)
																	: K === 3
																		? F.windowOptions.setWinLines
																			? Y === 80
																				? 2
																				: Y === 132
																					? 1
																					: 0
																			: 0
																		: K === 6
																			? B(E.origin)
																			: K === 7
																				? B(E.wraparound)
																				: K === 8
																					? 3
																					: K === 9
																						? B(x === 'X10')
																						: K === 12
																							? B(F.cursorBlink)
																							: K === 25
																								? B(!z.isCursorHidden)
																								: K === 45
																									? B(E.reverseWraparound)
																									: K === 66
																										? B(E.applicationKeypad)
																										: K === 67
																											? 4
																											: K === 1e3
																												? B(x === 'VT200')
																												: K === 1002
																													? B(x === 'DRAG')
																													: K === 1003
																														? B(x === 'ANY')
																														: K === 1004
																															? B(E.sendFocus)
																															: K === 1005
																																? 4
																																: K === 1006
																																	? B(
																																			W ===
																																				'SGR',
																																		)
																																	: K === 1015
																																		? 4
																																		: K === 1016
																																			? B(
																																					W ===
																																						'SGR_PIXELS',
																																				)
																																			: K ===
																																				  1048
																																				? 1
																																				: K ===
																																							47 ||
																																					  K ===
																																							1047 ||
																																					  K ===
																																							1049
																																					? B(
																																							D ===
																																								C,
																																						)
																																					: K ===
																																						  2004
																																						? B(
																																								E.bracketedPasteMode,
																																							)
																																						: 0),
															z.triggerDataEvent(
																`${n.C0.ESC}[${y ? '' : '?'}${q};${oe}$y`,
															),
															!0
														);
														var q, oe;
													}
													_updateAttrColor(S, y, E, x, W) {
														return (
															y === 2
																? ((S |= 50331648),
																	(S &= -16777216),
																	(S |= o.AttributeData.fromColorRGB([
																		E,
																		x,
																		W,
																	])))
																: y === 5 &&
																	((S &= -50331904),
																	(S |= 33554432 | (255 & E))),
															S
														);
													}
													_extractColor(S, y, E) {
														const x = [0, 0, -1, 0, 0, 0];
														let W = 0,
															z = 0;
														do {
															if (
																((x[z + W] = S.params[y + z]),
																S.hasSubParams(y + z))
															) {
																const J = S.getSubParams(y + z);
																let Y = 0;
																do
																	(x[1] === 5 && (W = 1),
																		(x[z + Y + 1 + W] = J[Y]));
																while (
																	++Y < J.length &&
																	Y + z + 1 + W < x.length
																);
																break;
															}
															if (
																(x[1] === 5 && z + W >= 2) ||
																(x[1] === 2 && z + W >= 5)
															)
																break;
															x[1] && (W = 1);
														} while (++z + y < S.length && z + W < x.length);
														for (let J = 2; J < x.length; ++J)
															x[J] === -1 && (x[J] = 0);
														switch (x[0]) {
															case 38:
																E.fg = this._updateAttrColor(
																	E.fg,
																	x[1],
																	x[3],
																	x[4],
																	x[5],
																);
																break;
															case 48:
																E.bg = this._updateAttrColor(
																	E.bg,
																	x[1],
																	x[3],
																	x[4],
																	x[5],
																);
																break;
															case 58:
																((E.extended = E.extended.clone()),
																	(E.extended.underlineColor =
																		this._updateAttrColor(
																			E.extended.underlineColor,
																			x[1],
																			x[3],
																			x[4],
																			x[5],
																		)));
														}
														return z;
													}
													_processUnderline(S, y) {
														((y.extended = y.extended.clone()),
															(!~S || S > 5) && (S = 1),
															(y.extended.underlineStyle = S),
															(y.fg |= 268435456),
															S === 0 && (y.fg &= -268435457),
															y.updateExtended());
													}
													_processSGR0(S) {
														((S.fg = s.DEFAULT_ATTR_DATA.fg),
															(S.bg = s.DEFAULT_ATTR_DATA.bg),
															(S.extended = S.extended.clone()),
															(S.extended.underlineStyle = 0),
															(S.extended.underlineColor &= -67108864),
															S.updateExtended());
													}
													charAttributes(S) {
														if (S.length === 1 && S.params[0] === 0)
															return (this._processSGR0(this._curAttrData), !0);
														const y = S.length;
														let E;
														const x = this._curAttrData;
														for (let W = 0; W < y; W++)
															((E = S.params[W]),
																E >= 30 && E <= 37
																	? ((x.fg &= -50331904),
																		(x.fg |= 16777216 | (E - 30)))
																	: E >= 40 && E <= 47
																		? ((x.bg &= -50331904),
																			(x.bg |= 16777216 | (E - 40)))
																		: E >= 90 && E <= 97
																			? ((x.fg &= -50331904),
																				(x.fg |= 16777224 | (E - 90)))
																			: E >= 100 && E <= 107
																				? ((x.bg &= -50331904),
																					(x.bg |= 16777224 | (E - 100)))
																				: E === 0
																					? this._processSGR0(x)
																					: E === 1
																						? (x.fg |= 134217728)
																						: E === 3
																							? (x.bg |= 67108864)
																							: E === 4
																								? ((x.fg |= 268435456),
																									this._processUnderline(
																										S.hasSubParams(W)
																											? S.getSubParams(W)[0]
																											: 1,
																										x,
																									))
																								: E === 5
																									? (x.fg |= 536870912)
																									: E === 7
																										? (x.fg |= 67108864)
																										: E === 8
																											? (x.fg |= 1073741824)
																											: E === 9
																												? (x.fg |= 2147483648)
																												: E === 2
																													? (x.bg |= 134217728)
																													: E === 21
																														? this._processUnderline(
																																2,
																																x,
																															)
																														: E === 22
																															? ((x.fg &=
																																	-134217729),
																																(x.bg &=
																																	-134217729))
																															: E === 23
																																? (x.bg &=
																																		-67108865)
																																: E === 24
																																	? ((x.fg &=
																																			-268435457),
																																		this._processUnderline(
																																			0,
																																			x,
																																		))
																																	: E === 25
																																		? (x.fg &=
																																				-536870913)
																																		: E === 27
																																			? (x.fg &=
																																					-67108865)
																																			: E === 28
																																				? (x.fg &=
																																						-1073741825)
																																				: E ===
																																					  29
																																					? (x.fg &= 2147483647)
																																					: E ===
																																						  39
																																						? ((x.fg &=
																																								-67108864),
																																							(x.fg |=
																																								16777215 &
																																								s
																																									.DEFAULT_ATTR_DATA
																																									.fg))
																																						: E ===
																																							  49
																																							? ((x.bg &=
																																									-67108864),
																																								(x.bg |=
																																									16777215 &
																																									s
																																										.DEFAULT_ATTR_DATA
																																										.bg))
																																							: E ===
																																										38 ||
																																								  E ===
																																										48 ||
																																								  E ===
																																										58
																																								? (W +=
																																										this._extractColor(
																																											S,
																																											W,
																																											x,
																																										))
																																								: E ===
																																									  53
																																									? (x.bg |= 1073741824)
																																									: E ===
																																										  55
																																										? (x.bg &=
																																												-1073741825)
																																										: E ===
																																											  59
																																											? ((x.extended =
																																													x.extended.clone()),
																																												(x.extended.underlineColor =
																																													-1),
																																												x.updateExtended())
																																											: E ===
																																												  100
																																												? ((x.fg &=
																																														-67108864),
																																													(x.fg |=
																																														16777215 &
																																														s
																																															.DEFAULT_ATTR_DATA
																																															.fg),
																																													(x.bg &=
																																														-67108864),
																																													(x.bg |=
																																														16777215 &
																																														s
																																															.DEFAULT_ATTR_DATA
																																															.bg))
																																												: this._logService.debug(
																																														'Unknown SGR attribute: %d.',
																																														E,
																																													));
														return !0;
													}
													deviceStatus(S) {
														switch (S.params[0]) {
															case 5:
																this._coreService.triggerDataEvent(
																	`${n.C0.ESC}[0n`,
																);
																break;
															case 6:
																const y = this._activeBuffer.y + 1,
																	E = this._activeBuffer.x + 1;
																this._coreService.triggerDataEvent(
																	`${n.C0.ESC}[${y};${E}R`,
																);
														}
														return !0;
													}
													deviceStatusPrivate(S) {
														if (S.params[0] === 6) {
															const y = this._activeBuffer.y + 1,
																E = this._activeBuffer.x + 1;
															this._coreService.triggerDataEvent(
																`${n.C0.ESC}[?${y};${E}R`,
															);
														}
														return !0;
													}
													softReset(S) {
														return (
															(this._coreService.isCursorHidden = !1),
															this._onRequestSyncScrollBar.fire(),
															(this._activeBuffer.scrollTop = 0),
															(this._activeBuffer.scrollBottom =
																this._bufferService.rows - 1),
															(this._curAttrData = s.DEFAULT_ATTR_DATA.clone()),
															this._coreService.reset(),
															this._charsetService.reset(),
															(this._activeBuffer.savedX = 0),
															(this._activeBuffer.savedY =
																this._activeBuffer.ybase),
															(this._activeBuffer.savedCurAttrData.fg =
																this._curAttrData.fg),
															(this._activeBuffer.savedCurAttrData.bg =
																this._curAttrData.bg),
															(this._activeBuffer.savedCharset =
																this._charsetService.charset),
															(this._coreService.decPrivateModes.origin = !1),
															!0
														);
													}
													setCursorStyle(S) {
														const y = S.params[0] || 1;
														switch (y) {
															case 1:
															case 2:
																this._optionsService.options.cursorStyle =
																	'block';
																break;
															case 3:
															case 4:
																this._optionsService.options.cursorStyle =
																	'underline';
																break;
															case 5:
															case 6:
																this._optionsService.options.cursorStyle =
																	'bar';
														}
														const E = y % 2 == 1;
														return (
															(this._optionsService.options.cursorBlink = E),
															!0
														);
													}
													setScrollRegion(S) {
														const y = S.params[0] || 1;
														let E;
														return (
															(S.length < 2 ||
																(E = S.params[1]) > this._bufferService.rows ||
																E === 0) &&
																(E = this._bufferService.rows),
															E > y &&
																((this._activeBuffer.scrollTop = y - 1),
																(this._activeBuffer.scrollBottom = E - 1),
																this._setCursor(0, 0)),
															!0
														);
													}
													windowOptions(S) {
														if (
															!L(
																S.params[0],
																this._optionsService.rawOptions.windowOptions,
															)
														)
															return !0;
														const y = S.length > 1 ? S.params[1] : 0;
														switch (S.params[0]) {
															case 14:
																y !== 2 &&
																	this._onRequestWindowsOptionsReport.fire(
																		b.GET_WIN_SIZE_PIXELS,
																	);
																break;
															case 16:
																this._onRequestWindowsOptionsReport.fire(
																	b.GET_CELL_SIZE_PIXELS,
																);
																break;
															case 18:
																this._bufferService &&
																	this._coreService.triggerDataEvent(
																		`${n.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`,
																	);
																break;
															case 22:
																((y !== 0 && y !== 2) ||
																	(this._windowTitleStack.push(
																		this._windowTitle,
																	),
																	this._windowTitleStack.length > 10 &&
																		this._windowTitleStack.shift()),
																	(y !== 0 && y !== 1) ||
																		(this._iconNameStack.push(this._iconName),
																		this._iconNameStack.length > 10 &&
																			this._iconNameStack.shift()));
																break;
															case 23:
																((y !== 0 && y !== 2) ||
																	(this._windowTitleStack.length &&
																		this.setTitle(
																			this._windowTitleStack.pop(),
																		)),
																	(y !== 0 && y !== 1) ||
																		(this._iconNameStack.length &&
																			this.setIconName(
																				this._iconNameStack.pop(),
																			)));
														}
														return !0;
													}
													saveCursor(S) {
														return (
															(this._activeBuffer.savedX =
																this._activeBuffer.x),
															(this._activeBuffer.savedY =
																this._activeBuffer.ybase +
																this._activeBuffer.y),
															(this._activeBuffer.savedCurAttrData.fg =
																this._curAttrData.fg),
															(this._activeBuffer.savedCurAttrData.bg =
																this._curAttrData.bg),
															(this._activeBuffer.savedCharset =
																this._charsetService.charset),
															!0
														);
													}
													restoreCursor(S) {
														return (
															(this._activeBuffer.x =
																this._activeBuffer.savedX || 0),
															(this._activeBuffer.y = Math.max(
																this._activeBuffer.savedY -
																	this._activeBuffer.ybase,
																0,
															)),
															(this._curAttrData.fg =
																this._activeBuffer.savedCurAttrData.fg),
															(this._curAttrData.bg =
																this._activeBuffer.savedCurAttrData.bg),
															(this._charsetService.charset =
																this._savedCharset),
															this._activeBuffer.savedCharset &&
																(this._charsetService.charset =
																	this._activeBuffer.savedCharset),
															this._restrictCursor(),
															!0
														);
													}
													setTitle(S) {
														return (
															(this._windowTitle = S),
															this._onTitleChange.fire(S),
															!0
														);
													}
													setIconName(S) {
														return ((this._iconName = S), !0);
													}
													setOrReportIndexedColor(S) {
														const y = [],
															E = S.split(';');
														for (; E.length > 1; ) {
															const x = E.shift(),
																W = E.shift();
															if (/^\d+$/.exec(x)) {
																const z = parseInt(x);
																if (V(z))
																	if (W === '?') y.push({ type: 0, index: z });
																	else {
																		const J = (0, m.parseColor)(W);
																		J &&
																			y.push({ type: 1, index: z, color: J });
																	}
															}
														}
														return (y.length && this._onColor.fire(y), !0);
													}
													setHyperlink(S) {
														const y = S.split(';');
														return (
															!(y.length < 2) &&
															(y[1]
																? this._createHyperlink(y[0], y[1])
																: !y[0] && this._finishHyperlink())
														);
													}
													_createHyperlink(S, y) {
														this._getCurrentLinkId() && this._finishHyperlink();
														const E = S.split(':');
														let x;
														const W = E.findIndex((z) => z.startsWith('id='));
														return (
															W !== -1 && (x = E[W].slice(3) || void 0),
															(this._curAttrData.extended =
																this._curAttrData.extended.clone()),
															(this._curAttrData.extended.urlId =
																this._oscLinkService.registerLink({
																	id: x,
																	uri: y,
																})),
															this._curAttrData.updateExtended(),
															!0
														);
													}
													_finishHyperlink() {
														return (
															(this._curAttrData.extended =
																this._curAttrData.extended.clone()),
															(this._curAttrData.extended.urlId = 0),
															this._curAttrData.updateExtended(),
															!0
														);
													}
													_setOrReportSpecialColor(S, y) {
														const E = S.split(';');
														for (
															let x = 0;
															x < E.length &&
															!(y >= this._specialColors.length);
															++x, ++y
														)
															if (E[x] === '?')
																this._onColor.fire([
																	{ type: 0, index: this._specialColors[y] },
																]);
															else {
																const W = (0, m.parseColor)(E[x]);
																W &&
																	this._onColor.fire([
																		{
																			type: 1,
																			index: this._specialColors[y],
																			color: W,
																		},
																	]);
															}
														return !0;
													}
													setOrReportFgColor(S) {
														return this._setOrReportSpecialColor(S, 0);
													}
													setOrReportBgColor(S) {
														return this._setOrReportSpecialColor(S, 1);
													}
													setOrReportCursorColor(S) {
														return this._setOrReportSpecialColor(S, 2);
													}
													restoreIndexedColor(S) {
														if (!S)
															return (this._onColor.fire([{ type: 2 }]), !0);
														const y = [],
															E = S.split(';');
														for (let x = 0; x < E.length; ++x)
															if (/^\d+$/.exec(E[x])) {
																const W = parseInt(E[x]);
																V(W) && y.push({ type: 2, index: W });
															}
														return (y.length && this._onColor.fire(y), !0);
													}
													restoreFgColor(S) {
														return (
															this._onColor.fire([{ type: 2, index: 256 }]),
															!0
														);
													}
													restoreBgColor(S) {
														return (
															this._onColor.fire([{ type: 2, index: 257 }]),
															!0
														);
													}
													restoreCursorColor(S) {
														return (
															this._onColor.fire([{ type: 2, index: 258 }]),
															!0
														);
													}
													nextLine() {
														return (
															(this._activeBuffer.x = 0),
															this.index(),
															!0
														);
													}
													keypadApplicationMode() {
														return (
															this._logService.debug(
																'Serial port requested application keypad.',
															),
															(this._coreService.decPrivateModes.applicationKeypad =
																!0),
															this._onRequestSyncScrollBar.fire(),
															!0
														);
													}
													keypadNumericMode() {
														return (
															this._logService.debug(
																'Switching back to normal keypad.',
															),
															(this._coreService.decPrivateModes.applicationKeypad =
																!1),
															this._onRequestSyncScrollBar.fire(),
															!0
														);
													}
													selectDefaultCharset() {
														return (
															this._charsetService.setgLevel(0),
															this._charsetService.setgCharset(
																0,
																d.DEFAULT_CHARSET,
															),
															!0
														);
													}
													selectCharset(S) {
														return S.length !== 2
															? (this.selectDefaultCharset(), !0)
															: (S[0] === '/' ||
																	this._charsetService.setgCharset(
																		w[S[0]],
																		d.CHARSETS[S[1]] || d.DEFAULT_CHARSET,
																	),
																!0);
													}
													index() {
														return (
															this._restrictCursor(),
															this._activeBuffer.y++,
															this._activeBuffer.y ===
															this._activeBuffer.scrollBottom + 1
																? (this._activeBuffer.y--,
																	this._bufferService.scroll(
																		this._eraseAttrData(),
																	))
																: this._activeBuffer.y >=
																		this._bufferService.rows &&
																	(this._activeBuffer.y =
																		this._bufferService.rows - 1),
															this._restrictCursor(),
															!0
														);
													}
													tabSet() {
														return (
															(this._activeBuffer.tabs[this._activeBuffer.x] =
																!0),
															!0
														);
													}
													reverseIndex() {
														if (
															(this._restrictCursor(),
															this._activeBuffer.y ===
																this._activeBuffer.scrollTop)
														) {
															const S =
																this._activeBuffer.scrollBottom -
																this._activeBuffer.scrollTop;
															(this._activeBuffer.lines.shiftElements(
																this._activeBuffer.ybase + this._activeBuffer.y,
																S,
																1,
															),
																this._activeBuffer.lines.set(
																	this._activeBuffer.ybase +
																		this._activeBuffer.y,
																	this._activeBuffer.getBlankLine(
																		this._eraseAttrData(),
																	),
																),
																this._dirtyRowTracker.markRangeDirty(
																	this._activeBuffer.scrollTop,
																	this._activeBuffer.scrollBottom,
																));
														} else
															(this._activeBuffer.y--, this._restrictCursor());
														return !0;
													}
													fullReset() {
														return (
															this._parser.reset(),
															this._onRequestReset.fire(),
															!0
														);
													}
													reset() {
														((this._curAttrData = s.DEFAULT_ATTR_DATA.clone()),
															(this._eraseAttrDataInternal =
																s.DEFAULT_ATTR_DATA.clone()));
													}
													_eraseAttrData() {
														return (
															(this._eraseAttrDataInternal.bg &= -67108864),
															(this._eraseAttrDataInternal.bg |=
																67108863 & this._curAttrData.bg),
															this._eraseAttrDataInternal
														);
													}
													setgLevel(S) {
														return (this._charsetService.setgLevel(S), !0);
													}
													screenAlignmentPattern() {
														const S = new t.CellData();
														((S.content = 4194373),
															(S.fg = this._curAttrData.fg),
															(S.bg = this._curAttrData.bg),
															this._setCursor(0, 0));
														for (let y = 0; y < this._bufferService.rows; ++y) {
															const E =
																	this._activeBuffer.ybase +
																	this._activeBuffer.y +
																	y,
																x = this._activeBuffer.lines.get(E);
															x && (x.fill(S), (x.isWrapped = !1));
														}
														return (
															this._dirtyRowTracker.markAllDirty(),
															this._setCursor(0, 0),
															!0
														);
													}
													requestStatusString(S, y) {
														const E = this._bufferService.buffer,
															x = this._optionsService.rawOptions;
														return ((W) => (
															this._coreService.triggerDataEvent(
																`${n.C0.ESC}${W}${n.C0.ESC}\\`,
															),
															!0
														))(
															S === '"q'
																? `P1$r${this._curAttrData.isProtected() ? 1 : 0}"q`
																: S === '"p'
																	? 'P1$r61;1"p'
																	: S === 'r'
																		? `P1$r${E.scrollTop + 1};${E.scrollBottom + 1}r`
																		: S === 'm'
																			? 'P1$r0m'
																			: S === ' q'
																				? `P1$r${{ block: 2, underline: 4, bar: 6 }[x.cursorStyle] - (x.cursorBlink ? 1 : 0)} q`
																				: 'P0$r',
														);
													}
													markRangeDirty(S, y) {
														this._dirtyRowTracker.markRangeDirty(S, y);
													}
												}
												r.InputHandler = M;
												let $ = class {
													constructor(j) {
														((this._bufferService = j), this.clearRange());
													}
													clearRange() {
														((this.start = this._bufferService.buffer.y),
															(this.end = this._bufferService.buffer.y));
													}
													markDirty(j) {
														j < this.start
															? (this.start = j)
															: j > this.end && (this.end = j);
													}
													markRangeDirty(j, S) {
														(j > S && ((A = j), (j = S), (S = A)),
															j < this.start && (this.start = j),
															S > this.end && (this.end = S));
													}
													markAllDirty() {
														this.markRangeDirty(
															0,
															this._bufferService.rows - 1,
														);
													}
												};
												function V(j) {
													return 0 <= j && j < 256;
												}
												$ = l([_(0, f.IBufferService)], $);
											},
											844: (I, r) => {
												function a(l) {
													for (const _ of l) _.dispose();
													l.length = 0;
												}
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.getDisposeArrayDisposable =
														r.disposeArray =
														r.toDisposable =
														r.MutableDisposable =
														r.Disposable =
															void 0),
													(r.Disposable = class {
														constructor() {
															((this._disposables = []),
																(this._isDisposed = !1));
														}
														dispose() {
															this._isDisposed = !0;
															for (const l of this._disposables) l.dispose();
															this._disposables.length = 0;
														}
														register(l) {
															return (this._disposables.push(l), l);
														}
														unregister(l) {
															const _ = this._disposables.indexOf(l);
															_ !== -1 && this._disposables.splice(_, 1);
														}
													}),
													(r.MutableDisposable = class {
														constructor() {
															this._isDisposed = !1;
														}
														get value() {
															return this._isDisposed ? void 0 : this._value;
														}
														set value(l) {
															var _;
															this._isDisposed ||
																l === this._value ||
																((_ = this._value) == null || _.dispose(),
																(this._value = l));
														}
														clear() {
															this.value = void 0;
														}
														dispose() {
															var l;
															((this._isDisposed = !0),
																(l = this._value) == null || l.dispose(),
																(this._value = void 0));
														}
													}),
													(r.toDisposable = function (l) {
														return { dispose: l };
													}),
													(r.disposeArray = a),
													(r.getDisposeArrayDisposable = function (l) {
														return { dispose: () => a(l) };
													}));
											},
											1505: (I, r) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.FourKeyMap = r.TwoKeyMap = void 0));
												class a {
													constructor() {
														this._data = {};
													}
													set(_, n, d) {
														(this._data[_] || (this._data[_] = {}),
															(this._data[_][n] = d));
													}
													get(_, n) {
														return this._data[_] ? this._data[_][n] : void 0;
													}
													clear() {
														this._data = {};
													}
												}
												((r.TwoKeyMap = a),
													(r.FourKeyMap = class {
														constructor() {
															this._data = new a();
														}
														set(l, _, n, d, p) {
															(this._data.get(l, _) ||
																this._data.set(l, _, new a()),
																this._data.get(l, _).set(n, d, p));
														}
														get(l, _, n, d) {
															var p;
															return (p = this._data.get(l, _)) == null
																? void 0
																: p.get(n, d);
														}
														clear() {
															this._data.clear();
														}
													}));
											},
											6114: (I, r) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.isChromeOS =
														r.isLinux =
														r.isWindows =
														r.isIphone =
														r.isIpad =
														r.isMac =
														r.getSafariVersion =
														r.isSafari =
														r.isLegacyEdge =
														r.isFirefox =
														r.isNode =
															void 0),
													(r.isNode =
														typeof process < 'u' && 'title' in process));
												const a = r.isNode ? 'node' : navigator.userAgent,
													l = r.isNode ? 'node' : navigator.platform;
												((r.isFirefox = a.includes('Firefox')),
													(r.isLegacyEdge = a.includes('Edge')),
													(r.isSafari = /^((?!chrome|android).)*safari/i.test(
														a,
													)),
													(r.getSafariVersion = function () {
														if (!r.isSafari) return 0;
														const _ = a.match(/Version\/(\d+)/);
														return _ === null || _.length < 2
															? 0
															: parseInt(_[1]);
													}),
													(r.isMac = [
														'Macintosh',
														'MacIntel',
														'MacPPC',
														'Mac68K',
													].includes(l)),
													(r.isIpad = l === 'iPad'),
													(r.isIphone = l === 'iPhone'),
													(r.isWindows = [
														'Windows',
														'Win16',
														'Win32',
														'WinCE',
													].includes(l)),
													(r.isLinux = l.indexOf('Linux') >= 0),
													(r.isChromeOS = /\bCrOS\b/.test(a)));
											},
											6106: (I, r) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.SortedList = void 0));
												let a = 0;
												r.SortedList = class {
													constructor(l) {
														((this._getKey = l), (this._array = []));
													}
													clear() {
														this._array.length = 0;
													}
													insert(l) {
														this._array.length !== 0
															? ((a = this._search(this._getKey(l))),
																this._array.splice(a, 0, l))
															: this._array.push(l);
													}
													delete(l) {
														if (this._array.length === 0) return !1;
														const _ = this._getKey(l);
														if (
															_ === void 0 ||
															((a = this._search(_)), a === -1) ||
															this._getKey(this._array[a]) !== _
														)
															return !1;
														do
															if (this._array[a] === l)
																return (this._array.splice(a, 1), !0);
														while (
															++a < this._array.length &&
															this._getKey(this._array[a]) === _
														);
														return !1;
													}
													*getKeyIterator(l) {
														if (
															this._array.length !== 0 &&
															((a = this._search(l)),
															!(a < 0 || a >= this._array.length) &&
																this._getKey(this._array[a]) === l)
														)
															do yield this._array[a];
															while (
																++a < this._array.length &&
																this._getKey(this._array[a]) === l
															);
													}
													forEachByKey(l, _) {
														if (
															this._array.length !== 0 &&
															((a = this._search(l)),
															!(a < 0 || a >= this._array.length) &&
																this._getKey(this._array[a]) === l)
														)
															do _(this._array[a]);
															while (
																++a < this._array.length &&
																this._getKey(this._array[a]) === l
															);
													}
													values() {
														return [...this._array].values();
													}
													_search(l) {
														let _ = 0,
															n = this._array.length - 1;
														for (; n >= _; ) {
															let d = (_ + n) >> 1;
															const p = this._getKey(this._array[d]);
															if (p > l) n = d - 1;
															else {
																if (!(p < l)) {
																	for (
																		;
																		d > 0 &&
																		this._getKey(this._array[d - 1]) === l;

																	)
																		d--;
																	return d;
																}
																_ = d + 1;
															}
														}
														return _;
													}
												};
											},
											7226: (I, r, a) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.DebouncedIdleTask =
														r.IdleTaskQueue =
														r.PriorityTaskQueue =
															void 0));
												const l = a(6114);
												class _ {
													constructor() {
														((this._tasks = []), (this._i = 0));
													}
													enqueue(p) {
														(this._tasks.push(p), this._start());
													}
													flush() {
														for (; this._i < this._tasks.length; )
															this._tasks[this._i]() || this._i++;
														this.clear();
													}
													clear() {
														(this._idleCallback &&
															(this._cancelCallback(this._idleCallback),
															(this._idleCallback = void 0)),
															(this._i = 0),
															(this._tasks.length = 0));
													}
													_start() {
														this._idleCallback ||
															(this._idleCallback = this._requestCallback(
																this._process.bind(this),
															));
													}
													_process(p) {
														this._idleCallback = void 0;
														let g = 0,
															h = 0,
															s = p.timeRemaining(),
															i = 0;
														for (; this._i < this._tasks.length; ) {
															if (
																((g = Date.now()),
																this._tasks[this._i]() || this._i++,
																(g = Math.max(1, Date.now() - g)),
																(h = Math.max(g, h)),
																(i = p.timeRemaining()),
																1.5 * h > i)
															)
																return (
																	s - g < -20 &&
																		console.warn(
																			`task queue exceeded allotted deadline by ${Math.abs(Math.round(s - g))}ms`,
																		),
																	void this._start()
																);
															s = i;
														}
														this.clear();
													}
												}
												class n extends _ {
													_requestCallback(p) {
														return setTimeout(() =>
															p(this._createDeadline(16)),
														);
													}
													_cancelCallback(p) {
														clearTimeout(p);
													}
													_createDeadline(p) {
														const g = Date.now() + p;
														return {
															timeRemaining: () => Math.max(0, g - Date.now()),
														};
													}
												}
												((r.PriorityTaskQueue = n),
													(r.IdleTaskQueue =
														!l.isNode && 'requestIdleCallback' in window
															? class extends _ {
																	_requestCallback(d) {
																		return requestIdleCallback(d);
																	}
																	_cancelCallback(d) {
																		cancelIdleCallback(d);
																	}
																}
															: n),
													(r.DebouncedIdleTask = class {
														constructor() {
															this._queue = new r.IdleTaskQueue();
														}
														set(d) {
															(this._queue.clear(), this._queue.enqueue(d));
														}
														flush() {
															this._queue.flush();
														}
													}));
											},
											9282: (I, r, a) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.updateWindowsModeWrappedState = void 0));
												const l = a(643);
												r.updateWindowsModeWrappedState = function (_) {
													const n = _.buffer.lines.get(
															_.buffer.ybase + _.buffer.y - 1,
														),
														d = n == null ? void 0 : n.get(_.cols - 1),
														p = _.buffer.lines.get(_.buffer.ybase + _.buffer.y);
													p &&
														d &&
														(p.isWrapped =
															d[l.CHAR_DATA_CODE_INDEX] !== l.NULL_CELL_CODE &&
															d[l.CHAR_DATA_CODE_INDEX] !==
																l.WHITESPACE_CELL_CODE);
												};
											},
											3734: (I, r) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.ExtendedAttrs = r.AttributeData = void 0));
												class a {
													constructor() {
														((this.fg = 0),
															(this.bg = 0),
															(this.extended = new l()));
													}
													static toColorRGB(n) {
														return [(n >>> 16) & 255, (n >>> 8) & 255, 255 & n];
													}
													static fromColorRGB(n) {
														return (
															((255 & n[0]) << 16) |
															((255 & n[1]) << 8) |
															(255 & n[2])
														);
													}
													clone() {
														const n = new a();
														return (
															(n.fg = this.fg),
															(n.bg = this.bg),
															(n.extended = this.extended.clone()),
															n
														);
													}
													isInverse() {
														return 67108864 & this.fg;
													}
													isBold() {
														return 134217728 & this.fg;
													}
													isUnderline() {
														return this.hasExtendedAttrs() &&
															this.extended.underlineStyle !== 0
															? 1
															: 268435456 & this.fg;
													}
													isBlink() {
														return 536870912 & this.fg;
													}
													isInvisible() {
														return 1073741824 & this.fg;
													}
													isItalic() {
														return 67108864 & this.bg;
													}
													isDim() {
														return 134217728 & this.bg;
													}
													isStrikethrough() {
														return 2147483648 & this.fg;
													}
													isProtected() {
														return 536870912 & this.bg;
													}
													isOverline() {
														return 1073741824 & this.bg;
													}
													getFgColorMode() {
														return 50331648 & this.fg;
													}
													getBgColorMode() {
														return 50331648 & this.bg;
													}
													isFgRGB() {
														return (50331648 & this.fg) == 50331648;
													}
													isBgRGB() {
														return (50331648 & this.bg) == 50331648;
													}
													isFgPalette() {
														return (
															(50331648 & this.fg) == 16777216 ||
															(50331648 & this.fg) == 33554432
														);
													}
													isBgPalette() {
														return (
															(50331648 & this.bg) == 16777216 ||
															(50331648 & this.bg) == 33554432
														);
													}
													isFgDefault() {
														return (50331648 & this.fg) == 0;
													}
													isBgDefault() {
														return (50331648 & this.bg) == 0;
													}
													isAttributeDefault() {
														return this.fg === 0 && this.bg === 0;
													}
													getFgColor() {
														switch (50331648 & this.fg) {
															case 16777216:
															case 33554432:
																return 255 & this.fg;
															case 50331648:
																return 16777215 & this.fg;
															default:
																return -1;
														}
													}
													getBgColor() {
														switch (50331648 & this.bg) {
															case 16777216:
															case 33554432:
																return 255 & this.bg;
															case 50331648:
																return 16777215 & this.bg;
															default:
																return -1;
														}
													}
													hasExtendedAttrs() {
														return 268435456 & this.bg;
													}
													updateExtended() {
														this.extended.isEmpty()
															? (this.bg &= -268435457)
															: (this.bg |= 268435456);
													}
													getUnderlineColor() {
														if (
															268435456 & this.bg &&
															~this.extended.underlineColor
														)
															switch (50331648 & this.extended.underlineColor) {
																case 16777216:
																case 33554432:
																	return 255 & this.extended.underlineColor;
																case 50331648:
																	return (
																		16777215 & this.extended.underlineColor
																	);
																default:
																	return this.getFgColor();
															}
														return this.getFgColor();
													}
													getUnderlineColorMode() {
														return 268435456 & this.bg &&
															~this.extended.underlineColor
															? 50331648 & this.extended.underlineColor
															: this.getFgColorMode();
													}
													isUnderlineColorRGB() {
														return 268435456 & this.bg &&
															~this.extended.underlineColor
															? (50331648 & this.extended.underlineColor) ==
																	50331648
															: this.isFgRGB();
													}
													isUnderlineColorPalette() {
														return 268435456 & this.bg &&
															~this.extended.underlineColor
															? (50331648 & this.extended.underlineColor) ==
																	16777216 ||
																	(50331648 & this.extended.underlineColor) ==
																		33554432
															: this.isFgPalette();
													}
													isUnderlineColorDefault() {
														return 268435456 & this.bg &&
															~this.extended.underlineColor
															? (50331648 & this.extended.underlineColor) == 0
															: this.isFgDefault();
													}
													getUnderlineStyle() {
														return 268435456 & this.fg
															? 268435456 & this.bg
																? this.extended.underlineStyle
																: 1
															: 0;
													}
													getUnderlineVariantOffset() {
														return this.extended.underlineVariantOffset;
													}
												}
												r.AttributeData = a;
												class l {
													get ext() {
														return this._urlId
															? (-469762049 & this._ext) |
																	(this.underlineStyle << 26)
															: this._ext;
													}
													set ext(n) {
														this._ext = n;
													}
													get underlineStyle() {
														return this._urlId
															? 5
															: (469762048 & this._ext) >> 26;
													}
													set underlineStyle(n) {
														((this._ext &= -469762049),
															(this._ext |= (n << 26) & 469762048));
													}
													get underlineColor() {
														return 67108863 & this._ext;
													}
													set underlineColor(n) {
														((this._ext &= -67108864),
															(this._ext |= 67108863 & n));
													}
													get urlId() {
														return this._urlId;
													}
													set urlId(n) {
														this._urlId = n;
													}
													get underlineVariantOffset() {
														const n = (3758096384 & this._ext) >> 29;
														return n < 0 ? 4294967288 ^ n : n;
													}
													set underlineVariantOffset(n) {
														((this._ext &= 536870911),
															(this._ext |= (n << 29) & 3758096384));
													}
													constructor(n = 0, d = 0) {
														((this._ext = 0),
															(this._urlId = 0),
															(this._ext = n),
															(this._urlId = d));
													}
													clone() {
														return new l(this._ext, this._urlId);
													}
													isEmpty() {
														return (
															this.underlineStyle === 0 && this._urlId === 0
														);
													}
												}
												r.ExtendedAttrs = l;
											},
											9092: (I, r, a) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.Buffer = r.MAX_BUFFER_SIZE = void 0));
												const l = a(6349),
													_ = a(7226),
													n = a(3734),
													d = a(8437),
													p = a(4634),
													g = a(511),
													h = a(643),
													s = a(4863),
													i = a(7116);
												((r.MAX_BUFFER_SIZE = 4294967295),
													(r.Buffer = class {
														constructor(e, t, o) {
															((this._hasScrollback = e),
																(this._optionsService = t),
																(this._bufferService = o),
																(this.ydisp = 0),
																(this.ybase = 0),
																(this.y = 0),
																(this.x = 0),
																(this.tabs = {}),
																(this.savedY = 0),
																(this.savedX = 0),
																(this.savedCurAttrData =
																	d.DEFAULT_ATTR_DATA.clone()),
																(this.savedCharset = i.DEFAULT_CHARSET),
																(this.markers = []),
																(this._nullCell = g.CellData.fromCharData([
																	0,
																	h.NULL_CELL_CHAR,
																	h.NULL_CELL_WIDTH,
																	h.NULL_CELL_CODE,
																])),
																(this._whitespaceCell = g.CellData.fromCharData(
																	[
																		0,
																		h.WHITESPACE_CELL_CHAR,
																		h.WHITESPACE_CELL_WIDTH,
																		h.WHITESPACE_CELL_CODE,
																	],
																)),
																(this._isClearing = !1),
																(this._memoryCleanupQueue =
																	new _.IdleTaskQueue()),
																(this._memoryCleanupPosition = 0),
																(this._cols = this._bufferService.cols),
																(this._rows = this._bufferService.rows),
																(this.lines = new l.CircularList(
																	this._getCorrectBufferLength(this._rows),
																)),
																(this.scrollTop = 0),
																(this.scrollBottom = this._rows - 1),
																this.setupTabStops());
														}
														getNullCell(e) {
															return (
																e
																	? ((this._nullCell.fg = e.fg),
																		(this._nullCell.bg = e.bg),
																		(this._nullCell.extended = e.extended))
																	: ((this._nullCell.fg = 0),
																		(this._nullCell.bg = 0),
																		(this._nullCell.extended =
																			new n.ExtendedAttrs())),
																this._nullCell
															);
														}
														getWhitespaceCell(e) {
															return (
																e
																	? ((this._whitespaceCell.fg = e.fg),
																		(this._whitespaceCell.bg = e.bg),
																		(this._whitespaceCell.extended =
																			e.extended))
																	: ((this._whitespaceCell.fg = 0),
																		(this._whitespaceCell.bg = 0),
																		(this._whitespaceCell.extended =
																			new n.ExtendedAttrs())),
																this._whitespaceCell
															);
														}
														getBlankLine(e, t) {
															return new d.BufferLine(
																this._bufferService.cols,
																this.getNullCell(e),
																t,
															);
														}
														get hasScrollback() {
															return (
																this._hasScrollback &&
																this.lines.maxLength > this._rows
															);
														}
														get isCursorInViewport() {
															const e = this.ybase + this.y - this.ydisp;
															return e >= 0 && e < this._rows;
														}
														_getCorrectBufferLength(e) {
															if (!this._hasScrollback) return e;
															const t =
																e + this._optionsService.rawOptions.scrollback;
															return t > r.MAX_BUFFER_SIZE
																? r.MAX_BUFFER_SIZE
																: t;
														}
														fillViewportRows(e) {
															if (this.lines.length === 0) {
																e === void 0 && (e = d.DEFAULT_ATTR_DATA);
																let t = this._rows;
																for (; t--; )
																	this.lines.push(this.getBlankLine(e));
															}
														}
														clear() {
															((this.ydisp = 0),
																(this.ybase = 0),
																(this.y = 0),
																(this.x = 0),
																(this.lines = new l.CircularList(
																	this._getCorrectBufferLength(this._rows),
																)),
																(this.scrollTop = 0),
																(this.scrollBottom = this._rows - 1),
																this.setupTabStops());
														}
														resize(e, t) {
															const o = this.getNullCell(d.DEFAULT_ATTR_DATA);
															let f = 0;
															const u = this._getCorrectBufferLength(t);
															if (
																(u > this.lines.maxLength &&
																	(this.lines.maxLength = u),
																this.lines.length > 0)
															) {
																if (this._cols < e)
																	for (let c = 0; c < this.lines.length; c++)
																		f += +this.lines.get(c).resize(e, o);
																let v = 0;
																if (this._rows < t)
																	for (let c = this._rows; c < t; c++)
																		this.lines.length < t + this.ybase &&
																			(this._optionsService.rawOptions
																				.windowsMode ||
																			this._optionsService.rawOptions.windowsPty
																				.backend !== void 0 ||
																			this._optionsService.rawOptions.windowsPty
																				.buildNumber !== void 0
																				? this.lines.push(
																						new d.BufferLine(e, o),
																					)
																				: this.ybase > 0 &&
																					  this.lines.length <=
																							this.ybase + this.y + v + 1
																					? (this.ybase--,
																						v++,
																						this.ydisp > 0 && this.ydisp--)
																					: this.lines.push(
																							new d.BufferLine(e, o),
																						));
																else
																	for (let c = this._rows; c > t; c--)
																		this.lines.length > t + this.ybase &&
																			(this.lines.length >
																			this.ybase + this.y + 1
																				? this.lines.pop()
																				: (this.ybase++, this.ydisp++));
																if (u < this.lines.maxLength) {
																	const c = this.lines.length - u;
																	(c > 0 &&
																		(this.lines.trimStart(c),
																		(this.ybase = Math.max(this.ybase - c, 0)),
																		(this.ydisp = Math.max(this.ydisp - c, 0)),
																		(this.savedY = Math.max(
																			this.savedY - c,
																			0,
																		))),
																		(this.lines.maxLength = u));
																}
																((this.x = Math.min(this.x, e - 1)),
																	(this.y = Math.min(this.y, t - 1)),
																	v && (this.y += v),
																	(this.savedX = Math.min(this.savedX, e - 1)),
																	(this.scrollTop = 0));
															}
															if (
																((this.scrollBottom = t - 1),
																this._isReflowEnabled &&
																	(this._reflow(e, t), this._cols > e))
															)
																for (let v = 0; v < this.lines.length; v++)
																	f += +this.lines.get(v).resize(e, o);
															((this._cols = e),
																(this._rows = t),
																this._memoryCleanupQueue.clear(),
																f > 0.1 * this.lines.length &&
																	((this._memoryCleanupPosition = 0),
																	this._memoryCleanupQueue.enqueue(() =>
																		this._batchedMemoryCleanup(),
																	)));
														}
														_batchedMemoryCleanup() {
															let e = !0;
															this._memoryCleanupPosition >=
																this.lines.length &&
																((this._memoryCleanupPosition = 0), (e = !1));
															let t = 0;
															for (
																;
																this._memoryCleanupPosition < this.lines.length;

															)
																if (
																	((t += this.lines
																		.get(this._memoryCleanupPosition++)
																		.cleanupMemory()),
																	t > 100)
																)
																	return !0;
															return e;
														}
														get _isReflowEnabled() {
															const e =
																this._optionsService.rawOptions.windowsPty;
															return e && e.buildNumber
																? this._hasScrollback &&
																		e.backend === 'conpty' &&
																		e.buildNumber >= 21376
																: this._hasScrollback &&
																		!this._optionsService.rawOptions
																			.windowsMode;
														}
														_reflow(e, t) {
															this._cols !== e &&
																(e > this._cols
																	? this._reflowLarger(e, t)
																	: this._reflowSmaller(e, t));
														}
														_reflowLarger(e, t) {
															const o = (0, p.reflowLargerGetLinesToRemove)(
																this.lines,
																this._cols,
																e,
																this.ybase + this.y,
																this.getNullCell(d.DEFAULT_ATTR_DATA),
															);
															if (o.length > 0) {
																const f = (0, p.reflowLargerCreateNewLayout)(
																	this.lines,
																	o,
																);
																((0, p.reflowLargerApplyNewLayout)(
																	this.lines,
																	f.layout,
																),
																	this._reflowLargerAdjustViewport(
																		e,
																		t,
																		f.countRemoved,
																	));
															}
														}
														_reflowLargerAdjustViewport(e, t, o) {
															const f = this.getNullCell(d.DEFAULT_ATTR_DATA);
															let u = o;
															for (; u-- > 0; )
																this.ybase === 0
																	? (this.y > 0 && this.y--,
																		this.lines.length < t &&
																			this.lines.push(new d.BufferLine(e, f)))
																	: (this.ydisp === this.ybase && this.ydisp--,
																		this.ybase--);
															this.savedY = Math.max(this.savedY - o, 0);
														}
														_reflowSmaller(e, t) {
															const o = this.getNullCell(d.DEFAULT_ATTR_DATA),
																f = [];
															let u = 0;
															for (let v = this.lines.length - 1; v >= 0; v--) {
																let c = this.lines.get(v);
																if (
																	!c ||
																	(!c.isWrapped && c.getTrimmedLength() <= e)
																)
																	continue;
																const m = [c];
																for (; c.isWrapped && v > 0; )
																	((c = this.lines.get(--v)), m.unshift(c));
																const w = this.ybase + this.y;
																if (w >= v && w < v + m.length) continue;
																const k = m[m.length - 1].getTrimmedLength(),
																	L = (0, p.reflowSmallerGetNewLineLengths)(
																		m,
																		this._cols,
																		e,
																	),
																	b = L.length - m.length;
																let A;
																A =
																	this.ybase === 0 &&
																	this.y !== this.lines.length - 1
																		? Math.max(
																				0,
																				this.y - this.lines.maxLength + b,
																			)
																		: Math.max(
																				0,
																				this.lines.length -
																					this.lines.maxLength +
																					b,
																			);
																const M = [];
																for (let E = 0; E < b; E++) {
																	const x = this.getBlankLine(
																		d.DEFAULT_ATTR_DATA,
																		!0,
																	);
																	M.push(x);
																}
																(M.length > 0 &&
																	(f.push({
																		start: v + m.length + u,
																		newLines: M,
																	}),
																	(u += M.length)),
																	m.push(...M));
																let $ = L.length - 1,
																	V = L[$];
																V === 0 && ($--, (V = L[$]));
																let j = m.length - b - 1,
																	S = k;
																for (; j >= 0; ) {
																	const E = Math.min(S, V);
																	if (m[$] === void 0) break;
																	if (
																		(m[$].copyCellsFrom(
																			m[j],
																			S - E,
																			V - E,
																			E,
																			!0,
																		),
																		(V -= E),
																		V === 0 && ($--, (V = L[$])),
																		(S -= E),
																		S === 0)
																	) {
																		j--;
																		const x = Math.max(j, 0);
																		S = (0, p.getWrappedLineTrimmedLength)(
																			m,
																			x,
																			this._cols,
																		);
																	}
																}
																for (let E = 0; E < m.length; E++)
																	L[E] < e && m[E].setCell(L[E], o);
																let y = b - A;
																for (; y-- > 0; )
																	this.ybase === 0
																		? this.y < t - 1
																			? (this.y++, this.lines.pop())
																			: (this.ybase++, this.ydisp++)
																		: this.ybase <
																				Math.min(
																					this.lines.maxLength,
																					this.lines.length + u,
																				) -
																					t &&
																			(this.ybase === this.ydisp &&
																				this.ydisp++,
																			this.ybase++);
																this.savedY = Math.min(
																	this.savedY + b,
																	this.ybase + t - 1,
																);
															}
															if (f.length > 0) {
																const v = [],
																	c = [];
																for (let $ = 0; $ < this.lines.length; $++)
																	c.push(this.lines.get($));
																const m = this.lines.length;
																let w = m - 1,
																	k = 0,
																	L = f[k];
																this.lines.length = Math.min(
																	this.lines.maxLength,
																	this.lines.length + u,
																);
																let b = 0;
																for (
																	let $ = Math.min(
																		this.lines.maxLength - 1,
																		m + u - 1,
																	);
																	$ >= 0;
																	$--
																)
																	if (L && L.start > w + b) {
																		for (
																			let V = L.newLines.length - 1;
																			V >= 0;
																			V--
																		)
																			this.lines.set($--, L.newLines[V]);
																		($++,
																			v.push({
																				index: w + 1,
																				amount: L.newLines.length,
																			}),
																			(b += L.newLines.length),
																			(L = f[++k]));
																	} else this.lines.set($, c[w--]);
																let A = 0;
																for (let $ = v.length - 1; $ >= 0; $--)
																	((v[$].index += A),
																		this.lines.onInsertEmitter.fire(v[$]),
																		(A += v[$].amount));
																const M = Math.max(
																	0,
																	m + u - this.lines.maxLength,
																);
																M > 0 && this.lines.onTrimEmitter.fire(M);
															}
														}
														translateBufferLineToString(e, t, o = 0, f) {
															const u = this.lines.get(e);
															return u ? u.translateToString(t, o, f) : '';
														}
														getWrappedRangeForLine(e) {
															let t = e,
																o = e;
															for (; t > 0 && this.lines.get(t).isWrapped; )
																t--;
															for (
																;
																o + 1 < this.lines.length &&
																this.lines.get(o + 1).isWrapped;

															)
																o++;
															return { first: t, last: o };
														}
														setupTabStops(e) {
															for (
																e != null
																	? this.tabs[e] || (e = this.prevStop(e))
																	: ((this.tabs = {}), (e = 0));
																e < this._cols;
																e +=
																	this._optionsService.rawOptions.tabStopWidth
															)
																this.tabs[e] = !0;
														}
														prevStop(e) {
															for (
																e == null && (e = this.x);
																!this.tabs[--e] && e > 0;

															);
															return e >= this._cols
																? this._cols - 1
																: e < 0
																	? 0
																	: e;
														}
														nextStop(e) {
															for (
																e == null && (e = this.x);
																!this.tabs[++e] && e < this._cols;

															);
															return e >= this._cols
																? this._cols - 1
																: e < 0
																	? 0
																	: e;
														}
														clearMarkers(e) {
															this._isClearing = !0;
															for (let t = 0; t < this.markers.length; t++)
																this.markers[t].line === e &&
																	(this.markers[t].dispose(),
																	this.markers.splice(t--, 1));
															this._isClearing = !1;
														}
														clearAllMarkers() {
															this._isClearing = !0;
															for (let e = 0; e < this.markers.length; e++)
																(this.markers[e].dispose(),
																	this.markers.splice(e--, 1));
															this._isClearing = !1;
														}
														addMarker(e) {
															const t = new s.Marker(e);
															return (
																this.markers.push(t),
																t.register(
																	this.lines.onTrim((o) => {
																		((t.line -= o), t.line < 0 && t.dispose());
																	}),
																),
																t.register(
																	this.lines.onInsert((o) => {
																		t.line >= o.index && (t.line += o.amount);
																	}),
																),
																t.register(
																	this.lines.onDelete((o) => {
																		(t.line >= o.index &&
																			t.line < o.index + o.amount &&
																			t.dispose(),
																			t.line > o.index && (t.line -= o.amount));
																	}),
																),
																t.register(
																	t.onDispose(() => this._removeMarker(t)),
																),
																t
															);
														}
														_removeMarker(e) {
															this._isClearing ||
																this.markers.splice(this.markers.indexOf(e), 1);
														}
													}));
											},
											8437: (I, r, a) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.BufferLine = r.DEFAULT_ATTR_DATA = void 0));
												const l = a(3734),
													_ = a(511),
													n = a(643),
													d = a(482);
												r.DEFAULT_ATTR_DATA = Object.freeze(
													new l.AttributeData(),
												);
												let p = 0;
												class g {
													constructor(s, i, e = !1) {
														((this.isWrapped = e),
															(this._combined = {}),
															(this._extendedAttrs = {}),
															(this._data = new Uint32Array(3 * s)));
														const t =
															i ||
															_.CellData.fromCharData([
																0,
																n.NULL_CELL_CHAR,
																n.NULL_CELL_WIDTH,
																n.NULL_CELL_CODE,
															]);
														for (let o = 0; o < s; ++o) this.setCell(o, t);
														this.length = s;
													}
													get(s) {
														const i = this._data[3 * s + 0],
															e = 2097151 & i;
														return [
															this._data[3 * s + 1],
															2097152 & i
																? this._combined[s]
																: e
																	? (0, d.stringFromCodePoint)(e)
																	: '',
															i >> 22,
															2097152 & i
																? this._combined[s].charCodeAt(
																		this._combined[s].length - 1,
																	)
																: e,
														];
													}
													set(s, i) {
														((this._data[3 * s + 1] =
															i[n.CHAR_DATA_ATTR_INDEX]),
															i[n.CHAR_DATA_CHAR_INDEX].length > 1
																? ((this._combined[s] = i[1]),
																	(this._data[3 * s + 0] =
																		2097152 |
																		s |
																		(i[n.CHAR_DATA_WIDTH_INDEX] << 22)))
																: (this._data[3 * s + 0] =
																		i[n.CHAR_DATA_CHAR_INDEX].charCodeAt(0) |
																		(i[n.CHAR_DATA_WIDTH_INDEX] << 22)));
													}
													getWidth(s) {
														return this._data[3 * s + 0] >> 22;
													}
													hasWidth(s) {
														return 12582912 & this._data[3 * s + 0];
													}
													getFg(s) {
														return this._data[3 * s + 1];
													}
													getBg(s) {
														return this._data[3 * s + 2];
													}
													hasContent(s) {
														return 4194303 & this._data[3 * s + 0];
													}
													getCodePoint(s) {
														const i = this._data[3 * s + 0];
														return 2097152 & i
															? this._combined[s].charCodeAt(
																	this._combined[s].length - 1,
																)
															: 2097151 & i;
													}
													isCombined(s) {
														return 2097152 & this._data[3 * s + 0];
													}
													getString(s) {
														const i = this._data[3 * s + 0];
														return 2097152 & i
															? this._combined[s]
															: 2097151 & i
																? (0, d.stringFromCodePoint)(2097151 & i)
																: '';
													}
													isProtected(s) {
														return 536870912 & this._data[3 * s + 2];
													}
													loadCell(s, i) {
														return (
															(p = 3 * s),
															(i.content = this._data[p + 0]),
															(i.fg = this._data[p + 1]),
															(i.bg = this._data[p + 2]),
															2097152 & i.content &&
																(i.combinedData = this._combined[s]),
															268435456 & i.bg &&
																(i.extended = this._extendedAttrs[s]),
															i
														);
													}
													setCell(s, i) {
														(2097152 & i.content &&
															(this._combined[s] = i.combinedData),
															268435456 & i.bg &&
																(this._extendedAttrs[s] = i.extended),
															(this._data[3 * s + 0] = i.content),
															(this._data[3 * s + 1] = i.fg),
															(this._data[3 * s + 2] = i.bg));
													}
													setCellFromCodepoint(s, i, e, t) {
														(268435456 & t.bg &&
															(this._extendedAttrs[s] = t.extended),
															(this._data[3 * s + 0] = i | (e << 22)),
															(this._data[3 * s + 1] = t.fg),
															(this._data[3 * s + 2] = t.bg));
													}
													addCodepointToCell(s, i, e) {
														let t = this._data[3 * s + 0];
														(2097152 & t
															? (this._combined[s] += (0,
																d.stringFromCodePoint)(i))
															: 2097151 & t
																? ((this._combined[s] =
																		(0, d.stringFromCodePoint)(2097151 & t) +
																		(0, d.stringFromCodePoint)(i)),
																	(t &= -2097152),
																	(t |= 2097152))
																: (t = i | 4194304),
															e && ((t &= -12582913), (t |= e << 22)),
															(this._data[3 * s + 0] = t));
													}
													insertCells(s, i, e) {
														if (
															((s %= this.length) &&
																this.getWidth(s - 1) === 2 &&
																this.setCellFromCodepoint(s - 1, 0, 1, e),
															i < this.length - s)
														) {
															const t = new _.CellData();
															for (let o = this.length - s - i - 1; o >= 0; --o)
																this.setCell(
																	s + i + o,
																	this.loadCell(s + o, t),
																);
															for (let o = 0; o < i; ++o)
																this.setCell(s + o, e);
														} else
															for (let t = s; t < this.length; ++t)
																this.setCell(t, e);
														this.getWidth(this.length - 1) === 2 &&
															this.setCellFromCodepoint(
																this.length - 1,
																0,
																1,
																e,
															);
													}
													deleteCells(s, i, e) {
														if (((s %= this.length), i < this.length - s)) {
															const t = new _.CellData();
															for (let o = 0; o < this.length - s - i; ++o)
																this.setCell(
																	s + o,
																	this.loadCell(s + i + o, t),
																);
															for (
																let o = this.length - i;
																o < this.length;
																++o
															)
																this.setCell(o, e);
														} else
															for (let t = s; t < this.length; ++t)
																this.setCell(t, e);
														(s &&
															this.getWidth(s - 1) === 2 &&
															this.setCellFromCodepoint(s - 1, 0, 1, e),
															this.getWidth(s) !== 0 ||
																this.hasContent(s) ||
																this.setCellFromCodepoint(s, 0, 1, e));
													}
													replaceCells(s, i, e, t = !1) {
														if (t)
															for (
																s &&
																	this.getWidth(s - 1) === 2 &&
																	!this.isProtected(s - 1) &&
																	this.setCellFromCodepoint(s - 1, 0, 1, e),
																	i < this.length &&
																		this.getWidth(i - 1) === 2 &&
																		!this.isProtected(i) &&
																		this.setCellFromCodepoint(i, 0, 1, e);
																s < i && s < this.length;

															)
																(this.isProtected(s) || this.setCell(s, e),
																	s++);
														else
															for (
																s &&
																	this.getWidth(s - 1) === 2 &&
																	this.setCellFromCodepoint(s - 1, 0, 1, e),
																	i < this.length &&
																		this.getWidth(i - 1) === 2 &&
																		this.setCellFromCodepoint(i, 0, 1, e);
																s < i && s < this.length;

															)
																this.setCell(s++, e);
													}
													resize(s, i) {
														if (s === this.length)
															return (
																4 * this._data.length * 2 <
																this._data.buffer.byteLength
															);
														const e = 3 * s;
														if (s > this.length) {
															if (this._data.buffer.byteLength >= 4 * e)
																this._data = new Uint32Array(
																	this._data.buffer,
																	0,
																	e,
																);
															else {
																const t = new Uint32Array(e);
																(t.set(this._data), (this._data = t));
															}
															for (let t = this.length; t < s; ++t)
																this.setCell(t, i);
														} else {
															this._data = this._data.subarray(0, e);
															const t = Object.keys(this._combined);
															for (let f = 0; f < t.length; f++) {
																const u = parseInt(t[f], 10);
																u >= s && delete this._combined[u];
															}
															const o = Object.keys(this._extendedAttrs);
															for (let f = 0; f < o.length; f++) {
																const u = parseInt(o[f], 10);
																u >= s && delete this._extendedAttrs[u];
															}
														}
														return (
															(this.length = s),
															4 * e * 2 < this._data.buffer.byteLength
														);
													}
													cleanupMemory() {
														if (
															4 * this._data.length * 2 <
															this._data.buffer.byteLength
														) {
															const s = new Uint32Array(this._data.length);
															return (s.set(this._data), (this._data = s), 1);
														}
														return 0;
													}
													fill(s, i = !1) {
														if (i)
															for (let e = 0; e < this.length; ++e)
																this.isProtected(e) || this.setCell(e, s);
														else {
															((this._combined = {}),
																(this._extendedAttrs = {}));
															for (let e = 0; e < this.length; ++e)
																this.setCell(e, s);
														}
													}
													copyFrom(s) {
														(this.length !== s.length
															? (this._data = new Uint32Array(s._data))
															: this._data.set(s._data),
															(this.length = s.length),
															(this._combined = {}));
														for (const i in s._combined)
															this._combined[i] = s._combined[i];
														this._extendedAttrs = {};
														for (const i in s._extendedAttrs)
															this._extendedAttrs[i] = s._extendedAttrs[i];
														this.isWrapped = s.isWrapped;
													}
													clone() {
														const s = new g(0);
														((s._data = new Uint32Array(this._data)),
															(s.length = this.length));
														for (const i in this._combined)
															s._combined[i] = this._combined[i];
														for (const i in this._extendedAttrs)
															s._extendedAttrs[i] = this._extendedAttrs[i];
														return ((s.isWrapped = this.isWrapped), s);
													}
													getTrimmedLength() {
														for (let s = this.length - 1; s >= 0; --s)
															if (4194303 & this._data[3 * s + 0])
																return s + (this._data[3 * s + 0] >> 22);
														return 0;
													}
													getNoBgTrimmedLength() {
														for (let s = this.length - 1; s >= 0; --s)
															if (
																4194303 & this._data[3 * s + 0] ||
																50331648 & this._data[3 * s + 2]
															)
																return s + (this._data[3 * s + 0] >> 22);
														return 0;
													}
													copyCellsFrom(s, i, e, t, o) {
														const f = s._data;
														if (o)
															for (let v = t - 1; v >= 0; v--) {
																for (let c = 0; c < 3; c++)
																	this._data[3 * (e + v) + c] =
																		f[3 * (i + v) + c];
																268435456 & f[3 * (i + v) + 2] &&
																	(this._extendedAttrs[e + v] =
																		s._extendedAttrs[i + v]);
															}
														else
															for (let v = 0; v < t; v++) {
																for (let c = 0; c < 3; c++)
																	this._data[3 * (e + v) + c] =
																		f[3 * (i + v) + c];
																268435456 & f[3 * (i + v) + 2] &&
																	(this._extendedAttrs[e + v] =
																		s._extendedAttrs[i + v]);
															}
														const u = Object.keys(s._combined);
														for (let v = 0; v < u.length; v++) {
															const c = parseInt(u[v], 10);
															c >= i &&
																(this._combined[c - i + e] = s._combined[c]);
														}
													}
													translateToString(s, i, e, t) {
														((i = i ?? 0),
															(e = e ?? this.length),
															s && (e = Math.min(e, this.getTrimmedLength())),
															t && (t.length = 0));
														let o = '';
														for (; i < e; ) {
															const f = this._data[3 * i + 0],
																u = 2097151 & f,
																v =
																	2097152 & f
																		? this._combined[i]
																		: u
																			? (0, d.stringFromCodePoint)(u)
																			: n.WHITESPACE_CELL_CHAR;
															if (((o += v), t))
																for (let c = 0; c < v.length; ++c) t.push(i);
															i += f >> 22 || 1;
														}
														return (t && t.push(i), o);
													}
												}
												r.BufferLine = g;
											},
											4841: (I, r) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.getRangeLength = void 0),
													(r.getRangeLength = function (a, l) {
														if (a.start.y > a.end.y)
															throw new Error(
																`Buffer range end (${a.end.x}, ${a.end.y}) cannot be before start (${a.start.x}, ${a.start.y})`,
															);
														return (
															l * (a.end.y - a.start.y) +
															(a.end.x - a.start.x + 1)
														);
													}));
											},
											4634: (I, r) => {
												function a(l, _, n) {
													if (_ === l.length - 1)
														return l[_].getTrimmedLength();
													const d =
															!l[_].hasContent(n - 1) &&
															l[_].getWidth(n - 1) === 1,
														p = l[_ + 1].getWidth(0) === 2;
													return d && p ? n - 1 : n;
												}
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.getWrappedLineTrimmedLength =
														r.reflowSmallerGetNewLineLengths =
														r.reflowLargerApplyNewLayout =
														r.reflowLargerCreateNewLayout =
														r.reflowLargerGetLinesToRemove =
															void 0),
													(r.reflowLargerGetLinesToRemove = function (
														l,
														_,
														n,
														d,
														p,
													) {
														const g = [];
														for (let h = 0; h < l.length - 1; h++) {
															let s = h,
																i = l.get(++s);
															if (!i.isWrapped) continue;
															const e = [l.get(h)];
															for (; s < l.length && i.isWrapped; )
																(e.push(i), (i = l.get(++s)));
															if (d >= h && d < s) {
																h += e.length - 1;
																continue;
															}
															let t = 0,
																o = a(e, t, _),
																f = 1,
																u = 0;
															for (; f < e.length; ) {
																const c = a(e, f, _),
																	m = c - u,
																	w = n - o,
																	k = Math.min(m, w);
																(e[t].copyCellsFrom(e[f], u, o, k, !1),
																	(o += k),
																	o === n && (t++, (o = 0)),
																	(u += k),
																	u === c && (f++, (u = 0)),
																	o === 0 &&
																		t !== 0 &&
																		e[t - 1].getWidth(n - 1) === 2 &&
																		(e[t].copyCellsFrom(
																			e[t - 1],
																			n - 1,
																			o++,
																			1,
																			!1,
																		),
																		e[t - 1].setCell(n - 1, p)));
															}
															e[t].replaceCells(o, n, p);
															let v = 0;
															for (
																let c = e.length - 1;
																c > 0 &&
																(c > t || e[c].getTrimmedLength() === 0);
																c--
															)
																v++;
															(v > 0 && (g.push(h + e.length - v), g.push(v)),
																(h += e.length - 1));
														}
														return g;
													}),
													(r.reflowLargerCreateNewLayout = function (l, _) {
														const n = [];
														let d = 0,
															p = _[d],
															g = 0;
														for (let h = 0; h < l.length; h++)
															if (p === h) {
																const s = _[++d];
																(l.onDeleteEmitter.fire({
																	index: h - g,
																	amount: s,
																}),
																	(h += s - 1),
																	(g += s),
																	(p = _[++d]));
															} else n.push(h);
														return { layout: n, countRemoved: g };
													}),
													(r.reflowLargerApplyNewLayout = function (l, _) {
														const n = [];
														for (let d = 0; d < _.length; d++)
															n.push(l.get(_[d]));
														for (let d = 0; d < n.length; d++) l.set(d, n[d]);
														l.length = _.length;
													}),
													(r.reflowSmallerGetNewLineLengths = function (
														l,
														_,
														n,
													) {
														const d = [],
															p = l
																.map((i, e) => a(l, e, _))
																.reduce((i, e) => i + e);
														let g = 0,
															h = 0,
															s = 0;
														for (; s < p; ) {
															if (p - s < n) {
																d.push(p - s);
																break;
															}
															g += n;
															const i = a(l, h, _);
															g > i && ((g -= i), h++);
															const e = l[h].getWidth(g - 1) === 2;
															e && g--;
															const t = e ? n - 1 : n;
															(d.push(t), (s += t));
														}
														return d;
													}),
													(r.getWrappedLineTrimmedLength = a));
											},
											5295: (I, r, a) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.BufferSet = void 0));
												const l = a(8460),
													_ = a(844),
													n = a(9092);
												class d extends _.Disposable {
													constructor(g, h) {
														(super(),
															(this._optionsService = g),
															(this._bufferService = h),
															(this._onBufferActivate = this.register(
																new l.EventEmitter(),
															)),
															(this.onBufferActivate =
																this._onBufferActivate.event),
															this.reset(),
															this.register(
																this._optionsService.onSpecificOptionChange(
																	'scrollback',
																	() =>
																		this.resize(
																			this._bufferService.cols,
																			this._bufferService.rows,
																		),
																),
															),
															this.register(
																this._optionsService.onSpecificOptionChange(
																	'tabStopWidth',
																	() => this.setupTabStops(),
																),
															));
													}
													reset() {
														((this._normal = new n.Buffer(
															!0,
															this._optionsService,
															this._bufferService,
														)),
															this._normal.fillViewportRows(),
															(this._alt = new n.Buffer(
																!1,
																this._optionsService,
																this._bufferService,
															)),
															(this._activeBuffer = this._normal),
															this._onBufferActivate.fire({
																activeBuffer: this._normal,
																inactiveBuffer: this._alt,
															}),
															this.setupTabStops());
													}
													get alt() {
														return this._alt;
													}
													get active() {
														return this._activeBuffer;
													}
													get normal() {
														return this._normal;
													}
													activateNormalBuffer() {
														this._activeBuffer !== this._normal &&
															((this._normal.x = this._alt.x),
															(this._normal.y = this._alt.y),
															this._alt.clearAllMarkers(),
															this._alt.clear(),
															(this._activeBuffer = this._normal),
															this._onBufferActivate.fire({
																activeBuffer: this._normal,
																inactiveBuffer: this._alt,
															}));
													}
													activateAltBuffer(g) {
														this._activeBuffer !== this._alt &&
															(this._alt.fillViewportRows(g),
															(this._alt.x = this._normal.x),
															(this._alt.y = this._normal.y),
															(this._activeBuffer = this._alt),
															this._onBufferActivate.fire({
																activeBuffer: this._alt,
																inactiveBuffer: this._normal,
															}));
													}
													resize(g, h) {
														(this._normal.resize(g, h),
															this._alt.resize(g, h),
															this.setupTabStops(g));
													}
													setupTabStops(g) {
														(this._normal.setupTabStops(g),
															this._alt.setupTabStops(g));
													}
												}
												r.BufferSet = d;
											},
											511: (I, r, a) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.CellData = void 0));
												const l = a(482),
													_ = a(643),
													n = a(3734);
												class d extends n.AttributeData {
													constructor() {
														(super(...arguments),
															(this.content = 0),
															(this.fg = 0),
															(this.bg = 0),
															(this.extended = new n.ExtendedAttrs()),
															(this.combinedData = ''));
													}
													static fromCharData(g) {
														const h = new d();
														return (h.setFromCharData(g), h);
													}
													isCombined() {
														return 2097152 & this.content;
													}
													getWidth() {
														return this.content >> 22;
													}
													getChars() {
														return 2097152 & this.content
															? this.combinedData
															: 2097151 & this.content
																? (0, l.stringFromCodePoint)(
																		2097151 & this.content,
																	)
																: '';
													}
													getCode() {
														return this.isCombined()
															? this.combinedData.charCodeAt(
																	this.combinedData.length - 1,
																)
															: 2097151 & this.content;
													}
													setFromCharData(g) {
														((this.fg = g[_.CHAR_DATA_ATTR_INDEX]),
															(this.bg = 0));
														let h = !1;
														if (g[_.CHAR_DATA_CHAR_INDEX].length > 2) h = !0;
														else if (g[_.CHAR_DATA_CHAR_INDEX].length === 2) {
															const s = g[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0);
															if (55296 <= s && s <= 56319) {
																const i =
																	g[_.CHAR_DATA_CHAR_INDEX].charCodeAt(1);
																56320 <= i && i <= 57343
																	? (this.content =
																			(1024 * (s - 55296) + i - 56320 + 65536) |
																			(g[_.CHAR_DATA_WIDTH_INDEX] << 22))
																	: (h = !0);
															} else h = !0;
														} else
															this.content =
																g[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0) |
																(g[_.CHAR_DATA_WIDTH_INDEX] << 22);
														h &&
															((this.combinedData = g[_.CHAR_DATA_CHAR_INDEX]),
															(this.content =
																2097152 | (g[_.CHAR_DATA_WIDTH_INDEX] << 22)));
													}
													getAsCharData() {
														return [
															this.fg,
															this.getChars(),
															this.getWidth(),
															this.getCode(),
														];
													}
												}
												r.CellData = d;
											},
											643: (I, r) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.WHITESPACE_CELL_CODE =
														r.WHITESPACE_CELL_WIDTH =
														r.WHITESPACE_CELL_CHAR =
														r.NULL_CELL_CODE =
														r.NULL_CELL_WIDTH =
														r.NULL_CELL_CHAR =
														r.CHAR_DATA_CODE_INDEX =
														r.CHAR_DATA_WIDTH_INDEX =
														r.CHAR_DATA_CHAR_INDEX =
														r.CHAR_DATA_ATTR_INDEX =
														r.DEFAULT_EXT =
														r.DEFAULT_ATTR =
														r.DEFAULT_COLOR =
															void 0),
													(r.DEFAULT_COLOR = 0),
													(r.DEFAULT_ATTR = 256 | (r.DEFAULT_COLOR << 9)),
													(r.DEFAULT_EXT = 0),
													(r.CHAR_DATA_ATTR_INDEX = 0),
													(r.CHAR_DATA_CHAR_INDEX = 1),
													(r.CHAR_DATA_WIDTH_INDEX = 2),
													(r.CHAR_DATA_CODE_INDEX = 3),
													(r.NULL_CELL_CHAR = ''),
													(r.NULL_CELL_WIDTH = 1),
													(r.NULL_CELL_CODE = 0),
													(r.WHITESPACE_CELL_CHAR = ' '),
													(r.WHITESPACE_CELL_WIDTH = 1),
													(r.WHITESPACE_CELL_CODE = 32));
											},
											4863: (I, r, a) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.Marker = void 0));
												const l = a(8460),
													_ = a(844);
												class n {
													get id() {
														return this._id;
													}
													constructor(p) {
														((this.line = p),
															(this.isDisposed = !1),
															(this._disposables = []),
															(this._id = n._nextId++),
															(this._onDispose = this.register(
																new l.EventEmitter(),
															)),
															(this.onDispose = this._onDispose.event));
													}
													dispose() {
														this.isDisposed ||
															((this.isDisposed = !0),
															(this.line = -1),
															this._onDispose.fire(),
															(0, _.disposeArray)(this._disposables),
															(this._disposables.length = 0));
													}
													register(p) {
														return (this._disposables.push(p), p);
													}
												}
												((r.Marker = n), (n._nextId = 1));
											},
											7116: (I, r) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.DEFAULT_CHARSET = r.CHARSETS = void 0),
													(r.CHARSETS = {}),
													(r.DEFAULT_CHARSET = r.CHARSETS.B),
													(r.CHARSETS[0] = {
														'`': 'â',
														a: 'â',
														b: 'â',
														c: 'â',
														d: 'â',
														e: 'â',
														f: 'Â°',
														g: 'Â±',
														h: 'â¤',
														i: 'â',
														j: 'â',
														k: 'â',
														l: 'â',
														m: 'â',
														n: 'â¼',
														o: 'âº',
														p: 'â»',
														q: 'â',
														r: 'â¼',
														s: 'â½',
														t: 'â',
														u: 'â¤',
														v: 'â´',
														w: 'â¬',
														x: 'â',
														y: 'â¤',
														z: 'â¥',
														'{': 'Ï',
														'|': 'â ',
														'}': 'Â£',
														'~': 'Â·',
													}),
													(r.CHARSETS.A = { '#': 'Â£' }),
													(r.CHARSETS.B = void 0),
													(r.CHARSETS[4] = {
														'#': 'Â£',
														'@': 'Â¾',
														'[': 'ij',
														'\\': 'Â½',
														']': '|',
														'{': 'Â¨',
														'|': 'f',
														'}': 'Â¼',
														'~': 'Â´',
													}),
													(r.CHARSETS.C = r.CHARSETS[5] =
														{
															'[': 'Ã',
															'\\': 'Ã',
															']': 'Ã',
															'^': 'Ã',
															'`': 'Ã©',
															'{': 'Ã¤',
															'|': 'Ã¶',
															'}': 'Ã¥',
															'~': 'Ã¼',
														}),
													(r.CHARSETS.R = {
														'#': 'Â£',
														'@': 'Ã ',
														'[': 'Â°',
														'\\': 'Ã§',
														']': 'Â§',
														'{': 'Ã©',
														'|': 'Ã¹',
														'}': 'Ã¨',
														'~': 'Â¨',
													}),
													(r.CHARSETS.Q = {
														'@': 'Ã ',
														'[': 'Ã¢',
														'\\': 'Ã§',
														']': 'Ãª',
														'^': 'Ã®',
														'`': 'Ã´',
														'{': 'Ã©',
														'|': 'Ã¹',
														'}': 'Ã¨',
														'~': 'Ã»',
													}),
													(r.CHARSETS.K = {
														'@': 'Â§',
														'[': 'Ã',
														'\\': 'Ã',
														']': 'Ã',
														'{': 'Ã¤',
														'|': 'Ã¶',
														'}': 'Ã¼',
														'~': 'Ã',
													}),
													(r.CHARSETS.Y = {
														'#': 'Â£',
														'@': 'Â§',
														'[': 'Â°',
														'\\': 'Ã§',
														']': 'Ã©',
														'`': 'Ã¹',
														'{': 'Ã ',
														'|': 'Ã²',
														'}': 'Ã¨',
														'~': 'Ã¬',
													}),
													(r.CHARSETS.E = r.CHARSETS[6] =
														{
															'@': 'Ã',
															'[': 'Ã',
															'\\': 'Ã',
															']': 'Ã',
															'^': 'Ã',
															'`': 'Ã¤',
															'{': 'Ã¦',
															'|': 'Ã¸',
															'}': 'Ã¥',
															'~': 'Ã¼',
														}),
													(r.CHARSETS.Z = {
														'#': 'Â£',
														'@': 'Â§',
														'[': 'Â¡',
														'\\': 'Ã',
														']': 'Â¿',
														'{': 'Â°',
														'|': 'Ã±',
														'}': 'Ã§',
													}),
													(r.CHARSETS.H = r.CHARSETS[7] =
														{
															'@': 'Ã',
															'[': 'Ã',
															'\\': 'Ã',
															']': 'Ã',
															'^': 'Ã',
															'`': 'Ã©',
															'{': 'Ã¤',
															'|': 'Ã¶',
															'}': 'Ã¥',
															'~': 'Ã¼',
														}),
													(r.CHARSETS['='] = {
														'#': 'Ã¹',
														'@': 'Ã ',
														'[': 'Ã©',
														'\\': 'Ã§',
														']': 'Ãª',
														'^': 'Ã®',
														_: 'Ã¨',
														'`': 'Ã´',
														'{': 'Ã¤',
														'|': 'Ã¶',
														'}': 'Ã¼',
														'~': 'Ã»',
													}));
											},
											2584: (I, r) => {
												var a, l, _;
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.C1_ESCAPED = r.C1 = r.C0 = void 0),
													(function (n) {
														((n.NUL = '\0'),
															(n.SOH = ''),
															(n.STX = ''),
															(n.ETX = ''),
															(n.EOT = ''),
															(n.ENQ = ''),
															(n.ACK = ''),
															(n.BEL = '\x07'),
															(n.BS = '\b'),
															(n.HT = '	'),
															(n.LF = `
`),
															(n.VT = '\v'),
															(n.FF = '\f'),
															(n.CR = '\r'),
															(n.SO = ''),
															(n.SI = ''),
															(n.DLE = ''),
															(n.DC1 = ''),
															(n.DC2 = ''),
															(n.DC3 = ''),
															(n.DC4 = ''),
															(n.NAK = ''),
															(n.SYN = ''),
															(n.ETB = ''),
															(n.CAN = ''),
															(n.EM = ''),
															(n.SUB = ''),
															(n.ESC = '\x1B'),
															(n.FS = ''),
															(n.GS = ''),
															(n.RS = ''),
															(n.US = ''),
															(n.SP = ' '),
															(n.DEL = ''));
													})(a || (r.C0 = a = {})),
													(function (n) {
														((n.PAD = 'Â'),
															(n.HOP = 'Â'),
															(n.BPH = 'Â'),
															(n.NBH = 'Â'),
															(n.IND = 'Â'),
															(n.NEL = 'Â'),
															(n.SSA = 'Â'),
															(n.ESA = 'Â'),
															(n.HTS = 'Â'),
															(n.HTJ = 'Â'),
															(n.VTS = 'Â'),
															(n.PLD = 'Â'),
															(n.PLU = 'Â'),
															(n.RI = 'Â'),
															(n.SS2 = 'Â'),
															(n.SS3 = 'Â'),
															(n.DCS = 'Â'),
															(n.PU1 = 'Â'),
															(n.PU2 = 'Â'),
															(n.STS = 'Â'),
															(n.CCH = 'Â'),
															(n.MW = 'Â'),
															(n.SPA = 'Â'),
															(n.EPA = 'Â'),
															(n.SOS = 'Â'),
															(n.SGCI = 'Â'),
															(n.SCI = 'Â'),
															(n.CSI = 'Â'),
															(n.ST = 'Â'),
															(n.OSC = 'Â'),
															(n.PM = 'Â'),
															(n.APC = 'Â'));
													})(l || (r.C1 = l = {})),
													(function (n) {
														n.ST = `${a.ESC}\\`;
													})(_ || (r.C1_ESCAPED = _ = {})));
											},
											7399: (I, r, a) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.evaluateKeyboardEvent = void 0));
												const l = a(2584),
													_ = {
														48: ['0', ')'],
														49: ['1', '!'],
														50: ['2', '@'],
														51: ['3', '#'],
														52: ['4', '$'],
														53: ['5', '%'],
														54: ['6', '^'],
														55: ['7', '&'],
														56: ['8', '*'],
														57: ['9', '('],
														186: [';', ':'],
														187: ['=', '+'],
														188: [',', '<'],
														189: ['-', '_'],
														190: ['.', '>'],
														191: ['/', '?'],
														192: ['`', '~'],
														219: ['[', '{'],
														220: ['\\', '|'],
														221: [']', '}'],
														222: ["'", '"'],
													};
												r.evaluateKeyboardEvent = function (n, d, p, g) {
													const h = { type: 0, cancel: !1, key: void 0 },
														s =
															(n.shiftKey ? 1 : 0) |
															(n.altKey ? 2 : 0) |
															(n.ctrlKey ? 4 : 0) |
															(n.metaKey ? 8 : 0);
													switch (n.keyCode) {
														case 0:
															n.key === 'UIKeyInputUpArrow'
																? (h.key = d
																		? l.C0.ESC + 'OA'
																		: l.C0.ESC + '[A')
																: n.key === 'UIKeyInputLeftArrow'
																	? (h.key = d
																			? l.C0.ESC + 'OD'
																			: l.C0.ESC + '[D')
																	: n.key === 'UIKeyInputRightArrow'
																		? (h.key = d
																				? l.C0.ESC + 'OC'
																				: l.C0.ESC + '[C')
																		: n.key === 'UIKeyInputDownArrow' &&
																			(h.key = d
																				? l.C0.ESC + 'OB'
																				: l.C0.ESC + '[B');
															break;
														case 8:
															((h.key = n.ctrlKey ? '\b' : l.C0.DEL),
																n.altKey && (h.key = l.C0.ESC + h.key));
															break;
														case 9:
															if (n.shiftKey) {
																h.key = l.C0.ESC + '[Z';
																break;
															}
															((h.key = l.C0.HT), (h.cancel = !0));
															break;
														case 13:
															((h.key = n.altKey
																? l.C0.ESC + l.C0.CR
																: l.C0.CR),
																(h.cancel = !0));
															break;
														case 27:
															((h.key = l.C0.ESC),
																n.altKey && (h.key = l.C0.ESC + l.C0.ESC),
																(h.cancel = !0));
															break;
														case 37:
															if (n.metaKey) break;
															s
																? ((h.key = l.C0.ESC + '[1;' + (s + 1) + 'D'),
																	h.key === l.C0.ESC + '[1;3D' &&
																		(h.key = l.C0.ESC + (p ? 'b' : '[1;5D')))
																: (h.key = d
																		? l.C0.ESC + 'OD'
																		: l.C0.ESC + '[D');
															break;
														case 39:
															if (n.metaKey) break;
															s
																? ((h.key = l.C0.ESC + '[1;' + (s + 1) + 'C'),
																	h.key === l.C0.ESC + '[1;3C' &&
																		(h.key = l.C0.ESC + (p ? 'f' : '[1;5C')))
																: (h.key = d
																		? l.C0.ESC + 'OC'
																		: l.C0.ESC + '[C');
															break;
														case 38:
															if (n.metaKey) break;
															s
																? ((h.key = l.C0.ESC + '[1;' + (s + 1) + 'A'),
																	p ||
																		h.key !== l.C0.ESC + '[1;3A' ||
																		(h.key = l.C0.ESC + '[1;5A'))
																: (h.key = d
																		? l.C0.ESC + 'OA'
																		: l.C0.ESC + '[A');
															break;
														case 40:
															if (n.metaKey) break;
															s
																? ((h.key = l.C0.ESC + '[1;' + (s + 1) + 'B'),
																	p ||
																		h.key !== l.C0.ESC + '[1;3B' ||
																		(h.key = l.C0.ESC + '[1;5B'))
																: (h.key = d
																		? l.C0.ESC + 'OB'
																		: l.C0.ESC + '[B');
															break;
														case 45:
															n.shiftKey ||
																n.ctrlKey ||
																(h.key = l.C0.ESC + '[2~');
															break;
														case 46:
															h.key = s
																? l.C0.ESC + '[3;' + (s + 1) + '~'
																: l.C0.ESC + '[3~';
															break;
														case 36:
															h.key = s
																? l.C0.ESC + '[1;' + (s + 1) + 'H'
																: d
																	? l.C0.ESC + 'OH'
																	: l.C0.ESC + '[H';
															break;
														case 35:
															h.key = s
																? l.C0.ESC + '[1;' + (s + 1) + 'F'
																: d
																	? l.C0.ESC + 'OF'
																	: l.C0.ESC + '[F';
															break;
														case 33:
															n.shiftKey
																? (h.type = 2)
																: n.ctrlKey
																	? (h.key = l.C0.ESC + '[5;' + (s + 1) + '~')
																	: (h.key = l.C0.ESC + '[5~');
															break;
														case 34:
															n.shiftKey
																? (h.type = 3)
																: n.ctrlKey
																	? (h.key = l.C0.ESC + '[6;' + (s + 1) + '~')
																	: (h.key = l.C0.ESC + '[6~');
															break;
														case 112:
															h.key = s
																? l.C0.ESC + '[1;' + (s + 1) + 'P'
																: l.C0.ESC + 'OP';
															break;
														case 113:
															h.key = s
																? l.C0.ESC + '[1;' + (s + 1) + 'Q'
																: l.C0.ESC + 'OQ';
															break;
														case 114:
															h.key = s
																? l.C0.ESC + '[1;' + (s + 1) + 'R'
																: l.C0.ESC + 'OR';
															break;
														case 115:
															h.key = s
																? l.C0.ESC + '[1;' + (s + 1) + 'S'
																: l.C0.ESC + 'OS';
															break;
														case 116:
															h.key = s
																? l.C0.ESC + '[15;' + (s + 1) + '~'
																: l.C0.ESC + '[15~';
															break;
														case 117:
															h.key = s
																? l.C0.ESC + '[17;' + (s + 1) + '~'
																: l.C0.ESC + '[17~';
															break;
														case 118:
															h.key = s
																? l.C0.ESC + '[18;' + (s + 1) + '~'
																: l.C0.ESC + '[18~';
															break;
														case 119:
															h.key = s
																? l.C0.ESC + '[19;' + (s + 1) + '~'
																: l.C0.ESC + '[19~';
															break;
														case 120:
															h.key = s
																? l.C0.ESC + '[20;' + (s + 1) + '~'
																: l.C0.ESC + '[20~';
															break;
														case 121:
															h.key = s
																? l.C0.ESC + '[21;' + (s + 1) + '~'
																: l.C0.ESC + '[21~';
															break;
														case 122:
															h.key = s
																? l.C0.ESC + '[23;' + (s + 1) + '~'
																: l.C0.ESC + '[23~';
															break;
														case 123:
															h.key = s
																? l.C0.ESC + '[24;' + (s + 1) + '~'
																: l.C0.ESC + '[24~';
															break;
														default:
															if (
																!n.ctrlKey ||
																n.shiftKey ||
																n.altKey ||
																n.metaKey
															)
																if ((p && !g) || !n.altKey || n.metaKey)
																	!p ||
																	n.altKey ||
																	n.ctrlKey ||
																	n.shiftKey ||
																	!n.metaKey
																		? n.key &&
																			!n.ctrlKey &&
																			!n.altKey &&
																			!n.metaKey &&
																			n.keyCode >= 48 &&
																			n.key.length === 1
																			? (h.key = n.key)
																			: n.key &&
																				n.ctrlKey &&
																				(n.key === '_' && (h.key = l.C0.US),
																				n.key === '@' && (h.key = l.C0.NUL))
																		: n.keyCode === 65 && (h.type = 1);
																else {
																	const i = _[n.keyCode],
																		e =
																			i == null
																				? void 0
																				: i[n.shiftKey ? 1 : 0];
																	if (e) h.key = l.C0.ESC + e;
																	else if (n.keyCode >= 65 && n.keyCode <= 90) {
																		const t = n.ctrlKey
																			? n.keyCode - 64
																			: n.keyCode + 32;
																		let o = String.fromCharCode(t);
																		(n.shiftKey && (o = o.toUpperCase()),
																			(h.key = l.C0.ESC + o));
																	} else if (n.keyCode === 32)
																		h.key =
																			l.C0.ESC + (n.ctrlKey ? l.C0.NUL : ' ');
																	else if (
																		n.key === 'Dead' &&
																		n.code.startsWith('Key')
																	) {
																		let t = n.code.slice(3, 4);
																		(n.shiftKey || (t = t.toLowerCase()),
																			(h.key = l.C0.ESC + t),
																			(h.cancel = !0));
																	}
																}
															else
																n.keyCode >= 65 && n.keyCode <= 90
																	? (h.key = String.fromCharCode(
																			n.keyCode - 64,
																		))
																	: n.keyCode === 32
																		? (h.key = l.C0.NUL)
																		: n.keyCode >= 51 && n.keyCode <= 55
																			? (h.key = String.fromCharCode(
																					n.keyCode - 51 + 27,
																				))
																			: n.keyCode === 56
																				? (h.key = l.C0.DEL)
																				: n.keyCode === 219
																					? (h.key = l.C0.ESC)
																					: n.keyCode === 220
																						? (h.key = l.C0.FS)
																						: n.keyCode === 221 &&
																							(h.key = l.C0.GS);
													}
													return h;
												};
											},
											482: (I, r) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.Utf8ToUtf32 =
														r.StringToUtf32 =
														r.utf32ToString =
														r.stringFromCodePoint =
															void 0),
													(r.stringFromCodePoint = function (a) {
														return a > 65535
															? ((a -= 65536),
																String.fromCharCode(55296 + (a >> 10)) +
																	String.fromCharCode((a % 1024) + 56320))
															: String.fromCharCode(a);
													}),
													(r.utf32ToString = function (a, l = 0, _ = a.length) {
														let n = '';
														for (let d = l; d < _; ++d) {
															let p = a[d];
															p > 65535
																? ((p -= 65536),
																	(n +=
																		String.fromCharCode(55296 + (p >> 10)) +
																		String.fromCharCode((p % 1024) + 56320)))
																: (n += String.fromCharCode(p));
														}
														return n;
													}),
													(r.StringToUtf32 = class {
														constructor() {
															this._interim = 0;
														}
														clear() {
															this._interim = 0;
														}
														decode(a, l) {
															const _ = a.length;
															if (!_) return 0;
															let n = 0,
																d = 0;
															if (this._interim) {
																const p = a.charCodeAt(d++);
																(56320 <= p && p <= 57343
																	? (l[n++] =
																			1024 * (this._interim - 55296) +
																			p -
																			56320 +
																			65536)
																	: ((l[n++] = this._interim), (l[n++] = p)),
																	(this._interim = 0));
															}
															for (let p = d; p < _; ++p) {
																const g = a.charCodeAt(p);
																if (55296 <= g && g <= 56319) {
																	if (++p >= _) return ((this._interim = g), n);
																	const h = a.charCodeAt(p);
																	56320 <= h && h <= 57343
																		? (l[n++] =
																				1024 * (g - 55296) + h - 56320 + 65536)
																		: ((l[n++] = g), (l[n++] = h));
																} else g !== 65279 && (l[n++] = g);
															}
															return n;
														}
													}),
													(r.Utf8ToUtf32 = class {
														constructor() {
															this.interim = new Uint8Array(3);
														}
														clear() {
															this.interim.fill(0);
														}
														decode(a, l) {
															const _ = a.length;
															if (!_) return 0;
															let n,
																d,
																p,
																g,
																h = 0,
																s = 0,
																i = 0;
															if (this.interim[0]) {
																let o = !1,
																	f = this.interim[0];
																f &=
																	(224 & f) == 192
																		? 31
																		: (240 & f) == 224
																			? 15
																			: 7;
																let u,
																	v = 0;
																for (; (u = 63 & this.interim[++v]) && v < 4; )
																	((f <<= 6), (f |= u));
																const c =
																		(224 & this.interim[0]) == 192
																			? 2
																			: (240 & this.interim[0]) == 224
																				? 3
																				: 4,
																	m = c - v;
																for (; i < m; ) {
																	if (i >= _) return 0;
																	if (((u = a[i++]), (192 & u) != 128)) {
																		(i--, (o = !0));
																		break;
																	}
																	((this.interim[v++] = u),
																		(f <<= 6),
																		(f |= 63 & u));
																}
																(o ||
																	(c === 2
																		? f < 128
																			? i--
																			: (l[h++] = f)
																		: c === 3
																			? f < 2048 ||
																				(f >= 55296 && f <= 57343) ||
																				f === 65279 ||
																				(l[h++] = f)
																			: f < 65536 ||
																				f > 1114111 ||
																				(l[h++] = f)),
																	this.interim.fill(0));
															}
															const e = _ - 4;
															let t = i;
															for (; t < _; ) {
																for (
																	;
																	!(
																		!(t < e) ||
																		128 & (n = a[t]) ||
																		128 & (d = a[t + 1]) ||
																		128 & (p = a[t + 2]) ||
																		128 & (g = a[t + 3])
																	);

																)
																	((l[h++] = n),
																		(l[h++] = d),
																		(l[h++] = p),
																		(l[h++] = g),
																		(t += 4));
																if (((n = a[t++]), n < 128)) l[h++] = n;
																else if ((224 & n) == 192) {
																	if (t >= _) return ((this.interim[0] = n), h);
																	if (((d = a[t++]), (192 & d) != 128)) {
																		t--;
																		continue;
																	}
																	if (
																		((s = ((31 & n) << 6) | (63 & d)), s < 128)
																	) {
																		t--;
																		continue;
																	}
																	l[h++] = s;
																} else if ((240 & n) == 224) {
																	if (t >= _) return ((this.interim[0] = n), h);
																	if (((d = a[t++]), (192 & d) != 128)) {
																		t--;
																		continue;
																	}
																	if (t >= _)
																		return (
																			(this.interim[0] = n),
																			(this.interim[1] = d),
																			h
																		);
																	if (((p = a[t++]), (192 & p) != 128)) {
																		t--;
																		continue;
																	}
																	if (
																		((s =
																			((15 & n) << 12) |
																			((63 & d) << 6) |
																			(63 & p)),
																		s < 2048 ||
																			(s >= 55296 && s <= 57343) ||
																			s === 65279)
																	)
																		continue;
																	l[h++] = s;
																} else if ((248 & n) == 240) {
																	if (t >= _) return ((this.interim[0] = n), h);
																	if (((d = a[t++]), (192 & d) != 128)) {
																		t--;
																		continue;
																	}
																	if (t >= _)
																		return (
																			(this.interim[0] = n),
																			(this.interim[1] = d),
																			h
																		);
																	if (((p = a[t++]), (192 & p) != 128)) {
																		t--;
																		continue;
																	}
																	if (t >= _)
																		return (
																			(this.interim[0] = n),
																			(this.interim[1] = d),
																			(this.interim[2] = p),
																			h
																		);
																	if (((g = a[t++]), (192 & g) != 128)) {
																		t--;
																		continue;
																	}
																	if (
																		((s =
																			((7 & n) << 18) |
																			((63 & d) << 12) |
																			((63 & p) << 6) |
																			(63 & g)),
																		s < 65536 || s > 1114111)
																	)
																		continue;
																	l[h++] = s;
																}
															}
															return h;
														}
													}));
											},
											225: (I, r, a) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.UnicodeV6 = void 0));
												const l = a(1480),
													_ = [
														[768, 879],
														[1155, 1158],
														[1160, 1161],
														[1425, 1469],
														[1471, 1471],
														[1473, 1474],
														[1476, 1477],
														[1479, 1479],
														[1536, 1539],
														[1552, 1557],
														[1611, 1630],
														[1648, 1648],
														[1750, 1764],
														[1767, 1768],
														[1770, 1773],
														[1807, 1807],
														[1809, 1809],
														[1840, 1866],
														[1958, 1968],
														[2027, 2035],
														[2305, 2306],
														[2364, 2364],
														[2369, 2376],
														[2381, 2381],
														[2385, 2388],
														[2402, 2403],
														[2433, 2433],
														[2492, 2492],
														[2497, 2500],
														[2509, 2509],
														[2530, 2531],
														[2561, 2562],
														[2620, 2620],
														[2625, 2626],
														[2631, 2632],
														[2635, 2637],
														[2672, 2673],
														[2689, 2690],
														[2748, 2748],
														[2753, 2757],
														[2759, 2760],
														[2765, 2765],
														[2786, 2787],
														[2817, 2817],
														[2876, 2876],
														[2879, 2879],
														[2881, 2883],
														[2893, 2893],
														[2902, 2902],
														[2946, 2946],
														[3008, 3008],
														[3021, 3021],
														[3134, 3136],
														[3142, 3144],
														[3146, 3149],
														[3157, 3158],
														[3260, 3260],
														[3263, 3263],
														[3270, 3270],
														[3276, 3277],
														[3298, 3299],
														[3393, 3395],
														[3405, 3405],
														[3530, 3530],
														[3538, 3540],
														[3542, 3542],
														[3633, 3633],
														[3636, 3642],
														[3655, 3662],
														[3761, 3761],
														[3764, 3769],
														[3771, 3772],
														[3784, 3789],
														[3864, 3865],
														[3893, 3893],
														[3895, 3895],
														[3897, 3897],
														[3953, 3966],
														[3968, 3972],
														[3974, 3975],
														[3984, 3991],
														[3993, 4028],
														[4038, 4038],
														[4141, 4144],
														[4146, 4146],
														[4150, 4151],
														[4153, 4153],
														[4184, 4185],
														[4448, 4607],
														[4959, 4959],
														[5906, 5908],
														[5938, 5940],
														[5970, 5971],
														[6002, 6003],
														[6068, 6069],
														[6071, 6077],
														[6086, 6086],
														[6089, 6099],
														[6109, 6109],
														[6155, 6157],
														[6313, 6313],
														[6432, 6434],
														[6439, 6440],
														[6450, 6450],
														[6457, 6459],
														[6679, 6680],
														[6912, 6915],
														[6964, 6964],
														[6966, 6970],
														[6972, 6972],
														[6978, 6978],
														[7019, 7027],
														[7616, 7626],
														[7678, 7679],
														[8203, 8207],
														[8234, 8238],
														[8288, 8291],
														[8298, 8303],
														[8400, 8431],
														[12330, 12335],
														[12441, 12442],
														[43014, 43014],
														[43019, 43019],
														[43045, 43046],
														[64286, 64286],
														[65024, 65039],
														[65056, 65059],
														[65279, 65279],
														[65529, 65531],
													],
													n = [
														[68097, 68099],
														[68101, 68102],
														[68108, 68111],
														[68152, 68154],
														[68159, 68159],
														[119143, 119145],
														[119155, 119170],
														[119173, 119179],
														[119210, 119213],
														[119362, 119364],
														[917505, 917505],
														[917536, 917631],
														[917760, 917999],
													];
												let d;
												r.UnicodeV6 = class {
													constructor() {
														if (((this.version = '6'), !d)) {
															((d = new Uint8Array(65536)),
																d.fill(1),
																(d[0] = 0),
																d.fill(0, 1, 32),
																d.fill(0, 127, 160),
																d.fill(2, 4352, 4448),
																(d[9001] = 2),
																(d[9002] = 2),
																d.fill(2, 11904, 42192),
																(d[12351] = 1),
																d.fill(2, 44032, 55204),
																d.fill(2, 63744, 64256),
																d.fill(2, 65040, 65050),
																d.fill(2, 65072, 65136),
																d.fill(2, 65280, 65377),
																d.fill(2, 65504, 65511));
															for (let p = 0; p < _.length; ++p)
																d.fill(0, _[p][0], _[p][1] + 1);
														}
													}
													wcwidth(p) {
														return p < 32
															? 0
															: p < 127
																? 1
																: p < 65536
																	? d[p]
																	: (function (g, h) {
																				let s,
																					i = 0,
																					e = h.length - 1;
																				if (g < h[0][0] || g > h[e][1])
																					return !1;
																				for (; e >= i; )
																					if (((s = (i + e) >> 1), g > h[s][1]))
																						i = s + 1;
																					else {
																						if (!(g < h[s][0])) return !0;
																						e = s - 1;
																					}
																				return !1;
																		  })(p, n)
																		? 0
																		: (p >= 131072 && p <= 196605) ||
																			  (p >= 196608 && p <= 262141)
																			? 2
																			: 1;
													}
													charProperties(p, g) {
														let h = this.wcwidth(p),
															s = h === 0 && g !== 0;
														if (s) {
															const i = l.UnicodeService.extractWidth(g);
															i === 0 ? (s = !1) : i > h && (h = i);
														}
														return l.UnicodeService.createPropertyValue(
															0,
															h,
															s,
														);
													}
												};
											},
											5981: (I, r, a) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.WriteBuffer = void 0));
												const l = a(8460),
													_ = a(844);
												class n extends _.Disposable {
													constructor(p) {
														(super(),
															(this._action = p),
															(this._writeBuffer = []),
															(this._callbacks = []),
															(this._pendingData = 0),
															(this._bufferOffset = 0),
															(this._isSyncWriting = !1),
															(this._syncCalls = 0),
															(this._didUserInput = !1),
															(this._onWriteParsed = this.register(
																new l.EventEmitter(),
															)),
															(this.onWriteParsed = this._onWriteParsed.event));
													}
													handleUserInput() {
														this._didUserInput = !0;
													}
													writeSync(p, g) {
														if (g !== void 0 && this._syncCalls > g)
															return void (this._syncCalls = 0);
														if (
															((this._pendingData += p.length),
															this._writeBuffer.push(p),
															this._callbacks.push(void 0),
															this._syncCalls++,
															this._isSyncWriting)
														)
															return;
														let h;
														for (
															this._isSyncWriting = !0;
															(h = this._writeBuffer.shift());

														) {
															this._action(h);
															const s = this._callbacks.shift();
															s && s();
														}
														((this._pendingData = 0),
															(this._bufferOffset = 2147483647),
															(this._isSyncWriting = !1),
															(this._syncCalls = 0));
													}
													write(p, g) {
														if (this._pendingData > 5e7)
															throw new Error(
																'write data discarded, use flow control to avoid losing data',
															);
														if (!this._writeBuffer.length) {
															if (
																((this._bufferOffset = 0), this._didUserInput)
															)
																return (
																	(this._didUserInput = !1),
																	(this._pendingData += p.length),
																	this._writeBuffer.push(p),
																	this._callbacks.push(g),
																	void this._innerWrite()
																);
															setTimeout(() => this._innerWrite());
														}
														((this._pendingData += p.length),
															this._writeBuffer.push(p),
															this._callbacks.push(g));
													}
													_innerWrite(p = 0, g = !0) {
														const h = p || Date.now();
														for (
															;
															this._writeBuffer.length > this._bufferOffset;

														) {
															const s = this._writeBuffer[this._bufferOffset],
																i = this._action(s, g);
															if (i) {
																const t = (o) =>
																	Date.now() - h >= 12
																		? setTimeout(() => this._innerWrite(0, o))
																		: this._innerWrite(h, o);
																return void i
																	.catch(
																		(o) => (
																			queueMicrotask(() => {
																				throw o;
																			}),
																			Promise.resolve(!1)
																		),
																	)
																	.then(t);
															}
															const e = this._callbacks[this._bufferOffset];
															if (
																(e && e(),
																this._bufferOffset++,
																(this._pendingData -= s.length),
																Date.now() - h >= 12)
															)
																break;
														}
														(this._writeBuffer.length > this._bufferOffset
															? (this._bufferOffset > 50 &&
																	((this._writeBuffer = this._writeBuffer.slice(
																		this._bufferOffset,
																	)),
																	(this._callbacks = this._callbacks.slice(
																		this._bufferOffset,
																	)),
																	(this._bufferOffset = 0)),
																setTimeout(() => this._innerWrite()))
															: ((this._writeBuffer.length = 0),
																(this._callbacks.length = 0),
																(this._pendingData = 0),
																(this._bufferOffset = 0)),
															this._onWriteParsed.fire());
													}
												}
												r.WriteBuffer = n;
											},
											5941: (I, r) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.toRgbString = r.parseColor = void 0));
												const a =
														/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,
													l = /^[\da-f]+$/;
												function _(n, d) {
													const p = n.toString(16),
														g = p.length < 2 ? '0' + p : p;
													switch (d) {
														case 4:
															return p[0];
														case 8:
															return g;
														case 12:
															return (g + g).slice(0, 3);
														default:
															return g + g;
													}
												}
												((r.parseColor = function (n) {
													if (!n) return;
													let d = n.toLowerCase();
													if (d.indexOf('rgb:') === 0) {
														d = d.slice(4);
														const p = a.exec(d);
														if (p) {
															const g = p[1]
																? 15
																: p[4]
																	? 255
																	: p[7]
																		? 4095
																		: 65535;
															return [
																Math.round(
																	(parseInt(p[1] || p[4] || p[7] || p[10], 16) /
																		g) *
																		255,
																),
																Math.round(
																	(parseInt(p[2] || p[5] || p[8] || p[11], 16) /
																		g) *
																		255,
																),
																Math.round(
																	(parseInt(p[3] || p[6] || p[9] || p[12], 16) /
																		g) *
																		255,
																),
															];
														}
													} else if (
														d.indexOf('#') === 0 &&
														((d = d.slice(1)),
														l.exec(d) && [3, 6, 9, 12].includes(d.length))
													) {
														const p = d.length / 3,
															g = [0, 0, 0];
														for (let h = 0; h < 3; ++h) {
															const s = parseInt(d.slice(p * h, p * h + p), 16);
															g[h] =
																p === 1
																	? s << 4
																	: p === 2
																		? s
																		: p === 3
																			? s >> 4
																			: s >> 8;
														}
														return g;
													}
												}),
													(r.toRgbString = function (n, d = 16) {
														const [p, g, h] = n;
														return `rgb:${_(p, d)}/${_(g, d)}/${_(h, d)}`;
													}));
											},
											5770: (I, r) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.PAYLOAD_LIMIT = void 0),
													(r.PAYLOAD_LIMIT = 1e7));
											},
											6351: (I, r, a) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.DcsHandler = r.DcsParser = void 0));
												const l = a(482),
													_ = a(8742),
													n = a(5770),
													d = [];
												r.DcsParser = class {
													constructor() {
														((this._handlers = Object.create(null)),
															(this._active = d),
															(this._ident = 0),
															(this._handlerFb = () => {}),
															(this._stack = {
																paused: !1,
																loopPosition: 0,
																fallThrough: !1,
															}));
													}
													dispose() {
														((this._handlers = Object.create(null)),
															(this._handlerFb = () => {}),
															(this._active = d));
													}
													registerHandler(g, h) {
														this._handlers[g] === void 0 &&
															(this._handlers[g] = []);
														const s = this._handlers[g];
														return (
															s.push(h),
															{
																dispose: () => {
																	const i = s.indexOf(h);
																	i !== -1 && s.splice(i, 1);
																},
															}
														);
													}
													clearHandler(g) {
														this._handlers[g] && delete this._handlers[g];
													}
													setHandlerFallback(g) {
														this._handlerFb = g;
													}
													reset() {
														if (this._active.length)
															for (
																let g = this._stack.paused
																	? this._stack.loopPosition - 1
																	: this._active.length - 1;
																g >= 0;
																--g
															)
																this._active[g].unhook(!1);
														((this._stack.paused = !1),
															(this._active = d),
															(this._ident = 0));
													}
													hook(g, h) {
														if (
															(this.reset(),
															(this._ident = g),
															(this._active = this._handlers[g] || d),
															this._active.length)
														)
															for (let s = this._active.length - 1; s >= 0; s--)
																this._active[s].hook(h);
														else this._handlerFb(this._ident, 'HOOK', h);
													}
													put(g, h, s) {
														if (this._active.length)
															for (let i = this._active.length - 1; i >= 0; i--)
																this._active[i].put(g, h, s);
														else
															this._handlerFb(
																this._ident,
																'PUT',
																(0, l.utf32ToString)(g, h, s),
															);
													}
													unhook(g, h = !0) {
														if (this._active.length) {
															let s = !1,
																i = this._active.length - 1,
																e = !1;
															if (
																(this._stack.paused &&
																	((i = this._stack.loopPosition - 1),
																	(s = h),
																	(e = this._stack.fallThrough),
																	(this._stack.paused = !1)),
																!e && s === !1)
															) {
																for (
																	;
																	i >= 0 &&
																	((s = this._active[i].unhook(g)), s !== !0);
																	i--
																)
																	if (s instanceof Promise)
																		return (
																			(this._stack.paused = !0),
																			(this._stack.loopPosition = i),
																			(this._stack.fallThrough = !1),
																			s
																		);
																i--;
															}
															for (; i >= 0; i--)
																if (
																	((s = this._active[i].unhook(!1)),
																	s instanceof Promise)
																)
																	return (
																		(this._stack.paused = !0),
																		(this._stack.loopPosition = i),
																		(this._stack.fallThrough = !0),
																		s
																	);
														} else this._handlerFb(this._ident, 'UNHOOK', g);
														((this._active = d), (this._ident = 0));
													}
												};
												const p = new _.Params();
												(p.addParam(0),
													(r.DcsHandler = class {
														constructor(g) {
															((this._handler = g),
																(this._data = ''),
																(this._params = p),
																(this._hitLimit = !1));
														}
														hook(g) {
															((this._params =
																g.length > 1 || g.params[0] ? g.clone() : p),
																(this._data = ''),
																(this._hitLimit = !1));
														}
														put(g, h, s) {
															this._hitLimit ||
																((this._data += (0, l.utf32ToString)(g, h, s)),
																this._data.length > n.PAYLOAD_LIMIT &&
																	((this._data = ''), (this._hitLimit = !0)));
														}
														unhook(g) {
															let h = !1;
															if (this._hitLimit) h = !1;
															else if (
																g &&
																((h = this._handler(this._data, this._params)),
																h instanceof Promise)
															)
																return h.then(
																	(s) => (
																		(this._params = p),
																		(this._data = ''),
																		(this._hitLimit = !1),
																		s
																	),
																);
															return (
																(this._params = p),
																(this._data = ''),
																(this._hitLimit = !1),
																h
															);
														}
													}));
											},
											2015: (I, r, a) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.EscapeSequenceParser =
														r.VT500_TRANSITION_TABLE =
														r.TransitionTable =
															void 0));
												const l = a(844),
													_ = a(8742),
													n = a(6242),
													d = a(6351);
												class p {
													constructor(i) {
														this.table = new Uint8Array(i);
													}
													setDefault(i, e) {
														this.table.fill((i << 4) | e);
													}
													add(i, e, t, o) {
														this.table[(e << 8) | i] = (t << 4) | o;
													}
													addMany(i, e, t, o) {
														for (let f = 0; f < i.length; f++)
															this.table[(e << 8) | i[f]] = (t << 4) | o;
													}
												}
												r.TransitionTable = p;
												const g = 160;
												r.VT500_TRANSITION_TABLE = (function () {
													const s = new p(4095),
														i = Array.apply(null, Array(256)).map((v, c) => c),
														e = (v, c) => i.slice(v, c),
														t = e(32, 127),
														o = e(0, 24);
													(o.push(25), o.push.apply(o, e(28, 32)));
													const f = e(0, 14);
													let u;
													for (u in (s.setDefault(1, 0),
													s.addMany(t, 0, 2, 0),
													f))
														(s.addMany([24, 26, 153, 154], u, 3, 0),
															s.addMany(e(128, 144), u, 3, 0),
															s.addMany(e(144, 152), u, 3, 0),
															s.add(156, u, 0, 0),
															s.add(27, u, 11, 1),
															s.add(157, u, 4, 8),
															s.addMany([152, 158, 159], u, 0, 7),
															s.add(155, u, 11, 3),
															s.add(144, u, 11, 9));
													return (
														s.addMany(o, 0, 3, 0),
														s.addMany(o, 1, 3, 1),
														s.add(127, 1, 0, 1),
														s.addMany(o, 8, 0, 8),
														s.addMany(o, 3, 3, 3),
														s.add(127, 3, 0, 3),
														s.addMany(o, 4, 3, 4),
														s.add(127, 4, 0, 4),
														s.addMany(o, 6, 3, 6),
														s.addMany(o, 5, 3, 5),
														s.add(127, 5, 0, 5),
														s.addMany(o, 2, 3, 2),
														s.add(127, 2, 0, 2),
														s.add(93, 1, 4, 8),
														s.addMany(t, 8, 5, 8),
														s.add(127, 8, 5, 8),
														s.addMany([156, 27, 24, 26, 7], 8, 6, 0),
														s.addMany(e(28, 32), 8, 0, 8),
														s.addMany([88, 94, 95], 1, 0, 7),
														s.addMany(t, 7, 0, 7),
														s.addMany(o, 7, 0, 7),
														s.add(156, 7, 0, 0),
														s.add(127, 7, 0, 7),
														s.add(91, 1, 11, 3),
														s.addMany(e(64, 127), 3, 7, 0),
														s.addMany(e(48, 60), 3, 8, 4),
														s.addMany([60, 61, 62, 63], 3, 9, 4),
														s.addMany(e(48, 60), 4, 8, 4),
														s.addMany(e(64, 127), 4, 7, 0),
														s.addMany([60, 61, 62, 63], 4, 0, 6),
														s.addMany(e(32, 64), 6, 0, 6),
														s.add(127, 6, 0, 6),
														s.addMany(e(64, 127), 6, 0, 0),
														s.addMany(e(32, 48), 3, 9, 5),
														s.addMany(e(32, 48), 5, 9, 5),
														s.addMany(e(48, 64), 5, 0, 6),
														s.addMany(e(64, 127), 5, 7, 0),
														s.addMany(e(32, 48), 4, 9, 5),
														s.addMany(e(32, 48), 1, 9, 2),
														s.addMany(e(32, 48), 2, 9, 2),
														s.addMany(e(48, 127), 2, 10, 0),
														s.addMany(e(48, 80), 1, 10, 0),
														s.addMany(e(81, 88), 1, 10, 0),
														s.addMany([89, 90, 92], 1, 10, 0),
														s.addMany(e(96, 127), 1, 10, 0),
														s.add(80, 1, 11, 9),
														s.addMany(o, 9, 0, 9),
														s.add(127, 9, 0, 9),
														s.addMany(e(28, 32), 9, 0, 9),
														s.addMany(e(32, 48), 9, 9, 12),
														s.addMany(e(48, 60), 9, 8, 10),
														s.addMany([60, 61, 62, 63], 9, 9, 10),
														s.addMany(o, 11, 0, 11),
														s.addMany(e(32, 128), 11, 0, 11),
														s.addMany(e(28, 32), 11, 0, 11),
														s.addMany(o, 10, 0, 10),
														s.add(127, 10, 0, 10),
														s.addMany(e(28, 32), 10, 0, 10),
														s.addMany(e(48, 60), 10, 8, 10),
														s.addMany([60, 61, 62, 63], 10, 0, 11),
														s.addMany(e(32, 48), 10, 9, 12),
														s.addMany(o, 12, 0, 12),
														s.add(127, 12, 0, 12),
														s.addMany(e(28, 32), 12, 0, 12),
														s.addMany(e(32, 48), 12, 9, 12),
														s.addMany(e(48, 64), 12, 0, 11),
														s.addMany(e(64, 127), 12, 12, 13),
														s.addMany(e(64, 127), 10, 12, 13),
														s.addMany(e(64, 127), 9, 12, 13),
														s.addMany(o, 13, 13, 13),
														s.addMany(t, 13, 13, 13),
														s.add(127, 13, 0, 13),
														s.addMany([27, 156, 24, 26], 13, 14, 0),
														s.add(g, 0, 2, 0),
														s.add(g, 8, 5, 8),
														s.add(g, 6, 0, 6),
														s.add(g, 11, 0, 11),
														s.add(g, 13, 13, 13),
														s
													);
												})();
												class h extends l.Disposable {
													constructor(i = r.VT500_TRANSITION_TABLE) {
														(super(),
															(this._transitions = i),
															(this._parseStack = {
																state: 0,
																handlers: [],
																handlerPos: 0,
																transition: 0,
																chunkPos: 0,
															}),
															(this.initialState = 0),
															(this.currentState = this.initialState),
															(this._params = new _.Params()),
															this._params.addParam(0),
															(this._collect = 0),
															(this.precedingJoinState = 0),
															(this._printHandlerFb = (e, t, o) => {}),
															(this._executeHandlerFb = (e) => {}),
															(this._csiHandlerFb = (e, t) => {}),
															(this._escHandlerFb = (e) => {}),
															(this._errorHandlerFb = (e) => e),
															(this._printHandler = this._printHandlerFb),
															(this._executeHandlers = Object.create(null)),
															(this._csiHandlers = Object.create(null)),
															(this._escHandlers = Object.create(null)),
															this.register(
																(0, l.toDisposable)(() => {
																	((this._csiHandlers = Object.create(null)),
																		(this._executeHandlers =
																			Object.create(null)),
																		(this._escHandlers = Object.create(null)));
																}),
															),
															(this._oscParser = this.register(
																new n.OscParser(),
															)),
															(this._dcsParser = this.register(
																new d.DcsParser(),
															)),
															(this._errorHandler = this._errorHandlerFb),
															this.registerEscHandler(
																{ final: '\\' },
																() => !0,
															));
													}
													_identifier(i, e = [64, 126]) {
														let t = 0;
														if (i.prefix) {
															if (i.prefix.length > 1)
																throw new Error(
																	'only one byte as prefix supported',
																);
															if (
																((t = i.prefix.charCodeAt(0)),
																(t && 60 > t) || t > 63)
															)
																throw new Error(
																	'prefix must be in range 0x3c .. 0x3f',
																);
														}
														if (i.intermediates) {
															if (i.intermediates.length > 2)
																throw new Error(
																	'only two bytes as intermediates are supported',
																);
															for (let f = 0; f < i.intermediates.length; ++f) {
																const u = i.intermediates.charCodeAt(f);
																if (32 > u || u > 47)
																	throw new Error(
																		'intermediate must be in range 0x20 .. 0x2f',
																	);
																((t <<= 8), (t |= u));
															}
														}
														if (i.final.length !== 1)
															throw new Error('final must be a single byte');
														const o = i.final.charCodeAt(0);
														if (e[0] > o || o > e[1])
															throw new Error(
																`final must be in range ${e[0]} .. ${e[1]}`,
															);
														return ((t <<= 8), (t |= o), t);
													}
													identToString(i) {
														const e = [];
														for (; i; )
															(e.push(String.fromCharCode(255 & i)), (i >>= 8));
														return e.reverse().join('');
													}
													setPrintHandler(i) {
														this._printHandler = i;
													}
													clearPrintHandler() {
														this._printHandler = this._printHandlerFb;
													}
													registerEscHandler(i, e) {
														const t = this._identifier(i, [48, 126]);
														this._escHandlers[t] === void 0 &&
															(this._escHandlers[t] = []);
														const o = this._escHandlers[t];
														return (
															o.push(e),
															{
																dispose: () => {
																	const f = o.indexOf(e);
																	f !== -1 && o.splice(f, 1);
																},
															}
														);
													}
													clearEscHandler(i) {
														this._escHandlers[this._identifier(i, [48, 126])] &&
															delete this._escHandlers[
																this._identifier(i, [48, 126])
															];
													}
													setEscHandlerFallback(i) {
														this._escHandlerFb = i;
													}
													setExecuteHandler(i, e) {
														this._executeHandlers[i.charCodeAt(0)] = e;
													}
													clearExecuteHandler(i) {
														this._executeHandlers[i.charCodeAt(0)] &&
															delete this._executeHandlers[i.charCodeAt(0)];
													}
													setExecuteHandlerFallback(i) {
														this._executeHandlerFb = i;
													}
													registerCsiHandler(i, e) {
														const t = this._identifier(i);
														this._csiHandlers[t] === void 0 &&
															(this._csiHandlers[t] = []);
														const o = this._csiHandlers[t];
														return (
															o.push(e),
															{
																dispose: () => {
																	const f = o.indexOf(e);
																	f !== -1 && o.splice(f, 1);
																},
															}
														);
													}
													clearCsiHandler(i) {
														this._csiHandlers[this._identifier(i)] &&
															delete this._csiHandlers[this._identifier(i)];
													}
													setCsiHandlerFallback(i) {
														this._csiHandlerFb = i;
													}
													registerDcsHandler(i, e) {
														return this._dcsParser.registerHandler(
															this._identifier(i),
															e,
														);
													}
													clearDcsHandler(i) {
														this._dcsParser.clearHandler(this._identifier(i));
													}
													setDcsHandlerFallback(i) {
														this._dcsParser.setHandlerFallback(i);
													}
													registerOscHandler(i, e) {
														return this._oscParser.registerHandler(i, e);
													}
													clearOscHandler(i) {
														this._oscParser.clearHandler(i);
													}
													setOscHandlerFallback(i) {
														this._oscParser.setHandlerFallback(i);
													}
													setErrorHandler(i) {
														this._errorHandler = i;
													}
													clearErrorHandler() {
														this._errorHandler = this._errorHandlerFb;
													}
													reset() {
														((this.currentState = this.initialState),
															this._oscParser.reset(),
															this._dcsParser.reset(),
															this._params.reset(),
															this._params.addParam(0),
															(this._collect = 0),
															(this.precedingJoinState = 0),
															this._parseStack.state !== 0 &&
																((this._parseStack.state = 2),
																(this._parseStack.handlers = [])));
													}
													_preserveStack(i, e, t, o, f) {
														((this._parseStack.state = i),
															(this._parseStack.handlers = e),
															(this._parseStack.handlerPos = t),
															(this._parseStack.transition = o),
															(this._parseStack.chunkPos = f));
													}
													parse(i, e, t) {
														let o,
															f = 0,
															u = 0,
															v = 0;
														if (this._parseStack.state)
															if (this._parseStack.state === 2)
																((this._parseStack.state = 0),
																	(v = this._parseStack.chunkPos + 1));
															else {
																if (
																	t === void 0 ||
																	this._parseStack.state === 1
																)
																	throw (
																		(this._parseStack.state = 1),
																		new Error(
																			'improper continuation due to previous async handler, giving up parsing',
																		)
																	);
																const c = this._parseStack.handlers;
																let m = this._parseStack.handlerPos - 1;
																switch (this._parseStack.state) {
																	case 3:
																		if (t === !1 && m > -1) {
																			for (
																				;
																				m >= 0 &&
																				((o = c[m](this._params)), o !== !0);
																				m--
																			)
																				if (o instanceof Promise)
																					return (
																						(this._parseStack.handlerPos = m),
																						o
																					);
																		}
																		this._parseStack.handlers = [];
																		break;
																	case 4:
																		if (t === !1 && m > -1) {
																			for (
																				;
																				m >= 0 && ((o = c[m]()), o !== !0);
																				m--
																			)
																				if (o instanceof Promise)
																					return (
																						(this._parseStack.handlerPos = m),
																						o
																					);
																		}
																		this._parseStack.handlers = [];
																		break;
																	case 6:
																		if (
																			((f = i[this._parseStack.chunkPos]),
																			(o = this._dcsParser.unhook(
																				f !== 24 && f !== 26,
																				t,
																			)),
																			o)
																		)
																			return o;
																		(f === 27 &&
																			(this._parseStack.transition |= 1),
																			this._params.reset(),
																			this._params.addParam(0),
																			(this._collect = 0));
																		break;
																	case 5:
																		if (
																			((f = i[this._parseStack.chunkPos]),
																			(o = this._oscParser.end(
																				f !== 24 && f !== 26,
																				t,
																			)),
																			o)
																		)
																			return o;
																		(f === 27 &&
																			(this._parseStack.transition |= 1),
																			this._params.reset(),
																			this._params.addParam(0),
																			(this._collect = 0));
																}
																((this._parseStack.state = 0),
																	(v = this._parseStack.chunkPos + 1),
																	(this.precedingJoinState = 0),
																	(this.currentState =
																		15 & this._parseStack.transition));
															}
														for (let c = v; c < e; ++c) {
															switch (
																((f = i[c]),
																(u =
																	this._transitions.table[
																		(this.currentState << 8) | (f < 160 ? f : g)
																	]),
																u >> 4)
															) {
																case 2:
																	for (let b = c + 1; ; ++b) {
																		if (
																			b >= e ||
																			(f = i[b]) < 32 ||
																			(f > 126 && f < g)
																		) {
																			(this._printHandler(i, c, b),
																				(c = b - 1));
																			break;
																		}
																		if (
																			++b >= e ||
																			(f = i[b]) < 32 ||
																			(f > 126 && f < g)
																		) {
																			(this._printHandler(i, c, b),
																				(c = b - 1));
																			break;
																		}
																		if (
																			++b >= e ||
																			(f = i[b]) < 32 ||
																			(f > 126 && f < g)
																		) {
																			(this._printHandler(i, c, b),
																				(c = b - 1));
																			break;
																		}
																		if (
																			++b >= e ||
																			(f = i[b]) < 32 ||
																			(f > 126 && f < g)
																		) {
																			(this._printHandler(i, c, b),
																				(c = b - 1));
																			break;
																		}
																	}
																	break;
																case 3:
																	(this._executeHandlers[f]
																		? this._executeHandlers[f]()
																		: this._executeHandlerFb(f),
																		(this.precedingJoinState = 0));
																	break;
																case 0:
																	break;
																case 1:
																	if (
																		this._errorHandler({
																			position: c,
																			code: f,
																			currentState: this.currentState,
																			collect: this._collect,
																			params: this._params,
																			abort: !1,
																		}).abort
																	)
																		return;
																	break;
																case 7:
																	const m =
																		this._csiHandlers[(this._collect << 8) | f];
																	let w = m ? m.length - 1 : -1;
																	for (
																		;
																		w >= 0 &&
																		((o = m[w](this._params)), o !== !0);
																		w--
																	)
																		if (o instanceof Promise)
																			return (
																				this._preserveStack(3, m, w, u, c),
																				o
																			);
																	(w < 0 &&
																		this._csiHandlerFb(
																			(this._collect << 8) | f,
																			this._params,
																		),
																		(this.precedingJoinState = 0));
																	break;
																case 8:
																	do
																		switch (f) {
																			case 59:
																				this._params.addParam(0);
																				break;
																			case 58:
																				this._params.addSubParam(-1);
																				break;
																			default:
																				this._params.addDigit(f - 48);
																		}
																	while (++c < e && (f = i[c]) > 47 && f < 60);
																	c--;
																	break;
																case 9:
																	((this._collect <<= 8), (this._collect |= f));
																	break;
																case 10:
																	const k =
																		this._escHandlers[(this._collect << 8) | f];
																	let L = k ? k.length - 1 : -1;
																	for (
																		;
																		L >= 0 && ((o = k[L]()), o !== !0);
																		L--
																	)
																		if (o instanceof Promise)
																			return (
																				this._preserveStack(4, k, L, u, c),
																				o
																			);
																	(L < 0 &&
																		this._escHandlerFb(
																			(this._collect << 8) | f,
																		),
																		(this.precedingJoinState = 0));
																	break;
																case 11:
																	(this._params.reset(),
																		this._params.addParam(0),
																		(this._collect = 0));
																	break;
																case 12:
																	this._dcsParser.hook(
																		(this._collect << 8) | f,
																		this._params,
																	);
																	break;
																case 13:
																	for (let b = c + 1; ; ++b)
																		if (
																			b >= e ||
																			(f = i[b]) === 24 ||
																			f === 26 ||
																			f === 27 ||
																			(f > 127 && f < g)
																		) {
																			(this._dcsParser.put(i, c, b),
																				(c = b - 1));
																			break;
																		}
																	break;
																case 14:
																	if (
																		((o = this._dcsParser.unhook(
																			f !== 24 && f !== 26,
																		)),
																		o)
																	)
																		return (
																			this._preserveStack(6, [], 0, u, c),
																			o
																		);
																	(f === 27 && (u |= 1),
																		this._params.reset(),
																		this._params.addParam(0),
																		(this._collect = 0),
																		(this.precedingJoinState = 0));
																	break;
																case 4:
																	this._oscParser.start();
																	break;
																case 5:
																	for (let b = c + 1; ; b++)
																		if (
																			b >= e ||
																			(f = i[b]) < 32 ||
																			(f > 127 && f < g)
																		) {
																			(this._oscParser.put(i, c, b),
																				(c = b - 1));
																			break;
																		}
																	break;
																case 6:
																	if (
																		((o = this._oscParser.end(
																			f !== 24 && f !== 26,
																		)),
																		o)
																	)
																		return (
																			this._preserveStack(5, [], 0, u, c),
																			o
																		);
																	(f === 27 && (u |= 1),
																		this._params.reset(),
																		this._params.addParam(0),
																		(this._collect = 0),
																		(this.precedingJoinState = 0));
															}
															this.currentState = 15 & u;
														}
													}
												}
												r.EscapeSequenceParser = h;
											},
											6242: (I, r, a) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.OscHandler = r.OscParser = void 0));
												const l = a(5770),
													_ = a(482),
													n = [];
												((r.OscParser = class {
													constructor() {
														((this._state = 0),
															(this._active = n),
															(this._id = -1),
															(this._handlers = Object.create(null)),
															(this._handlerFb = () => {}),
															(this._stack = {
																paused: !1,
																loopPosition: 0,
																fallThrough: !1,
															}));
													}
													registerHandler(d, p) {
														this._handlers[d] === void 0 &&
															(this._handlers[d] = []);
														const g = this._handlers[d];
														return (
															g.push(p),
															{
																dispose: () => {
																	const h = g.indexOf(p);
																	h !== -1 && g.splice(h, 1);
																},
															}
														);
													}
													clearHandler(d) {
														this._handlers[d] && delete this._handlers[d];
													}
													setHandlerFallback(d) {
														this._handlerFb = d;
													}
													dispose() {
														((this._handlers = Object.create(null)),
															(this._handlerFb = () => {}),
															(this._active = n));
													}
													reset() {
														if (this._state === 2)
															for (
																let d = this._stack.paused
																	? this._stack.loopPosition - 1
																	: this._active.length - 1;
																d >= 0;
																--d
															)
																this._active[d].end(!1);
														((this._stack.paused = !1),
															(this._active = n),
															(this._id = -1),
															(this._state = 0));
													}
													_start() {
														if (
															((this._active = this._handlers[this._id] || n),
															this._active.length)
														)
															for (let d = this._active.length - 1; d >= 0; d--)
																this._active[d].start();
														else this._handlerFb(this._id, 'START');
													}
													_put(d, p, g) {
														if (this._active.length)
															for (let h = this._active.length - 1; h >= 0; h--)
																this._active[h].put(d, p, g);
														else
															this._handlerFb(
																this._id,
																'PUT',
																(0, _.utf32ToString)(d, p, g),
															);
													}
													start() {
														(this.reset(), (this._state = 1));
													}
													put(d, p, g) {
														if (this._state !== 3) {
															if (this._state === 1)
																for (; p < g; ) {
																	const h = d[p++];
																	if (h === 59) {
																		((this._state = 2), this._start());
																		break;
																	}
																	if (h < 48 || 57 < h)
																		return void (this._state = 3);
																	(this._id === -1 && (this._id = 0),
																		(this._id = 10 * this._id + h - 48));
																}
															this._state === 2 &&
																g - p > 0 &&
																this._put(d, p, g);
														}
													}
													end(d, p = !0) {
														if (this._state !== 0) {
															if (this._state !== 3)
																if (
																	(this._state === 1 && this._start(),
																	this._active.length)
																) {
																	let g = !1,
																		h = this._active.length - 1,
																		s = !1;
																	if (
																		(this._stack.paused &&
																			((h = this._stack.loopPosition - 1),
																			(g = p),
																			(s = this._stack.fallThrough),
																			(this._stack.paused = !1)),
																		!s && g === !1)
																	) {
																		for (
																			;
																			h >= 0 &&
																			((g = this._active[h].end(d)), g !== !0);
																			h--
																		)
																			if (g instanceof Promise)
																				return (
																					(this._stack.paused = !0),
																					(this._stack.loopPosition = h),
																					(this._stack.fallThrough = !1),
																					g
																				);
																		h--;
																	}
																	for (; h >= 0; h--)
																		if (
																			((g = this._active[h].end(!1)),
																			g instanceof Promise)
																		)
																			return (
																				(this._stack.paused = !0),
																				(this._stack.loopPosition = h),
																				(this._stack.fallThrough = !0),
																				g
																			);
																} else this._handlerFb(this._id, 'END', d);
															((this._active = n),
																(this._id = -1),
																(this._state = 0));
														}
													}
												}),
													(r.OscHandler = class {
														constructor(d) {
															((this._handler = d),
																(this._data = ''),
																(this._hitLimit = !1));
														}
														start() {
															((this._data = ''), (this._hitLimit = !1));
														}
														put(d, p, g) {
															this._hitLimit ||
																((this._data += (0, _.utf32ToString)(d, p, g)),
																this._data.length > l.PAYLOAD_LIMIT &&
																	((this._data = ''), (this._hitLimit = !0)));
														}
														end(d) {
															let p = !1;
															if (this._hitLimit) p = !1;
															else if (
																d &&
																((p = this._handler(this._data)),
																p instanceof Promise)
															)
																return p.then(
																	(g) => (
																		(this._data = ''),
																		(this._hitLimit = !1),
																		g
																	),
																);
															return (
																(this._data = ''),
																(this._hitLimit = !1),
																p
															);
														}
													}));
											},
											8742: (I, r) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.Params = void 0));
												const a = 2147483647;
												class l {
													static fromArray(n) {
														const d = new l();
														if (!n.length) return d;
														for (
															let p = Array.isArray(n[0]) ? 1 : 0;
															p < n.length;
															++p
														) {
															const g = n[p];
															if (Array.isArray(g))
																for (let h = 0; h < g.length; ++h)
																	d.addSubParam(g[h]);
															else d.addParam(g);
														}
														return d;
													}
													constructor(n = 32, d = 32) {
														if (
															((this.maxLength = n),
															(this.maxSubParamsLength = d),
															d > 256)
														)
															throw new Error(
																'maxSubParamsLength must not be greater than 256',
															);
														((this.params = new Int32Array(n)),
															(this.length = 0),
															(this._subParams = new Int32Array(d)),
															(this._subParamsLength = 0),
															(this._subParamsIdx = new Uint16Array(n)),
															(this._rejectDigits = !1),
															(this._rejectSubDigits = !1),
															(this._digitIsSub = !1));
													}
													clone() {
														const n = new l(
															this.maxLength,
															this.maxSubParamsLength,
														);
														return (
															n.params.set(this.params),
															(n.length = this.length),
															n._subParams.set(this._subParams),
															(n._subParamsLength = this._subParamsLength),
															n._subParamsIdx.set(this._subParamsIdx),
															(n._rejectDigits = this._rejectDigits),
															(n._rejectSubDigits = this._rejectSubDigits),
															(n._digitIsSub = this._digitIsSub),
															n
														);
													}
													toArray() {
														const n = [];
														for (let d = 0; d < this.length; ++d) {
															n.push(this.params[d]);
															const p = this._subParamsIdx[d] >> 8,
																g = 255 & this._subParamsIdx[d];
															g - p > 0 &&
																n.push(
																	Array.prototype.slice.call(
																		this._subParams,
																		p,
																		g,
																	),
																);
														}
														return n;
													}
													reset() {
														((this.length = 0),
															(this._subParamsLength = 0),
															(this._rejectDigits = !1),
															(this._rejectSubDigits = !1),
															(this._digitIsSub = !1));
													}
													addParam(n) {
														if (
															((this._digitIsSub = !1),
															this.length >= this.maxLength)
														)
															this._rejectDigits = !0;
														else {
															if (n < -1)
																throw new Error(
																	'values lesser than -1 are not allowed',
																);
															((this._subParamsIdx[this.length] =
																(this._subParamsLength << 8) |
																this._subParamsLength),
																(this.params[this.length++] = n > a ? a : n));
														}
													}
													addSubParam(n) {
														if (((this._digitIsSub = !0), this.length))
															if (
																this._rejectDigits ||
																this._subParamsLength >= this.maxSubParamsLength
															)
																this._rejectSubDigits = !0;
															else {
																if (n < -1)
																	throw new Error(
																		'values lesser than -1 are not allowed',
																	);
																((this._subParams[this._subParamsLength++] =
																	n > a ? a : n),
																	this._subParamsIdx[this.length - 1]++);
															}
													}
													hasSubParams(n) {
														return (
															(255 & this._subParamsIdx[n]) -
																(this._subParamsIdx[n] >> 8) >
															0
														);
													}
													getSubParams(n) {
														const d = this._subParamsIdx[n] >> 8,
															p = 255 & this._subParamsIdx[n];
														return p - d > 0
															? this._subParams.subarray(d, p)
															: null;
													}
													getSubParamsAll() {
														const n = {};
														for (let d = 0; d < this.length; ++d) {
															const p = this._subParamsIdx[d] >> 8,
																g = 255 & this._subParamsIdx[d];
															g - p > 0 && (n[d] = this._subParams.slice(p, g));
														}
														return n;
													}
													addDigit(n) {
														let d;
														if (
															this._rejectDigits ||
															!(d = this._digitIsSub
																? this._subParamsLength
																: this.length) ||
															(this._digitIsSub && this._rejectSubDigits)
														)
															return;
														const p = this._digitIsSub
																? this._subParams
																: this.params,
															g = p[d - 1];
														p[d - 1] = ~g ? Math.min(10 * g + n, a) : n;
													}
												}
												r.Params = l;
											},
											5741: (I, r) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.AddonManager = void 0),
													(r.AddonManager = class {
														constructor() {
															this._addons = [];
														}
														dispose() {
															for (let a = this._addons.length - 1; a >= 0; a--)
																this._addons[a].instance.dispose();
														}
														loadAddon(a, l) {
															const _ = {
																instance: l,
																dispose: l.dispose,
																isDisposed: !1,
															};
															(this._addons.push(_),
																(l.dispose = () =>
																	this._wrappedAddonDispose(_)),
																l.activate(a));
														}
														_wrappedAddonDispose(a) {
															if (a.isDisposed) return;
															let l = -1;
															for (let _ = 0; _ < this._addons.length; _++)
																if (this._addons[_] === a) {
																	l = _;
																	break;
																}
															if (l === -1)
																throw new Error(
																	'Could not dispose an addon that has not been loaded',
																);
															((a.isDisposed = !0),
																a.dispose.apply(a.instance),
																this._addons.splice(l, 1));
														}
													}));
											},
											8771: (I, r, a) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.BufferApiView = void 0));
												const l = a(3785),
													_ = a(511);
												r.BufferApiView = class {
													constructor(n, d) {
														((this._buffer = n), (this.type = d));
													}
													init(n) {
														return ((this._buffer = n), this);
													}
													get cursorY() {
														return this._buffer.y;
													}
													get cursorX() {
														return this._buffer.x;
													}
													get viewportY() {
														return this._buffer.ydisp;
													}
													get baseY() {
														return this._buffer.ybase;
													}
													get length() {
														return this._buffer.lines.length;
													}
													getLine(n) {
														const d = this._buffer.lines.get(n);
														if (d) return new l.BufferLineApiView(d);
													}
													getNullCell() {
														return new _.CellData();
													}
												};
											},
											3785: (I, r, a) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.BufferLineApiView = void 0));
												const l = a(511);
												r.BufferLineApiView = class {
													constructor(_) {
														this._line = _;
													}
													get isWrapped() {
														return this._line.isWrapped;
													}
													get length() {
														return this._line.length;
													}
													getCell(_, n) {
														if (!(_ < 0 || _ >= this._line.length))
															return n
																? (this._line.loadCell(_, n), n)
																: this._line.loadCell(_, new l.CellData());
													}
													translateToString(_, n, d) {
														return this._line.translateToString(_, n, d);
													}
												};
											},
											8285: (I, r, a) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.BufferNamespaceApi = void 0));
												const l = a(8771),
													_ = a(8460),
													n = a(844);
												class d extends n.Disposable {
													constructor(g) {
														(super(),
															(this._core = g),
															(this._onBufferChange = this.register(
																new _.EventEmitter(),
															)),
															(this.onBufferChange =
																this._onBufferChange.event),
															(this._normal = new l.BufferApiView(
																this._core.buffers.normal,
																'normal',
															)),
															(this._alternate = new l.BufferApiView(
																this._core.buffers.alt,
																'alternate',
															)),
															this._core.buffers.onBufferActivate(() =>
																this._onBufferChange.fire(this.active),
															));
													}
													get active() {
														if (
															this._core.buffers.active ===
															this._core.buffers.normal
														)
															return this.normal;
														if (
															this._core.buffers.active ===
															this._core.buffers.alt
														)
															return this.alternate;
														throw new Error(
															'Active buffer is neither normal nor alternate',
														);
													}
													get normal() {
														return this._normal.init(this._core.buffers.normal);
													}
													get alternate() {
														return this._alternate.init(this._core.buffers.alt);
													}
												}
												r.BufferNamespaceApi = d;
											},
											7975: (I, r) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.ParserApi = void 0),
													(r.ParserApi = class {
														constructor(a) {
															this._core = a;
														}
														registerCsiHandler(a, l) {
															return this._core.registerCsiHandler(a, (_) =>
																l(_.toArray()),
															);
														}
														addCsiHandler(a, l) {
															return this.registerCsiHandler(a, l);
														}
														registerDcsHandler(a, l) {
															return this._core.registerDcsHandler(a, (_, n) =>
																l(_, n.toArray()),
															);
														}
														addDcsHandler(a, l) {
															return this.registerDcsHandler(a, l);
														}
														registerEscHandler(a, l) {
															return this._core.registerEscHandler(a, l);
														}
														addEscHandler(a, l) {
															return this.registerEscHandler(a, l);
														}
														registerOscHandler(a, l) {
															return this._core.registerOscHandler(a, l);
														}
														addOscHandler(a, l) {
															return this.registerOscHandler(a, l);
														}
													}));
											},
											7090: (I, r) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.UnicodeApi = void 0),
													(r.UnicodeApi = class {
														constructor(a) {
															this._core = a;
														}
														register(a) {
															this._core.unicodeService.register(a);
														}
														get versions() {
															return this._core.unicodeService.versions;
														}
														get activeVersion() {
															return this._core.unicodeService.activeVersion;
														}
														set activeVersion(a) {
															this._core.unicodeService.activeVersion = a;
														}
													}));
											},
											744: function (I, r, a) {
												var l =
														(this && this.__decorate) ||
														function (s, i, e, t) {
															var o,
																f = arguments.length,
																u =
																	f < 3
																		? i
																		: t === null
																			? (t = Object.getOwnPropertyDescriptor(
																					i,
																					e,
																				))
																			: t;
															if (
																typeof Reflect == 'object' &&
																typeof Reflect.decorate == 'function'
															)
																u = Reflect.decorate(s, i, e, t);
															else
																for (var v = s.length - 1; v >= 0; v--)
																	(o = s[v]) &&
																		(u =
																			(f < 3
																				? o(u)
																				: f > 3
																					? o(i, e, u)
																					: o(i, e)) || u);
															return (
																f > 3 && u && Object.defineProperty(i, e, u),
																u
															);
														},
													_ =
														(this && this.__param) ||
														function (s, i) {
															return function (e, t) {
																i(e, t, s);
															};
														};
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.BufferService =
														r.MINIMUM_ROWS =
														r.MINIMUM_COLS =
															void 0));
												const n = a(8460),
													d = a(844),
													p = a(5295),
													g = a(2585);
												((r.MINIMUM_COLS = 2), (r.MINIMUM_ROWS = 1));
												let h = (r.BufferService = class extends d.Disposable {
													get buffer() {
														return this.buffers.active;
													}
													constructor(s) {
														(super(),
															(this.isUserScrolling = !1),
															(this._onResize = this.register(
																new n.EventEmitter(),
															)),
															(this.onResize = this._onResize.event),
															(this._onScroll = this.register(
																new n.EventEmitter(),
															)),
															(this.onScroll = this._onScroll.event),
															(this.cols = Math.max(
																s.rawOptions.cols || 0,
																r.MINIMUM_COLS,
															)),
															(this.rows = Math.max(
																s.rawOptions.rows || 0,
																r.MINIMUM_ROWS,
															)),
															(this.buffers = this.register(
																new p.BufferSet(s, this),
															)));
													}
													resize(s, i) {
														((this.cols = s),
															(this.rows = i),
															this.buffers.resize(s, i),
															this._onResize.fire({ cols: s, rows: i }));
													}
													reset() {
														(this.buffers.reset(), (this.isUserScrolling = !1));
													}
													scroll(s, i = !1) {
														const e = this.buffer;
														let t;
														((t = this._cachedBlankLine),
															(t &&
																t.length === this.cols &&
																t.getFg(0) === s.fg &&
																t.getBg(0) === s.bg) ||
																((t = e.getBlankLine(s, i)),
																(this._cachedBlankLine = t)),
															(t.isWrapped = i));
														const o = e.ybase + e.scrollTop,
															f = e.ybase + e.scrollBottom;
														if (e.scrollTop === 0) {
															const u = e.lines.isFull;
															(f === e.lines.length - 1
																? u
																	? e.lines.recycle().copyFrom(t)
																	: e.lines.push(t.clone())
																: e.lines.splice(f + 1, 0, t.clone()),
																u
																	? this.isUserScrolling &&
																		(e.ydisp = Math.max(e.ydisp - 1, 0))
																	: (e.ybase++,
																		this.isUserScrolling || e.ydisp++));
														} else {
															const u = f - o + 1;
															(e.lines.shiftElements(o + 1, u - 1, -1),
																e.lines.set(f, t.clone()));
														}
														(this.isUserScrolling || (e.ydisp = e.ybase),
															this._onScroll.fire(e.ydisp));
													}
													scrollLines(s, i, e) {
														const t = this.buffer;
														if (s < 0) {
															if (t.ydisp === 0) return;
															this.isUserScrolling = !0;
														} else
															s + t.ydisp >= t.ybase &&
																(this.isUserScrolling = !1);
														const o = t.ydisp;
														((t.ydisp = Math.max(
															Math.min(t.ydisp + s, t.ybase),
															0,
														)),
															o !== t.ydisp &&
																(i || this._onScroll.fire(t.ydisp)));
													}
												});
												r.BufferService = h = l([_(0, g.IOptionsService)], h);
											},
											7994: (I, r) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.CharsetService = void 0),
													(r.CharsetService = class {
														constructor() {
															((this.glevel = 0), (this._charsets = []));
														}
														reset() {
															((this.charset = void 0),
																(this._charsets = []),
																(this.glevel = 0));
														}
														setgLevel(a) {
															((this.glevel = a),
																(this.charset = this._charsets[a]));
														}
														setgCharset(a, l) {
															((this._charsets[a] = l),
																this.glevel === a && (this.charset = l));
														}
													}));
											},
											1753: function (I, r, a) {
												var l =
														(this && this.__decorate) ||
														function (t, o, f, u) {
															var v,
																c = arguments.length,
																m =
																	c < 3
																		? o
																		: u === null
																			? (u = Object.getOwnPropertyDescriptor(
																					o,
																					f,
																				))
																			: u;
															if (
																typeof Reflect == 'object' &&
																typeof Reflect.decorate == 'function'
															)
																m = Reflect.decorate(t, o, f, u);
															else
																for (var w = t.length - 1; w >= 0; w--)
																	(v = t[w]) &&
																		(m =
																			(c < 3
																				? v(m)
																				: c > 3
																					? v(o, f, m)
																					: v(o, f)) || m);
															return (
																c > 3 && m && Object.defineProperty(o, f, m),
																m
															);
														},
													_ =
														(this && this.__param) ||
														function (t, o) {
															return function (f, u) {
																o(f, u, t);
															};
														};
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.CoreMouseService = void 0));
												const n = a(2585),
													d = a(8460),
													p = a(844),
													g = {
														NONE: { events: 0, restrict: () => !1 },
														X10: {
															events: 1,
															restrict: (t) =>
																t.button !== 4 &&
																t.action === 1 &&
																((t.ctrl = !1),
																(t.alt = !1),
																(t.shift = !1),
																!0),
														},
														VT200: {
															events: 19,
															restrict: (t) => t.action !== 32,
														},
														DRAG: {
															events: 23,
															restrict: (t) =>
																t.action !== 32 || t.button !== 3,
														},
														ANY: { events: 31, restrict: (t) => !0 },
													};
												function h(t, o) {
													let f =
														(t.ctrl ? 16 : 0) |
														(t.shift ? 4 : 0) |
														(t.alt ? 8 : 0);
													return (
														t.button === 4
															? ((f |= 64), (f |= t.action))
															: ((f |= 3 & t.button),
																4 & t.button && (f |= 64),
																8 & t.button && (f |= 128),
																t.action === 32
																	? (f |= 32)
																	: t.action !== 0 || o || (f |= 3)),
														f
													);
												}
												const s = String.fromCharCode,
													i = {
														DEFAULT: (t) => {
															const o = [h(t, !1) + 32, t.col + 32, t.row + 32];
															return o[0] > 255 || o[1] > 255 || o[2] > 255
																? ''
																: `\x1B[M${s(o[0])}${s(o[1])}${s(o[2])}`;
														},
														SGR: (t) => {
															const o =
																t.action === 0 && t.button !== 4 ? 'm' : 'M';
															return `\x1B[<${h(t, !0)};${t.col};${t.row}${o}`;
														},
														SGR_PIXELS: (t) => {
															const o =
																t.action === 0 && t.button !== 4 ? 'm' : 'M';
															return `\x1B[<${h(t, !0)};${t.x};${t.y}${o}`;
														},
													};
												let e = (r.CoreMouseService = class extends (
													p.Disposable
												) {
													constructor(t, o) {
														(super(),
															(this._bufferService = t),
															(this._coreService = o),
															(this._protocols = {}),
															(this._encodings = {}),
															(this._activeProtocol = ''),
															(this._activeEncoding = ''),
															(this._lastEvent = null),
															(this._onProtocolChange = this.register(
																new d.EventEmitter(),
															)),
															(this.onProtocolChange =
																this._onProtocolChange.event));
														for (const f of Object.keys(g))
															this.addProtocol(f, g[f]);
														for (const f of Object.keys(i))
															this.addEncoding(f, i[f]);
														this.reset();
													}
													addProtocol(t, o) {
														this._protocols[t] = o;
													}
													addEncoding(t, o) {
														this._encodings[t] = o;
													}
													get activeProtocol() {
														return this._activeProtocol;
													}
													get areMouseEventsActive() {
														return (
															this._protocols[this._activeProtocol].events !== 0
														);
													}
													set activeProtocol(t) {
														if (!this._protocols[t])
															throw new Error(`unknown protocol "${t}"`);
														((this._activeProtocol = t),
															this._onProtocolChange.fire(
																this._protocols[t].events,
															));
													}
													get activeEncoding() {
														return this._activeEncoding;
													}
													set activeEncoding(t) {
														if (!this._encodings[t])
															throw new Error(`unknown encoding "${t}"`);
														this._activeEncoding = t;
													}
													reset() {
														((this.activeProtocol = 'NONE'),
															(this.activeEncoding = 'DEFAULT'),
															(this._lastEvent = null));
													}
													triggerMouseEvent(t) {
														if (
															t.col < 0 ||
															t.col >= this._bufferService.cols ||
															t.row < 0 ||
															t.row >= this._bufferService.rows ||
															(t.button === 4 && t.action === 32) ||
															(t.button === 3 && t.action !== 32) ||
															(t.button !== 4 &&
																(t.action === 2 || t.action === 3)) ||
															(t.col++,
															t.row++,
															t.action === 32 &&
																this._lastEvent &&
																this._equalEvents(
																	this._lastEvent,
																	t,
																	this._activeEncoding === 'SGR_PIXELS',
																)) ||
															!this._protocols[this._activeProtocol].restrict(t)
														)
															return !1;
														const o = this._encodings[this._activeEncoding](t);
														return (
															o &&
																(this._activeEncoding === 'DEFAULT'
																	? this._coreService.triggerBinaryEvent(o)
																	: this._coreService.triggerDataEvent(o, !0)),
															(this._lastEvent = t),
															!0
														);
													}
													explainEvents(t) {
														return {
															down: !!(1 & t),
															up: !!(2 & t),
															drag: !!(4 & t),
															move: !!(8 & t),
															wheel: !!(16 & t),
														};
													}
													_equalEvents(t, o, f) {
														if (f) {
															if (t.x !== o.x || t.y !== o.y) return !1;
														} else if (t.col !== o.col || t.row !== o.row)
															return !1;
														return (
															t.button === o.button &&
															t.action === o.action &&
															t.ctrl === o.ctrl &&
															t.alt === o.alt &&
															t.shift === o.shift
														);
													}
												});
												r.CoreMouseService = e = l(
													[_(0, n.IBufferService), _(1, n.ICoreService)],
													e,
												);
											},
											6975: function (I, r, a) {
												var l =
														(this && this.__decorate) ||
														function (e, t, o, f) {
															var u,
																v = arguments.length,
																c =
																	v < 3
																		? t
																		: f === null
																			? (f = Object.getOwnPropertyDescriptor(
																					t,
																					o,
																				))
																			: f;
															if (
																typeof Reflect == 'object' &&
																typeof Reflect.decorate == 'function'
															)
																c = Reflect.decorate(e, t, o, f);
															else
																for (var m = e.length - 1; m >= 0; m--)
																	(u = e[m]) &&
																		(c =
																			(v < 3
																				? u(c)
																				: v > 3
																					? u(t, o, c)
																					: u(t, o)) || c);
															return (
																v > 3 && c && Object.defineProperty(t, o, c),
																c
															);
														},
													_ =
														(this && this.__param) ||
														function (e, t) {
															return function (o, f) {
																t(o, f, e);
															};
														};
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.CoreService = void 0));
												const n = a(1439),
													d = a(8460),
													p = a(844),
													g = a(2585),
													h = Object.freeze({ insertMode: !1 }),
													s = Object.freeze({
														applicationCursorKeys: !1,
														applicationKeypad: !1,
														bracketedPasteMode: !1,
														origin: !1,
														reverseWraparound: !1,
														sendFocus: !1,
														wraparound: !0,
													});
												let i = (r.CoreService = class extends p.Disposable {
													constructor(e, t, o) {
														(super(),
															(this._bufferService = e),
															(this._logService = t),
															(this._optionsService = o),
															(this.isCursorInitialized = !1),
															(this.isCursorHidden = !1),
															(this._onData = this.register(
																new d.EventEmitter(),
															)),
															(this.onData = this._onData.event),
															(this._onUserInput = this.register(
																new d.EventEmitter(),
															)),
															(this.onUserInput = this._onUserInput.event),
															(this._onBinary = this.register(
																new d.EventEmitter(),
															)),
															(this.onBinary = this._onBinary.event),
															(this._onRequestScrollToBottom = this.register(
																new d.EventEmitter(),
															)),
															(this.onRequestScrollToBottom =
																this._onRequestScrollToBottom.event),
															(this.modes = (0, n.clone)(h)),
															(this.decPrivateModes = (0, n.clone)(s)));
													}
													reset() {
														((this.modes = (0, n.clone)(h)),
															(this.decPrivateModes = (0, n.clone)(s)));
													}
													triggerDataEvent(e, t = !1) {
														if (this._optionsService.rawOptions.disableStdin)
															return;
														const o = this._bufferService.buffer;
														(t &&
															this._optionsService.rawOptions
																.scrollOnUserInput &&
															o.ybase !== o.ydisp &&
															this._onRequestScrollToBottom.fire(),
															t && this._onUserInput.fire(),
															this._logService.debug(
																`sending data "${e}"`,
																() => e.split('').map((f) => f.charCodeAt(0)),
															),
															this._onData.fire(e));
													}
													triggerBinaryEvent(e) {
														this._optionsService.rawOptions.disableStdin ||
															(this._logService.debug(
																`sending binary "${e}"`,
																() => e.split('').map((t) => t.charCodeAt(0)),
															),
															this._onBinary.fire(e));
													}
												});
												r.CoreService = i = l(
													[
														_(0, g.IBufferService),
														_(1, g.ILogService),
														_(2, g.IOptionsService),
													],
													i,
												);
											},
											9074: (I, r, a) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.DecorationService = void 0));
												const l = a(8055),
													_ = a(8460),
													n = a(844),
													d = a(6106);
												let p = 0,
													g = 0;
												class h extends n.Disposable {
													get decorations() {
														return this._decorations.values();
													}
													constructor() {
														(super(),
															(this._decorations = new d.SortedList((e) =>
																e == null ? void 0 : e.marker.line,
															)),
															(this._onDecorationRegistered = this.register(
																new _.EventEmitter(),
															)),
															(this.onDecorationRegistered =
																this._onDecorationRegistered.event),
															(this._onDecorationRemoved = this.register(
																new _.EventEmitter(),
															)),
															(this.onDecorationRemoved =
																this._onDecorationRemoved.event),
															this.register(
																(0, n.toDisposable)(() => this.reset()),
															));
													}
													registerDecoration(e) {
														if (e.marker.isDisposed) return;
														const t = new s(e);
														if (t) {
															const o = t.marker.onDispose(() => t.dispose());
															(t.onDispose(() => {
																t &&
																	(this._decorations.delete(t) &&
																		this._onDecorationRemoved.fire(t),
																	o.dispose());
															}),
																this._decorations.insert(t),
																this._onDecorationRegistered.fire(t));
														}
														return t;
													}
													reset() {
														for (const e of this._decorations.values())
															e.dispose();
														this._decorations.clear();
													}
													*getDecorationsAtCell(e, t, o) {
														let f = 0,
															u = 0;
														for (const v of this._decorations.getKeyIterator(t))
															((f = v.options.x ?? 0),
																(u = f + (v.options.width ?? 1)),
																e >= f &&
																	e < u &&
																	(!o || (v.options.layer ?? 'bottom') === o) &&
																	(yield v));
													}
													forEachDecorationAtCell(e, t, o, f) {
														this._decorations.forEachByKey(t, (u) => {
															((p = u.options.x ?? 0),
																(g = p + (u.options.width ?? 1)),
																e >= p &&
																	e < g &&
																	(!o || (u.options.layer ?? 'bottom') === o) &&
																	f(u));
														});
													}
												}
												r.DecorationService = h;
												class s extends n.Disposable {
													get isDisposed() {
														return this._isDisposed;
													}
													get backgroundColorRGB() {
														return (
															this._cachedBg === null &&
																(this.options.backgroundColor
																	? (this._cachedBg = l.css.toColor(
																			this.options.backgroundColor,
																		))
																	: (this._cachedBg = void 0)),
															this._cachedBg
														);
													}
													get foregroundColorRGB() {
														return (
															this._cachedFg === null &&
																(this.options.foregroundColor
																	? (this._cachedFg = l.css.toColor(
																			this.options.foregroundColor,
																		))
																	: (this._cachedFg = void 0)),
															this._cachedFg
														);
													}
													constructor(e) {
														(super(),
															(this.options = e),
															(this.onRenderEmitter = this.register(
																new _.EventEmitter(),
															)),
															(this.onRender = this.onRenderEmitter.event),
															(this._onDispose = this.register(
																new _.EventEmitter(),
															)),
															(this.onDispose = this._onDispose.event),
															(this._cachedBg = null),
															(this._cachedFg = null),
															(this.marker = e.marker),
															this.options.overviewRulerOptions &&
																!this.options.overviewRulerOptions.position &&
																(this.options.overviewRulerOptions.position =
																	'full'));
													}
													dispose() {
														(this._onDispose.fire(), super.dispose());
													}
												}
											},
											4348: (I, r, a) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.InstantiationService = r.ServiceCollection =
														void 0));
												const l = a(2585),
													_ = a(8343);
												class n {
													constructor(...p) {
														this._entries = new Map();
														for (const [g, h] of p) this.set(g, h);
													}
													set(p, g) {
														const h = this._entries.get(p);
														return (this._entries.set(p, g), h);
													}
													forEach(p) {
														for (const [g, h] of this._entries.entries())
															p(g, h);
													}
													has(p) {
														return this._entries.has(p);
													}
													get(p) {
														return this._entries.get(p);
													}
												}
												((r.ServiceCollection = n),
													(r.InstantiationService = class {
														constructor() {
															((this._services = new n()),
																this._services.set(
																	l.IInstantiationService,
																	this,
																));
														}
														setService(d, p) {
															this._services.set(d, p);
														}
														getService(d) {
															return this._services.get(d);
														}
														createInstance(d, ...p) {
															const g = (0, _.getServiceDependencies)(d).sort(
																	(i, e) => i.index - e.index,
																),
																h = [];
															for (const i of g) {
																const e = this._services.get(i.id);
																if (!e)
																	throw new Error(
																		`[createInstance] ${d.name} depends on UNKNOWN service ${i.id}.`,
																	);
																h.push(e);
															}
															const s = g.length > 0 ? g[0].index : p.length;
															if (p.length !== s)
																throw new Error(
																	`[createInstance] First service dependency of ${d.name} at position ${s + 1} conflicts with ${p.length} static arguments`,
																);
															return new d(...p, ...h);
														}
													}));
											},
											7866: function (I, r, a) {
												var l =
														(this && this.__decorate) ||
														function (s, i, e, t) {
															var o,
																f = arguments.length,
																u =
																	f < 3
																		? i
																		: t === null
																			? (t = Object.getOwnPropertyDescriptor(
																					i,
																					e,
																				))
																			: t;
															if (
																typeof Reflect == 'object' &&
																typeof Reflect.decorate == 'function'
															)
																u = Reflect.decorate(s, i, e, t);
															else
																for (var v = s.length - 1; v >= 0; v--)
																	(o = s[v]) &&
																		(u =
																			(f < 3
																				? o(u)
																				: f > 3
																					? o(i, e, u)
																					: o(i, e)) || u);
															return (
																f > 3 && u && Object.defineProperty(i, e, u),
																u
															);
														},
													_ =
														(this && this.__param) ||
														function (s, i) {
															return function (e, t) {
																i(e, t, s);
															};
														};
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.traceCall =
														r.setTraceLogger =
														r.LogService =
															void 0));
												const n = a(844),
													d = a(2585),
													p = {
														trace: d.LogLevelEnum.TRACE,
														debug: d.LogLevelEnum.DEBUG,
														info: d.LogLevelEnum.INFO,
														warn: d.LogLevelEnum.WARN,
														error: d.LogLevelEnum.ERROR,
														off: d.LogLevelEnum.OFF,
													};
												let g,
													h = (r.LogService = class extends n.Disposable {
														get logLevel() {
															return this._logLevel;
														}
														constructor(s) {
															(super(),
																(this._optionsService = s),
																(this._logLevel = d.LogLevelEnum.OFF),
																this._updateLogLevel(),
																this.register(
																	this._optionsService.onSpecificOptionChange(
																		'logLevel',
																		() => this._updateLogLevel(),
																	),
																),
																(g = this));
														}
														_updateLogLevel() {
															this._logLevel =
																p[this._optionsService.rawOptions.logLevel];
														}
														_evalLazyOptionalParams(s) {
															for (let i = 0; i < s.length; i++)
																typeof s[i] == 'function' && (s[i] = s[i]());
														}
														_log(s, i, e) {
															(this._evalLazyOptionalParams(e),
																s.call(
																	console,
																	(this._optionsService.options.logger
																		? ''
																		: 'xterm.js: ') + i,
																	...e,
																));
														}
														trace(s, ...i) {
															var e;
															this._logLevel <= d.LogLevelEnum.TRACE &&
																this._log(
																	((e = this._optionsService.options.logger) ==
																	null
																		? void 0
																		: e.trace.bind(
																				this._optionsService.options.logger,
																			)) ?? console.log,
																	s,
																	i,
																);
														}
														debug(s, ...i) {
															var e;
															this._logLevel <= d.LogLevelEnum.DEBUG &&
																this._log(
																	((e = this._optionsService.options.logger) ==
																	null
																		? void 0
																		: e.debug.bind(
																				this._optionsService.options.logger,
																			)) ?? console.log,
																	s,
																	i,
																);
														}
														info(s, ...i) {
															var e;
															this._logLevel <= d.LogLevelEnum.INFO &&
																this._log(
																	((e = this._optionsService.options.logger) ==
																	null
																		? void 0
																		: e.info.bind(
																				this._optionsService.options.logger,
																			)) ?? console.info,
																	s,
																	i,
																);
														}
														warn(s, ...i) {
															var e;
															this._logLevel <= d.LogLevelEnum.WARN &&
																this._log(
																	((e = this._optionsService.options.logger) ==
																	null
																		? void 0
																		: e.warn.bind(
																				this._optionsService.options.logger,
																			)) ?? console.warn,
																	s,
																	i,
																);
														}
														error(s, ...i) {
															var e;
															this._logLevel <= d.LogLevelEnum.ERROR &&
																this._log(
																	((e = this._optionsService.options.logger) ==
																	null
																		? void 0
																		: e.error.bind(
																				this._optionsService.options.logger,
																			)) ?? console.error,
																	s,
																	i,
																);
														}
													});
												((r.LogService = h = l([_(0, d.IOptionsService)], h)),
													(r.setTraceLogger = function (s) {
														g = s;
													}),
													(r.traceCall = function (s, i, e) {
														if (typeof e.value != 'function')
															throw new Error('not supported');
														const t = e.value;
														e.value = function (...o) {
															if (g.logLevel !== d.LogLevelEnum.TRACE)
																return t.apply(this, o);
															g.trace(
																`GlyphRenderer#${t.name}(${o.map((u) => JSON.stringify(u)).join(', ')})`,
															);
															const f = t.apply(this, o);
															return (
																g.trace(`GlyphRenderer#${t.name} return`, f),
																f
															);
														};
													}));
											},
											7302: (I, r, a) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.OptionsService = r.DEFAULT_OPTIONS = void 0));
												const l = a(8460),
													_ = a(844),
													n = a(6114);
												r.DEFAULT_OPTIONS = {
													cols: 80,
													rows: 24,
													cursorBlink: !1,
													cursorStyle: 'block',
													cursorWidth: 1,
													cursorInactiveStyle: 'outline',
													customGlyphs: !0,
													drawBoldTextInBrightColors: !0,
													documentOverride: null,
													fastScrollModifier: 'alt',
													fastScrollSensitivity: 5,
													fontFamily: 'courier-new, courier, monospace',
													fontSize: 15,
													fontWeight: 'normal',
													fontWeightBold: 'bold',
													ignoreBracketedPasteMode: !1,
													lineHeight: 1,
													letterSpacing: 0,
													linkHandler: null,
													logLevel: 'info',
													logger: null,
													scrollback: 1e3,
													scrollOnUserInput: !0,
													scrollSensitivity: 1,
													screenReaderMode: !1,
													smoothScrollDuration: 0,
													macOptionIsMeta: !1,
													macOptionClickForcesSelection: !1,
													minimumContrastRatio: 1,
													disableStdin: !1,
													allowProposedApi: !1,
													allowTransparency: !1,
													tabStopWidth: 8,
													theme: {},
													rescaleOverlappingGlyphs: !1,
													rightClickSelectsWord: n.isMac,
													windowOptions: {},
													windowsMode: !1,
													windowsPty: {},
													wordSeparator: ' ()[]{}\',"`',
													altClickMovesCursor: !0,
													convertEol: !1,
													termName: 'xterm',
													cancelEvents: !1,
													overviewRulerWidth: 0,
												};
												const d = [
													'normal',
													'bold',
													'100',
													'200',
													'300',
													'400',
													'500',
													'600',
													'700',
													'800',
													'900',
												];
												class p extends _.Disposable {
													constructor(h) {
														(super(),
															(this._onOptionChange = this.register(
																new l.EventEmitter(),
															)),
															(this.onOptionChange =
																this._onOptionChange.event));
														const s = { ...r.DEFAULT_OPTIONS };
														for (const i in h)
															if (i in s)
																try {
																	const e = h[i];
																	s[i] = this._sanitizeAndValidateOption(i, e);
																} catch (e) {
																	console.error(e);
																}
														((this.rawOptions = s),
															(this.options = { ...s }),
															this._setupOptions(),
															this.register(
																(0, _.toDisposable)(() => {
																	((this.rawOptions.linkHandler = null),
																		(this.rawOptions.documentOverride = null));
																}),
															));
													}
													onSpecificOptionChange(h, s) {
														return this.onOptionChange((i) => {
															i === h && s(this.rawOptions[h]);
														});
													}
													onMultipleOptionChange(h, s) {
														return this.onOptionChange((i) => {
															h.indexOf(i) !== -1 && s();
														});
													}
													_setupOptions() {
														const h = (i) => {
																if (!(i in r.DEFAULT_OPTIONS))
																	throw new Error(`No option with key "${i}"`);
																return this.rawOptions[i];
															},
															s = (i, e) => {
																if (!(i in r.DEFAULT_OPTIONS))
																	throw new Error(`No option with key "${i}"`);
																((e = this._sanitizeAndValidateOption(i, e)),
																	this.rawOptions[i] !== e &&
																		((this.rawOptions[i] = e),
																		this._onOptionChange.fire(i)));
															};
														for (const i in this.rawOptions) {
															const e = {
																get: h.bind(this, i),
																set: s.bind(this, i),
															};
															Object.defineProperty(this.options, i, e);
														}
													}
													_sanitizeAndValidateOption(h, s) {
														switch (h) {
															case 'cursorStyle':
																if (
																	(s || (s = r.DEFAULT_OPTIONS[h]),
																	!(function (i) {
																		return (
																			i === 'block' ||
																			i === 'underline' ||
																			i === 'bar'
																		);
																	})(s))
																)
																	throw new Error(
																		`"${s}" is not a valid value for ${h}`,
																	);
																break;
															case 'wordSeparator':
																s || (s = r.DEFAULT_OPTIONS[h]);
																break;
															case 'fontWeight':
															case 'fontWeightBold':
																if (typeof s == 'number' && 1 <= s && s <= 1e3)
																	break;
																s = d.includes(s) ? s : r.DEFAULT_OPTIONS[h];
																break;
															case 'cursorWidth':
																s = Math.floor(s);
															case 'lineHeight':
															case 'tabStopWidth':
																if (s < 1)
																	throw new Error(
																		`${h} cannot be less than 1, value: ${s}`,
																	);
																break;
															case 'minimumContrastRatio':
																s = Math.max(
																	1,
																	Math.min(21, Math.round(10 * s) / 10),
																);
																break;
															case 'scrollback':
																if ((s = Math.min(s, 4294967295)) < 0)
																	throw new Error(
																		`${h} cannot be less than 0, value: ${s}`,
																	);
																break;
															case 'fastScrollSensitivity':
															case 'scrollSensitivity':
																if (s <= 0)
																	throw new Error(
																		`${h} cannot be less than or equal to 0, value: ${s}`,
																	);
																break;
															case 'rows':
															case 'cols':
																if (!s && s !== 0)
																	throw new Error(
																		`${h} must be numeric, value: ${s}`,
																	);
																break;
															case 'windowsPty':
																s = s ?? {};
														}
														return s;
													}
												}
												r.OptionsService = p;
											},
											2660: function (I, r, a) {
												var l =
														(this && this.__decorate) ||
														function (p, g, h, s) {
															var i,
																e = arguments.length,
																t =
																	e < 3
																		? g
																		: s === null
																			? (s = Object.getOwnPropertyDescriptor(
																					g,
																					h,
																				))
																			: s;
															if (
																typeof Reflect == 'object' &&
																typeof Reflect.decorate == 'function'
															)
																t = Reflect.decorate(p, g, h, s);
															else
																for (var o = p.length - 1; o >= 0; o--)
																	(i = p[o]) &&
																		(t =
																			(e < 3
																				? i(t)
																				: e > 3
																					? i(g, h, t)
																					: i(g, h)) || t);
															return (
																e > 3 && t && Object.defineProperty(g, h, t),
																t
															);
														},
													_ =
														(this && this.__param) ||
														function (p, g) {
															return function (h, s) {
																g(h, s, p);
															};
														};
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.OscLinkService = void 0));
												const n = a(2585);
												let d = (r.OscLinkService = class {
													constructor(p) {
														((this._bufferService = p),
															(this._nextId = 1),
															(this._entriesWithId = new Map()),
															(this._dataByLinkId = new Map()));
													}
													registerLink(p) {
														const g = this._bufferService.buffer;
														if (p.id === void 0) {
															const o = g.addMarker(g.ybase + g.y),
																f = { data: p, id: this._nextId++, lines: [o] };
															return (
																o.onDispose(() =>
																	this._removeMarkerFromLink(f, o),
																),
																this._dataByLinkId.set(f.id, f),
																f.id
															);
														}
														const h = p,
															s = this._getEntryIdKey(h),
															i = this._entriesWithId.get(s);
														if (i)
															return (
																this.addLineToLink(i.id, g.ybase + g.y),
																i.id
															);
														const e = g.addMarker(g.ybase + g.y),
															t = {
																id: this._nextId++,
																key: this._getEntryIdKey(h),
																data: h,
																lines: [e],
															};
														return (
															e.onDispose(() =>
																this._removeMarkerFromLink(t, e),
															),
															this._entriesWithId.set(t.key, t),
															this._dataByLinkId.set(t.id, t),
															t.id
														);
													}
													addLineToLink(p, g) {
														const h = this._dataByLinkId.get(p);
														if (h && h.lines.every((s) => s.line !== g)) {
															const s = this._bufferService.buffer.addMarker(g);
															(h.lines.push(s),
																s.onDispose(() =>
																	this._removeMarkerFromLink(h, s),
																));
														}
													}
													getLinkData(p) {
														var g;
														return (g = this._dataByLinkId.get(p)) == null
															? void 0
															: g.data;
													}
													_getEntryIdKey(p) {
														return `${p.id};;${p.uri}`;
													}
													_removeMarkerFromLink(p, g) {
														const h = p.lines.indexOf(g);
														h !== -1 &&
															(p.lines.splice(h, 1),
															p.lines.length === 0 &&
																(p.data.id !== void 0 &&
																	this._entriesWithId.delete(p.key),
																this._dataByLinkId.delete(p.id)));
													}
												});
												r.OscLinkService = d = l([_(0, n.IBufferService)], d);
											},
											8343: (I, r) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.createDecorator =
														r.getServiceDependencies =
														r.serviceRegistry =
															void 0));
												const a = 'di$target',
													l = 'di$dependencies';
												((r.serviceRegistry = new Map()),
													(r.getServiceDependencies = function (_) {
														return _[l] || [];
													}),
													(r.createDecorator = function (_) {
														if (r.serviceRegistry.has(_))
															return r.serviceRegistry.get(_);
														const n = function (d, p, g) {
															if (arguments.length !== 3)
																throw new Error(
																	'@IServiceName-decorator can only be used to decorate a parameter',
																);
															(function (h, s, i) {
																s[a] === s
																	? s[l].push({ id: h, index: i })
																	: ((s[l] = [{ id: h, index: i }]),
																		(s[a] = s));
															})(n, d, g);
														};
														return (
															(n.toString = () => _),
															r.serviceRegistry.set(_, n),
															n
														);
													}));
											},
											2585: (I, r, a) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.IDecorationService =
														r.IUnicodeService =
														r.IOscLinkService =
														r.IOptionsService =
														r.ILogService =
														r.LogLevelEnum =
														r.IInstantiationService =
														r.ICharsetService =
														r.ICoreService =
														r.ICoreMouseService =
														r.IBufferService =
															void 0));
												const l = a(8343);
												var _;
												((r.IBufferService = (0, l.createDecorator)(
													'BufferService',
												)),
													(r.ICoreMouseService = (0, l.createDecorator)(
														'CoreMouseService',
													)),
													(r.ICoreService = (0, l.createDecorator)(
														'CoreService',
													)),
													(r.ICharsetService = (0, l.createDecorator)(
														'CharsetService',
													)),
													(r.IInstantiationService = (0, l.createDecorator)(
														'InstantiationService',
													)),
													(function (n) {
														((n[(n.TRACE = 0)] = 'TRACE'),
															(n[(n.DEBUG = 1)] = 'DEBUG'),
															(n[(n.INFO = 2)] = 'INFO'),
															(n[(n.WARN = 3)] = 'WARN'),
															(n[(n.ERROR = 4)] = 'ERROR'),
															(n[(n.OFF = 5)] = 'OFF'));
													})(_ || (r.LogLevelEnum = _ = {})),
													(r.ILogService = (0, l.createDecorator)(
														'LogService',
													)),
													(r.IOptionsService = (0, l.createDecorator)(
														'OptionsService',
													)),
													(r.IOscLinkService = (0, l.createDecorator)(
														'OscLinkService',
													)),
													(r.IUnicodeService = (0, l.createDecorator)(
														'UnicodeService',
													)),
													(r.IDecorationService = (0, l.createDecorator)(
														'DecorationService',
													)));
											},
											1480: (I, r, a) => {
												(Object.defineProperty(r, '__esModule', { value: !0 }),
													(r.UnicodeService = void 0));
												const l = a(8460),
													_ = a(225);
												class n {
													static extractShouldJoin(p) {
														return (1 & p) != 0;
													}
													static extractWidth(p) {
														return (p >> 1) & 3;
													}
													static extractCharKind(p) {
														return p >> 3;
													}
													static createPropertyValue(p, g, h = !1) {
														return (
															((16777215 & p) << 3) |
															((3 & g) << 1) |
															(h ? 1 : 0)
														);
													}
													constructor() {
														((this._providers = Object.create(null)),
															(this._active = ''),
															(this._onChange = new l.EventEmitter()),
															(this.onChange = this._onChange.event));
														const p = new _.UnicodeV6();
														(this.register(p),
															(this._active = p.version),
															(this._activeProvider = p));
													}
													dispose() {
														this._onChange.dispose();
													}
													get versions() {
														return Object.keys(this._providers);
													}
													get activeVersion() {
														return this._active;
													}
													set activeVersion(p) {
														if (!this._providers[p])
															throw new Error(`unknown Unicode version "${p}"`);
														((this._active = p),
															(this._activeProvider = this._providers[p]),
															this._onChange.fire(p));
													}
													register(p) {
														this._providers[p.version] = p;
													}
													wcwidth(p) {
														return this._activeProvider.wcwidth(p);
													}
													getStringCellWidth(p) {
														let g = 0,
															h = 0;
														const s = p.length;
														for (let i = 0; i < s; ++i) {
															let e = p.charCodeAt(i);
															if (55296 <= e && e <= 56319) {
																if (++i >= s) return g + this.wcwidth(e);
																const f = p.charCodeAt(i);
																56320 <= f && f <= 57343
																	? (e = 1024 * (e - 55296) + f - 56320 + 65536)
																	: (g += this.wcwidth(f));
															}
															const t = this.charProperties(e, h);
															let o = n.extractWidth(t);
															(n.extractShouldJoin(t) &&
																(o -= n.extractWidth(h)),
																(g += o),
																(h = t));
														}
														return g;
													}
													charProperties(p, g) {
														return this._activeProvider.charProperties(p, g);
													}
												}
												r.UnicodeService = n;
											},
										},
										ue = {};
									function P(I) {
										var r = ue[I];
										if (r !== void 0) return r.exports;
										var a = (ue[I] = { exports: {} });
										return (le[I].call(a.exports, a, a.exports, P), a.exports);
									}
									var ae = {};
									return (
										(() => {
											var I = ae;
											(Object.defineProperty(I, '__esModule', { value: !0 }),
												(I.Terminal = void 0));
											const r = P(9042),
												a = P(3236),
												l = P(844),
												_ = P(5741),
												n = P(8285),
												d = P(7975),
												p = P(7090),
												g = ['cols', 'rows'];
											class h extends l.Disposable {
												constructor(i) {
													(super(),
														(this._core = this.register(new a.Terminal(i))),
														(this._addonManager = this.register(
															new _.AddonManager(),
														)),
														(this._publicOptions = { ...this._core.options }));
													const e = (o) => this._core.options[o],
														t = (o, f) => {
															(this._checkReadonlyOptions(o),
																(this._core.options[o] = f));
														};
													for (const o in this._core.options) {
														const f = {
															get: e.bind(this, o),
															set: t.bind(this, o),
														};
														Object.defineProperty(this._publicOptions, o, f);
													}
												}
												_checkReadonlyOptions(i) {
													if (g.includes(i))
														throw new Error(
															`Option "${i}" can only be set in the constructor`,
														);
												}
												_checkProposedApi() {
													if (
														!this._core.optionsService.rawOptions
															.allowProposedApi
													)
														throw new Error(
															'You must set the allowProposedApi option to true to use proposed API',
														);
												}
												get onBell() {
													return this._core.onBell;
												}
												get onBinary() {
													return this._core.onBinary;
												}
												get onCursorMove() {
													return this._core.onCursorMove;
												}
												get onData() {
													return this._core.onData;
												}
												get onKey() {
													return this._core.onKey;
												}
												get onLineFeed() {
													return this._core.onLineFeed;
												}
												get onRender() {
													return this._core.onRender;
												}
												get onResize() {
													return this._core.onResize;
												}
												get onScroll() {
													return this._core.onScroll;
												}
												get onSelectionChange() {
													return this._core.onSelectionChange;
												}
												get onTitleChange() {
													return this._core.onTitleChange;
												}
												get onWriteParsed() {
													return this._core.onWriteParsed;
												}
												get element() {
													return this._core.element;
												}
												get parser() {
													return (
														this._parser ||
															(this._parser = new d.ParserApi(this._core)),
														this._parser
													);
												}
												get unicode() {
													return (
														this._checkProposedApi(),
														new p.UnicodeApi(this._core)
													);
												}
												get textarea() {
													return this._core.textarea;
												}
												get rows() {
													return this._core.rows;
												}
												get cols() {
													return this._core.cols;
												}
												get buffer() {
													return (
														this._buffer ||
															(this._buffer = this.register(
																new n.BufferNamespaceApi(this._core),
															)),
														this._buffer
													);
												}
												get markers() {
													return (this._checkProposedApi(), this._core.markers);
												}
												get modes() {
													const i = this._core.coreService.decPrivateModes;
													let e = 'none';
													switch (this._core.coreMouseService.activeProtocol) {
														case 'X10':
															e = 'x10';
															break;
														case 'VT200':
															e = 'vt200';
															break;
														case 'DRAG':
															e = 'drag';
															break;
														case 'ANY':
															e = 'any';
													}
													return {
														applicationCursorKeysMode: i.applicationCursorKeys,
														applicationKeypadMode: i.applicationKeypad,
														bracketedPasteMode: i.bracketedPasteMode,
														insertMode: this._core.coreService.modes.insertMode,
														mouseTrackingMode: e,
														originMode: i.origin,
														reverseWraparoundMode: i.reverseWraparound,
														sendFocusMode: i.sendFocus,
														wraparoundMode: i.wraparound,
													};
												}
												get options() {
													return this._publicOptions;
												}
												set options(i) {
													for (const e in i) this._publicOptions[e] = i[e];
												}
												blur() {
													this._core.blur();
												}
												focus() {
													this._core.focus();
												}
												input(i, e = !0) {
													this._core.input(i, e);
												}
												resize(i, e) {
													(this._verifyIntegers(i, e), this._core.resize(i, e));
												}
												open(i) {
													this._core.open(i);
												}
												attachCustomKeyEventHandler(i) {
													this._core.attachCustomKeyEventHandler(i);
												}
												attachCustomWheelEventHandler(i) {
													this._core.attachCustomWheelEventHandler(i);
												}
												registerLinkProvider(i) {
													return this._core.registerLinkProvider(i);
												}
												registerCharacterJoiner(i) {
													return (
														this._checkProposedApi(),
														this._core.registerCharacterJoiner(i)
													);
												}
												deregisterCharacterJoiner(i) {
													(this._checkProposedApi(),
														this._core.deregisterCharacterJoiner(i));
												}
												registerMarker(i = 0) {
													return (
														this._verifyIntegers(i),
														this._core.registerMarker(i)
													);
												}
												registerDecoration(i) {
													return (
														this._checkProposedApi(),
														this._verifyPositiveIntegers(
															i.x ?? 0,
															i.width ?? 0,
															i.height ?? 0,
														),
														this._core.registerDecoration(i)
													);
												}
												hasSelection() {
													return this._core.hasSelection();
												}
												select(i, e, t) {
													(this._verifyIntegers(i, e, t),
														this._core.select(i, e, t));
												}
												getSelection() {
													return this._core.getSelection();
												}
												getSelectionPosition() {
													return this._core.getSelectionPosition();
												}
												clearSelection() {
													this._core.clearSelection();
												}
												selectAll() {
													this._core.selectAll();
												}
												selectLines(i, e) {
													(this._verifyIntegers(i, e),
														this._core.selectLines(i, e));
												}
												dispose() {
													super.dispose();
												}
												scrollLines(i) {
													(this._verifyIntegers(i), this._core.scrollLines(i));
												}
												scrollPages(i) {
													(this._verifyIntegers(i), this._core.scrollPages(i));
												}
												scrollToTop() {
													this._core.scrollToTop();
												}
												scrollToBottom() {
													this._core.scrollToBottom();
												}
												scrollToLine(i) {
													(this._verifyIntegers(i), this._core.scrollToLine(i));
												}
												clear() {
													this._core.clear();
												}
												write(i, e) {
													this._core.write(i, e);
												}
												writeln(i, e) {
													(this._core.write(i),
														this._core.write(
															`\r
`,
															e,
														));
												}
												paste(i) {
													this._core.paste(i);
												}
												refresh(i, e) {
													(this._verifyIntegers(i, e),
														this._core.refresh(i, e));
												}
												reset() {
													this._core.reset();
												}
												clearTextureAtlas() {
													this._core.clearTextureAtlas();
												}
												loadAddon(i) {
													this._addonManager.loadAddon(this, i);
												}
												static get strings() {
													return r;
												}
												_verifyIntegers(...i) {
													for (const e of i)
														if (e === 1 / 0 || isNaN(e) || e % 1 != 0)
															throw new Error('This API only accepts integers');
												}
												_verifyPositiveIntegers(...i) {
													for (const e of i)
														if (
															e &&
															(e === 1 / 0 || isNaN(e) || e % 1 != 0 || e < 0)
														)
															throw new Error(
																'This API only accepts positive integers',
															);
												}
											}
											I.Terminal = h;
										})(),
										ae
									);
								})(),
							);
						})($e)),
					$e.exports
				);
			}
			var gt = vt();
			const tt = '3.7.8',
				mt = tt,
				Ie = typeof Buffer == 'function',
				Xe = typeof TextDecoder == 'function' ? new TextDecoder() : void 0,
				Je = typeof TextEncoder == 'function' ? new TextEncoder() : void 0,
				St =
					'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=',
				Fe = Array.prototype.slice.call(St),
				We = ((T) => {
					let X = {};
					return (T.forEach((le, ue) => (X[le] = ue)), X);
				})(Fe),
				Ct =
					/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,
				we = String.fromCharCode.bind(String),
				Ye =
					typeof Uint8Array.from == 'function'
						? Uint8Array.from.bind(Uint8Array)
						: (T) => new Uint8Array(Array.prototype.slice.call(T, 0)),
				it = (T) =>
					T.replace(/=/g, '').replace(/[+\/]/g, (X) => (X == '+' ? '-' : '_')),
				st = (T) => T.replace(/[^A-Za-z0-9\+\/]/g, ''),
				rt = (T) => {
					let X,
						le,
						ue,
						P,
						ae = '';
					const I = T.length % 3;
					for (let r = 0; r < T.length; ) {
						if (
							(le = T.charCodeAt(r++)) > 255 ||
							(ue = T.charCodeAt(r++)) > 255 ||
							(P = T.charCodeAt(r++)) > 255
						)
							throw new TypeError('invalid character found');
						((X = (le << 16) | (ue << 8) | P),
							(ae +=
								Fe[(X >> 18) & 63] +
								Fe[(X >> 12) & 63] +
								Fe[(X >> 6) & 63] +
								Fe[X & 63]));
					}
					return I ? ae.slice(0, I - 3) + '==='.substring(I) : ae;
				},
				qe =
					typeof btoa == 'function'
						? (T) => btoa(T)
						: Ie
							? (T) => Buffer.from(T, 'binary').toString('base64')
							: rt,
				je = Ie
					? (T) => Buffer.from(T).toString('base64')
					: (T) => {
							let le = [];
							for (let ue = 0, P = T.length; ue < P; ue += 4096)
								le.push(we.apply(null, T.subarray(ue, ue + 4096)));
							return qe(le.join(''));
						},
				Ue = (T, X = !1) => (X ? it(je(T)) : je(T)),
				bt = (T) => {
					if (T.length < 2) {
						var X = T.charCodeAt(0);
						return X < 128
							? T
							: X < 2048
								? we(192 | (X >>> 6)) + we(128 | (X & 63))
								: we(224 | ((X >>> 12) & 15)) +
									we(128 | ((X >>> 6) & 63)) +
									we(128 | (X & 63));
					} else {
						var X =
							65536 +
							(T.charCodeAt(0) - 55296) * 1024 +
							(T.charCodeAt(1) - 56320);
						return (
							we(240 | ((X >>> 18) & 7)) +
							we(128 | ((X >>> 12) & 63)) +
							we(128 | ((X >>> 6) & 63)) +
							we(128 | (X & 63))
						);
					}
				},
				yt = /[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,
				nt = (T) => T.replace(yt, bt),
				Ze = Ie
					? (T) => Buffer.from(T, 'utf8').toString('base64')
					: Je
						? (T) => je(Je.encode(T))
						: (T) => qe(nt(T)),
				Pe = (T, X = !1) => (X ? it(Ze(T)) : Ze(T)),
				Qe = (T) => Pe(T, !0),
				wt =
					/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,
				Et = (T) => {
					switch (T.length) {
						case 4:
							var X =
									((7 & T.charCodeAt(0)) << 18) |
									((63 & T.charCodeAt(1)) << 12) |
									((63 & T.charCodeAt(2)) << 6) |
									(63 & T.charCodeAt(3)),
								le = X - 65536;
							return we((le >>> 10) + 55296) + we((le & 1023) + 56320);
						case 3:
							return we(
								((15 & T.charCodeAt(0)) << 12) |
									((63 & T.charCodeAt(1)) << 6) |
									(63 & T.charCodeAt(2)),
							);
						default:
							return we(((31 & T.charCodeAt(0)) << 6) | (63 & T.charCodeAt(1)));
					}
				},
				ot = (T) => T.replace(wt, Et),
				at = (T) => {
					if (((T = T.replace(/\s+/g, '')), !Ct.test(T)))
						throw new TypeError('malformed base64.');
					T += '=='.slice(2 - (T.length & 3));
					let X,
						le,
						ue,
						P = [];
					for (let ae = 0; ae < T.length; )
						((X =
							(We[T.charAt(ae++)] << 18) |
							(We[T.charAt(ae++)] << 12) |
							((le = We[T.charAt(ae++)]) << 6) |
							(ue = We[T.charAt(ae++)])),
							le === 64
								? P.push(we((X >> 16) & 255))
								: ue === 64
									? P.push(we((X >> 16) & 255, (X >> 8) & 255))
									: P.push(we((X >> 16) & 255, (X >> 8) & 255, X & 255)));
					return P.join('');
				},
				Ke =
					typeof atob == 'function'
						? (T) => atob(st(T))
						: Ie
							? (T) => Buffer.from(T, 'base64').toString('binary')
							: at,
				ht = Ie
					? (T) => Ye(Buffer.from(T, 'base64'))
					: (T) =>
							Ye(
								Ke(T)
									.split('')
									.map((X) => X.charCodeAt(0)),
							),
				ct = (T) => ht(lt(T)),
				kt = Ie
					? (T) => Buffer.from(T, 'base64').toString('utf8')
					: Xe
						? (T) => Xe.decode(ht(T))
						: (T) => ot(Ke(T)),
				lt = (T) => st(T.replace(/[-_]/g, (X) => (X == '-' ? '+' : '/'))),
				ze = (T) => kt(lt(T)),
				Lt = (T) => {
					if (typeof T != 'string') return !1;
					const X = T.replace(/\s+/g, '').replace(/={0,2}$/, '');
					return !/[^\s0-9a-zA-Z\+/]/.test(X) || !/[^\s0-9a-zA-Z\-_]/.test(X);
				},
				dt = (T) => ({
					value: T,
					enumerable: !1,
					writable: !0,
					configurable: !0,
				}),
				ut = function () {
					const T = (X, le) =>
						Object.defineProperty(String.prototype, X, dt(le));
					(T('fromBase64', function () {
						return ze(this);
					}),
						T('toBase64', function (X) {
							return Pe(this, X);
						}),
						T('toBase64URI', function () {
							return Pe(this, !0);
						}),
						T('toBase64URL', function () {
							return Pe(this, !0);
						}),
						T('toUint8Array', function () {
							return ct(this);
						}));
				},
				_t = function () {
					const T = (X, le) =>
						Object.defineProperty(Uint8Array.prototype, X, dt(le));
					(T('toBase64', function (X) {
						return Ue(this, X);
					}),
						T('toBase64URI', function () {
							return Ue(this, !0);
						}),
						T('toBase64URL', function () {
							return Ue(this, !0);
						}));
				},
				xt = () => {
					(ut(), _t());
				},
				Dt = {
					version: tt,
					VERSION: mt,
					atob: Ke,
					atobPolyfill: at,
					btoa: qe,
					btoaPolyfill: rt,
					fromBase64: ze,
					toBase64: Pe,
					encode: Pe,
					encodeURI: Qe,
					encodeURL: Qe,
					utob: nt,
					btou: ot,
					decode: ze,
					isValid: Lt,
					fromUint8Array: Ue,
					toUint8Array: ct,
					extendString: ut,
					extendUint8Array: _t,
					extendBuiltins: xt,
				},
				Rt = (T) => Dt.toUint8Array(T),
				pe = (T) => {
					var X, le;
					return (le =
						(X = window.ReactNativeWebView) == null ? void 0 : X.postMessage) ==
						null
						? void 0
						: le.call(X, JSON.stringify(T));
				};
			window.onload = () => {
				var T, X;
				try {
					if (window.__FRESSH_XTERM_BRIDGE__) {
						pe({
							type: 'debug',
							message: 'bridge already installed; ignoring duplicate boot',
						});
						return;
					}
					const le =
						(X =
							(T = window.ReactNativeWebView) == null
								? void 0
								: T.injectedObjectJson) == null
							? void 0
							: X.call(T);
					let ue = {};
					if (le)
						try {
							ue = JSON.parse(le);
						} catch (R) {
							window.__FRESSH_XTERM_OPTIONS__
								? ((ue = window.__FRESSH_XTERM_OPTIONS__),
									pe({
										type: 'debug',
										message:
											'injectedObjectJson invalid; using preloaded options',
									}))
								: pe({
										type: 'debug',
										message: `injectedObjectJson invalid; using defaults (${String(R)})`,
									});
						}
					else
						window.__FRESSH_XTERM_OPTIONS__
							? ((ue = window.__FRESSH_XTERM_OPTIONS__),
								pe({
									type: 'debug',
									message:
										'injectedObjectJson not found; using preloaded options',
								}))
							: pe({
									type: 'debug',
									message: 'injectedObjectJson not found; using defaults',
								});
					window.__FRESSH_XTERM_BRIDGE__ = !0;
					const P = new gt.Terminal(ue),
						ae = new pt.FitAddon();
					P.loadAddon(ae);
					const I = document.getElementById('terminal');
					if (
						(P.open(I),
						ae.fit(),
						document.documentElement &&
							(document.documentElement.style.overflow = 'hidden'),
						document.body && (document.body.style.overflow = 'hidden'),
						P.element &&
							((P.element.style.position = 'relative'),
							(P.element.style.overflow = 'hidden')),
						(I.style.position = 'relative'),
						(I.style.overflow = 'hidden'),
						!window.ReactNativeWebView)
					) {
						const R = {
							background: '#0b1220',
							foreground: '#e2e8f0',
							selectionBackground: 'rgba(26, 115, 232, 0.35)',
							selectionInactiveBackground: 'rgba(26, 115, 232, 0.2)',
						};
						((P.options.theme = { ...(P.options.theme ?? {}), ...R }),
							document.body &&
								(document.body.style.backgroundColor = R.background),
							P.writeln('Fressh handle dev view'),
							P.writeln('Long-press to enter selection mode.'),
							P.writeln('Use this page to tune selection handles.'),
							P.writeln(''),
							P.writeln('The quick brown fox jumps over the lazy dog.'),
							P.writeln('0123456789 []{}() <>,.?/ +-*/'));
					}
					P.cols >= 2 &&
						P.rows >= 1 &&
						pe({ type: 'sizeChanged', cols: P.cols, rows: P.rows });
					const r = (R) => {
						if (!R) return;
						const U = P.element ?? document.querySelector('.xterm');
						U && (U.style.fontFamily = R);
						const O = document.querySelector('.xterm-helper-textarea');
						O && (O.style.fontFamily = R);
						const H = document.querySelector('.xterm-char-measure-element');
						H && (H.style.fontFamily = R);
					};
					r(ue.fontFamily);
					const a = 'fressh-selection-mode',
						l = 'fressh-selection-mode-style',
						_ = {
							disableStdin: !!P.options.disableStdin,
							screenReaderMode: !!P.options.screenReaderMode,
						};
					let n = !1,
						d = 0,
						p = '',
						g = null,
						h = null,
						s = null,
						i = null,
						e = null,
						t = null,
						o = null;
					const f = 'rgba(0, 0, 0, 0)',
						u = 36,
						v = 5,
						c = 48 * v,
						m = 48 * v,
						w = 48 * v,
						k = 0,
						L = 0,
						b = 48,
						A = { x: 24, y: 10 },
						M = { x: 24, y: 17 },
						$ = 500,
						V = 8,
						j = 300,
						S = () => {
							if (document.getElementById(l)) return;
							const R = document.createElement('style');
							((R.id = l),
								(R.type = 'text/css'),
								(R.textContent = `
.${a} .xterm .xterm-accessibility {
	pointer-events: auto !important;
}
.${a} .xterm .xterm-accessibility-tree {
	user-select: text !important;
	-webkit-user-select: text !important;
}
.${a} .fressh-selection-handle {
	position: absolute;
	/* Larger hit area for touch; lollipop glyph is a child element. */
	width: ${c}px;
	height: ${c}px;
	background: transparent;
	box-sizing: border-box;
	border: 1px dashed #ff3b30;
	touch-action: none;
	z-index: 30;
	pointer-events: auto;
}
.${a} .fressh-selection-handle-glyph {
	position: absolute;
	left: ${k}px;
	top: ${L}px;
	width: ${m}px;
	height: ${w}px;
}
.${a} .fressh-selection-handle-glyph path {
	/* Temporary debug color to confirm updated handle rendering. */
	fill: #1a73e8;
	pointer-events: none;
}
.${a} .fressh-selection-handle-clip {
	position: absolute;
	border: 1px solid #22c55e;
	box-sizing: border-box;
	pointer-events: none;
}
`),
								(document.head || document.documentElement).appendChild(R));
						},
						y = () => {
							var ie, Z, Q, de, re;
							const R = P,
								U =
									R._mouseService ??
									((ie = R._core) == null ? void 0 : ie._mouseService),
								O =
									R.screenElement ??
									((Z = R._core) == null ? void 0 : Z._screenElement) ??
									((Q = P.element) == null
										? void 0
										: Q.querySelector('.xterm-screen')),
								H =
									R._bufferService ??
									((de = R._core) == null ? void 0 : de._bufferService),
								N =
									R._selectionService ??
									((re = R._core) == null ? void 0 : re._selectionService),
								G = N == null ? void 0 : N._workCell;
							return !U || !O || !H || !N
								? null
								: {
										mouseService: U,
										screenElement: O,
										bufferService: H,
										selectionService: N,
										workCell: G,
									};
						},
						E = () => {
							var H, N, G, ie, Z, Q, de;
							const R =
									P._renderService ??
									((H = P._core) == null ? void 0 : H._renderService),
								U =
									(ie =
										(G =
											(N = R == null ? void 0 : R.dimensions) == null
												? void 0
												: N.css) == null
											? void 0
											: G.cell) == null
										? void 0
										: ie.width,
								O =
									(de =
										(Q =
											(Z = R == null ? void 0 : R.dimensions) == null
												? void 0
												: Z.css) == null
											? void 0
											: Q.cell) == null
										? void 0
										: de.height;
							return !U || !O ? null : { cellWidth: U, cellHeight: O };
						},
						x = (R, U, O) => {
							const H = (U[0] - R[0]) * O.cellWidth,
								N = (U[1] - R[1]) * O.cellHeight;
							return Math.hypot(H, N);
						},
						W = (R, U, O) => {
							let [H, N] = R;
							return (
								U > 0
									? ((H += 1), H >= O && ((H = 0), (N += 1)))
									: ((H -= 1), H < 0 && ((H = O - 1), (N -= 1))),
								[H, N]
							);
						},
						z = (R, U, O, H, N) => {
							let G = U,
								ie = x(R, G, H),
								Z = 0;
							const Q = N.cols * 2;
							for (; ie < u && Z < Q; ) {
								const de = W(G, O, N.cols);
								if (de[1] < N.minRow || de[1] > N.maxRow) break;
								((G = de), (ie = x(R, G, H)), (Z += 1));
							}
							return { pos: G, achieved: ie >= u };
						},
						J = (R, U, O) => {
							const [H, N] = R;
							return H > 0 ? [H - 1, N] : N <= O ? [0, N] : [U - 1, N - 1];
						},
						Y = [
							'M31 10',
							'A7 7 0 1 0 17 10',
							'A7 7 0 1 0 31 10',
							'M22 17',
							'H26',
							'V30',
							'H22',
							'Z',
						].join(' '),
						D = (R, U) => {
							if (R.dataset.glyph === U) return;
							((R.textContent = ''), (R.dataset.glyph = U));
							const O = document.createElement('div');
							O.className = 'fressh-selection-handle-glyph';
							const H = document.createElementNS(
								'http://www.w3.org/2000/svg',
								'svg',
							);
							(H.setAttribute('width', String(m)),
								H.setAttribute('height', String(w)),
								H.setAttribute('viewBox', `0 0 ${b} ${b}`));
							const N = document.createElementNS(
								'http://www.w3.org/2000/svg',
								'g',
							);
							U === 'end' &&
								N.setAttribute('transform', 'translate(0 48) scale(1 -1)');
							const G = document.createElementNS(
								'http://www.w3.org/2000/svg',
								'path',
							);
							(G.setAttribute('d', Y),
								N.appendChild(G),
								H.appendChild(N),
								O.appendChild(H),
								R.appendChild(O));
							const ie = document.createElement('div');
							((ie.className = 'fressh-selection-handle-clip'),
								R.appendChild(ie));
						},
						C = (R) => {
							const U = R.querySelector('path');
							if (!U) return null;
							const O = U.getBBox();
							if (!Number.isFinite(O.x) || !Number.isFinite(O.width))
								return null;
							const H = m / b,
								N = w / b,
								ie =
									R.dataset.glyph === 'end' && Number.isFinite(O.height)
										? b - (O.y + O.height)
										: O.y;
							return {
								left: O.x * H,
								top: ie * N,
								width: O.width * H,
								height: O.height * N,
							};
						},
						F = (R) => {
							const U = R === 'start' ? A.y : b - A.y,
								O = R === 'start' ? M.y : b - M.y,
								H = (b / 2 - A.x) * v,
								N = (b / 2 - U) * v,
								G = H + M.x * v,
								ie = N + O * v;
							return {
								glyphLeft: k + H,
								glyphTop: L + N,
								anchorOffsetX: G,
								anchorOffsetY: ie,
							};
						},
						B = (R, U) => {
							R.parentElement ||
								((R.style.visibility = 'hidden'),
								(R.style.left = '0px'),
								(R.style.top = '0px'),
								U.appendChild(R));
						},
						K = (R, U) => {
							const O = R.querySelector('.fressh-selection-handle-glyph');
							O && (O.style.left = `${U}px`);
						},
						q = (R, U) => {
							const O = R.querySelector('.fressh-selection-handle-glyph');
							O && (O.style.top = `${U}px`);
						},
						oe = (R, U, O, H, N) => {
							const G = R.querySelector('.fressh-selection-handle-clip');
							G &&
								((G.style.left = `${U}px`),
								(G.style.top = `${O}px`),
								(G.style.width = `${H}px`),
								(G.style.height = `${N}px`));
						},
						Se = (R, U) => {
							const O = y();
							if (!O) return null;
							const H = O.mouseService.getCoords(
								{ clientX: R, clientY: U },
								O.screenElement,
								O.bufferService.cols,
								O.bufferService.rows,
								!0,
							);
							return H
								? ((H[0] -= 1),
									(H[1] -= 1),
									(H[1] += O.bufferService.buffer.ydisp),
									H)
								: null;
						},
						ve = (R, U, O) =>
							typeof R.getCell == 'function'
								? (R.getCell(U) ?? null)
								: typeof R.loadCell == 'function' && O.workCell
									? R.loadCell(U, O.workCell)
									: null,
						be = (R, U, O) => {
							let H = Math.max(0, U);
							const N = ve(R, H, O);
							if (!N || N.getWidth() !== 0) return H;
							for (; H > 0; ) {
								H -= 1;
								const G = ve(R, H, O);
								if (G && G.getWidth() > 0) return H;
							}
							return H;
						},
						te = (R) => {
							var ge, _e, ee;
							const U = y();
							if (!U) return { start: R, end: R };
							const [O, H] = R,
								N = U.bufferService.buffer.lines.get(H);
							if (!N) return { start: R, end: R };
							const G = be(N, O, U),
								ie = ve(N, G, U),
								Z =
									((ge = ie == null ? void 0 : ie.getChars) == null
										? void 0
										: ge.call(ie)) ?? '',
								Q = P.options.wordSeparator ?? '',
								de = (ce) => ce.trim().length === 0 || Q.includes(ce);
							if (!Z || de(Z)) return { start: [G, H], end: [G, H] };
							let re = G,
								he = G;
							for (; re > 0; ) {
								const ce = be(N, re - 1, U),
									se = ve(N, ce, U),
									ne =
										((_e = se == null ? void 0 : se.getChars) == null
											? void 0
											: _e.call(se)) ?? '';
								if (!ne || de(ne) || ((re = ce), ce === 0)) break;
							}
							for (; he < U.bufferService.cols - 1; ) {
								const ce = be(N, he + 1, U);
								if (ce <= he) break;
								const se = ve(N, ce, U),
									ne =
										((ee = se == null ? void 0 : se.getChars) == null
											? void 0
											: ee.call(se)) ?? '';
								if (
									!ne ||
									de(ne) ||
									((he = ce), he >= U.bufferService.cols - 1)
								)
									break;
							}
							return { start: [re, H], end: [he, H] };
						},
						xe = () => {
							let R = '';
							try {
								R = P.getSelection() || '';
							} catch {
								R = '';
							}
							R !== p && ((p = R), pe({ type: 'selectionChanged', text: R }));
						},
						Re = () => {
							if (!n) {
								(i && (i.style.display = 'none'),
									e && (e.style.display = 'none'));
								return;
							}
							const R = y();
							if (!R) return;
							const U = R.selectionService,
								O = U._model,
								H = U.selectionStart ?? O.selectionStart,
								N = U.selectionEnd ?? O.selectionEnd;
							if (!H || !N) {
								(i && (i.style.display = 'none'),
									e && (e.style.display = 'none'));
								return;
							}
							const G = E(),
								ie = G == null ? void 0 : G.cellWidth,
								Z = G == null ? void 0 : G.cellHeight;
							if (!ie || !Z) return;
							const Q = P.element,
								de = R.screenElement.getBoundingClientRect(),
								re = Q == null ? void 0 : Q.getBoundingClientRect();
							if (!Q || !re) return;
							const he = de.left - re.left,
								ge = de.top - re.top,
								_e = R.bufferService.buffer.ydisp,
								ee = H[1] - _e,
								ce = N[1] - _e;
							if (ee < 0 || ee >= R.bufferService.rows)
								i && (i.style.display = 'none');
							else {
								const ne = he + H[0] * ie,
									me = ge + ee * Z;
								((i = i ?? document.createElement('div')),
									(i.className = 'fressh-selection-handle'),
									D(i, 'start'),
									B(i, Q));
								const Ce = C(i) ?? { left: 0, top: 0, width: m, height: w },
									ye = F('start');
								(K(i, ye.glyphLeft),
									q(i, ye.glyphTop),
									oe(
										i,
										ye.glyphLeft + Ce.left,
										ye.glyphTop + Ce.top,
										Ce.width,
										Ce.height,
									),
									(i.style.display = 'block'),
									(i.style.left = `${ne - ye.anchorOffsetX}px`),
									(i.style.top = `${me - ye.anchorOffsetY}px`),
									(i.style.visibility = 'visible'),
									i.parentElement || Q.appendChild(i));
							}
							if (!(ce >= 0 && ce < R.bufferService.rows))
								e && (e.style.display = 'none');
							else {
								const ne = he + (N[0] + 1) * ie,
									me = ge + (ce + 1) * Z;
								((e = e ?? document.createElement('div')),
									(e.className = 'fressh-selection-handle'),
									D(e, 'end'),
									B(e, Q));
								const Ce = C(e) ?? { left: 0, top: 0, width: m, height: w },
									ye = F('end');
								(K(e, ye.glyphLeft),
									q(e, ye.glyphTop),
									oe(
										e,
										ye.glyphLeft + Ce.left,
										ye.glyphTop + Ce.top,
										Ce.width,
										Ce.height,
									),
									(e.style.display = 'block'),
									(e.style.left = `${ne - ye.anchorOffsetX}px`),
									(e.style.top = `${me - ye.anchorOffsetY}px`),
									(e.style.visibility = 'visible'),
									e.parentElement || Q.appendChild(e));
							}
							(i || e) && He();
						},
						Te = (R, U) => {
							var H, N;
							const O = y();
							if (O) {
								pe({
									type: 'debug',
									message: `updateSelectionRange start=${R[0]},${R[1]} end=${U[0]},${U[1]}`,
								});
								try {
									const G =
											O.bufferService.buffer.ydisp + O.bufferService.rows - 1,
										ie = O.bufferService.buffer.ydisp,
										Z = Math.max(ie, Math.min(R[1], G)),
										Q = Math.max(ie, Math.min(U[1], G)),
										de = (Ce) =>
											Math.max(0, Math.min(Ce, O.bufferService.cols - 1));
									let [re, he] = [de(R[0]), Z],
										[ge, _e] = [de(U[0]), Q];
									(he > _e || (he === _e && re > ge)) &&
										(t === 'start'
											? ((he = _e), (re = ge))
											: t === 'end' && ((_e = he), (ge = re)));
									const ee = E();
									if (ee) {
										const Ce = {
											minRow: ie,
											maxRow: G,
											cols: O.bufferService.cols,
										};
										if (x([re, he], [ge, _e], ee) < u)
											if (t === 'start' || t === 'end') {
												const ke = t === 'start',
													De = ke ? [ge, _e] : [re, he],
													fe = ke ? [re, he] : [ge, _e],
													Le = ke ? -1 : 1,
													Me = z(De, fe, Le, ee, Ce);
												if (Me.achieved)
													ke
														? ((re = Me.pos[0]), (he = Me.pos[1]))
														: ((ge = Me.pos[0]), (_e = Me.pos[1]));
												else {
													const Oe = z(fe, De, Le * -1, ee, Ce);
													Oe.achieved &&
														(ke
															? ((ge = Oe.pos[0]), (_e = Oe.pos[1]))
															: ((re = Oe.pos[0]), (he = Oe.pos[1])));
												}
											} else {
												const ke = z([re, he], [ge, _e], 1, ee, Ce);
												if (ke.achieved) ((ge = ke.pos[0]), (_e = ke.pos[1]));
												else {
													const De = z([ge, _e], [re, he], -1, ee, Ce);
													De.achieved && ((re = De.pos[0]), (he = De.pos[1]));
												}
											}
									}
									const se =
											ge < O.bufferService.cols - 1
												? ge + 1
												: O.bufferService.cols,
										ne = Math.max(
											1,
											(_e - he) * O.bufferService.cols + (se - re),
										),
										me = O.selectionService;
									me.setSelection
										? me.setSelection(re, he, ne)
										: ((O.selectionService._model.selectionStart = [re, he]),
											(O.selectionService._model.selectionEnd = [se, _e]),
											(O.selectionService._model.selectionStartLength = 0),
											O.selectionService.refresh(!0),
											(N = (H = O.selectionService)
												._fireEventIfSelectionChanged) == null || N.call(H));
									try {
										const Ce = P.getSelection() || '';
										pe({
											type: 'debug',
											message: `selection updated len=${Ce.length} start=${re},${he} end=${se},${_e} ydisp=${O.bufferService.buffer.ydisp}`,
										});
									} catch {
										pe({
											type: 'debug',
											message: `selection updated start=${re},${he} end=${se},${_e} ydisp=${O.bufferService.buffer.ydisp}`,
										});
									}
									Re();
								} catch (G) {
									pe({
										type: 'debug',
										message: `selection update error: ${String(G)}`,
									});
								}
							}
						},
						He = () => {
							if (!P.element) return;
							const U = (O, H) => {
								if (O.dataset.listenersAttached === 'true') return;
								const N = (Q) => {
										n &&
											((t = H),
											(o = Q.pointerId),
											O.setPointerCapture(Q.pointerId),
											Q.preventDefault(),
											Q.stopPropagation());
									},
									G = (Q) => {
										if (!n || t !== H || o !== Q.pointerId) return;
										const de = Se(Q.clientX, Q.clientY);
										if (!de) return;
										const re = y();
										if (!re) return;
										const he = re.bufferService.buffer.lines.get(de[1]),
											ge = he ? be(he, de[0], re) : de[0],
											_e = re.selectionService,
											ee = _e._model,
											ce = _e.selectionStart ?? ee.selectionStart ?? de,
											se = _e.selectionEnd ?? ee.selectionEnd ?? de,
											ne = J(
												se,
												re.bufferService.cols,
												re.bufferService.buffer.ydisp,
											);
										(H === 'start' ? Te([ge, de[1]], ne) : Te(ce, [ge, de[1]]),
											Q.preventDefault(),
											Q.stopPropagation());
									},
									ie = (Q) => {
										o === Q.pointerId &&
											((t = null),
											(o = null),
											O.releasePointerCapture(Q.pointerId),
											xe(),
											Q.preventDefault(),
											Q.stopPropagation());
									},
									Z = (Q) => {
										o === Q.pointerId &&
											((t = null),
											(o = null),
											O.releasePointerCapture(Q.pointerId),
											Q.preventDefault(),
											Q.stopPropagation());
									};
								(O.addEventListener('pointerdown', N),
									O.addEventListener('pointermove', G),
									O.addEventListener('pointerup', ie),
									O.addEventListener('pointercancel', Z),
									(O.dataset.listenersAttached = 'true'));
							};
							(i && U(i, 'start'), e && U(e, 'end'));
						},
						Ae = (R, U = {}) => {
							var ie, Z, Q, de, re, he, ge, _e;
							if ((!R && n && !U.force && Date.now() - d < j) || n === R)
								return;
							((n = R), R && (d = Date.now()), S());
							const O = document.body || document.documentElement;
							(O == null || O.classList.toggle(a, R),
								document.body && (document.body.style.boxShadow = ''),
								pe({ type: 'selectionModeChanged', enabled: R }),
								pe({
									type: 'debug',
									message: `selection mode ${R ? 'enabled' : 'disabled'}`,
								}));
							const H = P,
								N =
									H._selectionService ??
									((ie = H._core) == null ? void 0 : ie._selectionService);
							let G = !1;
							try {
								const ee = (Z = P.modes) == null ? void 0 : Z.mouseTrackingMode;
								G = !!(ee && ee !== 'none');
							} catch {
								G = !1;
							}
							if (R) {
								try {
									((P.options.disableStdin = !0),
										(P.options.screenReaderMode = !0));
								} catch (ee) {
									pe({
										type: 'debug',
										message: `selection options set error: ${String(ee)}`,
									});
								}
								((Q = N == null ? void 0 : N.enable) == null || Q.call(N),
									(de = P.element) == null ||
										de.classList.remove('enable-mouse-events'),
									pe({
										type: 'debug',
										message: `selection internals ${N ? 'ok' : 'missing'}`,
									}),
									h ||
										(h = (() => {
											var De;
											const ee = P.element;
											if (!ee) return null;
											const se = (() => {
												if (s) return s;
												const fe = document.createElement('div');
												return (
													(fe.style.position = 'absolute'),
													(fe.style.left = '0'),
													(fe.style.right = '0'),
													(fe.style.top = '0'),
													(fe.style.bottom = '0'),
													(fe.style.background = f),
													(fe.style.border = 'none'),
													(fe.style.zIndex = '20'),
													(fe.style.touchAction = 'none'),
													(fe.style.pointerEvents = 'auto'),
													window.getComputedStyle(ee).position === 'static' &&
														(ee.style.position = 'relative'),
													ee.appendChild(fe),
													(s = fe),
													fe
												);
											})();
											(De = P.element) == null ||
												De.style.setProperty('outline', 'none');
											let ne = null;
											const me = (fe) => {
													if (!n || fe.touches.length !== 1) return;
													const Le = fe.touches.item(0);
													Le &&
														((ne = { x: Le.clientX, y: Le.clientY }),
														fe.preventDefault());
												},
												Ce = (fe) => {
													if (!ne) return;
													const Le = fe.touches.item(0);
													if (!Le) return;
													const Me = Le.clientX - ne.x,
														Oe = Le.clientY - ne.y;
													(Math.hypot(Me, Oe) > V && (ne = null),
														fe.preventDefault());
												},
												ye = (fe) => {
													ne && ((ne = null), Ae(!1), fe.preventDefault());
												},
												ke = (fe) => {
													((ne = null), fe.preventDefault());
												};
											return (
												se.addEventListener('touchstart', me, { passive: !1 }),
												se.addEventListener('touchmove', Ce, { passive: !1 }),
												se.addEventListener('touchend', ye, { passive: !1 }),
												se.addEventListener('touchcancel', ke, { passive: !1 }),
												() => {
													var fe;
													(se.removeEventListener('touchstart', me),
														se.removeEventListener('touchmove', Ce),
														se.removeEventListener('touchend', ye),
														se.removeEventListener('touchcancel', ke),
														(se.style.pointerEvents = 'none'),
														(se.style.display = 'none'),
														(fe = P.element) == null ||
															fe.style.setProperty('outline', 'none'));
												}
											);
										})()),
									s &&
										((s.style.pointerEvents = 'auto'),
										(s.style.display = 'block')),
									Re());
							} else {
								try {
									((P.options.disableStdin = _.disableStdin),
										(P.options.screenReaderMode = _.screenReaderMode));
								} catch (ee) {
									pe({
										type: 'debug',
										message: `selection options reset error: ${String(ee)}`,
									});
								}
								(G
									? ((re = N == null ? void 0 : N.disable) == null ||
											re.call(N),
										(he = P.element) == null ||
											he.classList.add('enable-mouse-events'))
									: ((ge = N == null ? void 0 : N.enable) == null || ge.call(N),
										(_e = P.element) == null ||
											_e.classList.remove('enable-mouse-events')),
									(t = null),
									(o = null),
									P.clearSelection(),
									i && (i.style.display = 'none'),
									e && (e.style.display = 'none'),
									xe(),
									h && (h(), (h = null)));
							}
						};
					((() => {
						var _e;
						if (g) return;
						const R =
							((_e = y()) == null ? void 0 : _e.screenElement) ?? P.element;
						if (!R) return;
						let U = null,
							O = null,
							H = !1,
							N = null;
						const G = () => {
								(U && (clearTimeout(U), (U = null)),
									(O = null),
									(H = !1),
									(N = null));
							},
							ie = (ee, ce) => {
								n ||
									((O = { x: ee, y: ce }),
									(H = !1),
									(U = setTimeout(() => {
										if (!O) return;
										const se = Se(O.x, O.y);
										if (!se) {
											pe({
												type: 'debug',
												message: `long-press coords unavailable at ${O.x},${O.y}`,
											});
											return;
										}
										(Ae(!0, { force: !0 }),
											pe({
												type: 'debug',
												message: `long-press coords ${se[0]},${se[1]}`,
											}));
										let ne = { start: se, end: se };
										try {
											((ne = te(se)),
												pe({
													type: 'debug',
													message: `expandToWord start=${ne.start[0]},${ne.start[1]} end=${ne.end[0]},${ne.end[1]}`,
												}));
										} catch (me) {
											pe({
												type: 'debug',
												message: `expandToWord error: ${String(me)}`,
											});
										}
										(pe({
											type: 'debug',
											message: `apply selection start=${ne.start[0]},${ne.start[1]} end=${ne.end[0]},${ne.end[1]}`,
										}),
											Te(ne.start, ne.end),
											Re(),
											xe(),
											(H = !0));
									}, $)));
							},
							Z = (ee, ce) => {
								if (!O || !U) return;
								const se = ee - O.x,
									ne = ce - O.y;
								Math.hypot(se, ne) > V && G();
							},
							Q = (ee) => {
								var ce;
								(H &&
									((ce = ee == null ? void 0 : ee.preventDefault) == null ||
										ce.call(ee)),
									G());
							};
						if ('PointerEvent' in window) {
							const ee = (me) => {
									n ||
										(me.pointerType && me.pointerType !== 'touch') ||
										((N = me.pointerId), ie(me.clientX, me.clientY));
								},
								ce = (me) => {
									N === me.pointerId && Z(me.clientX, me.clientY);
								},
								se = (me) => {
									N === me.pointerId && Q(me);
								},
								ne = (me) => {
									N === me.pointerId && G();
								};
							(R.addEventListener('pointerdown', ee),
								R.addEventListener('pointermove', ce),
								R.addEventListener('pointerup', se),
								R.addEventListener('pointercancel', ne),
								(g = () => {
									(R.removeEventListener('pointerdown', ee),
										R.removeEventListener('pointermove', ce),
										R.removeEventListener('pointerup', se),
										R.removeEventListener('pointercancel', ne),
										G());
								}));
							return;
						}
						const de = (ee) => {
								if (n || ee.touches.length !== 1) return;
								const ce = ee.touches.item(0);
								ce && ie(ce.clientX, ce.clientY);
							},
							re = (ee) => {
								if (!O || !U) return;
								const ce = ee.touches.item(0);
								ce && Z(ce.clientX, ce.clientY);
							},
							he = (ee) => {
								Q(ee);
							},
							ge = () => {
								G();
							};
						(R.addEventListener('touchstart', de, { passive: !0 }),
							R.addEventListener('touchmove', re, { passive: !0 }),
							R.addEventListener('touchend', he, { passive: !1 }),
							R.addEventListener('touchcancel', ge, { passive: !0 }),
							(g = () => {
								(R.removeEventListener('touchstart', de),
									R.removeEventListener('touchmove', re),
									R.removeEventListener('touchend', he),
									R.removeEventListener('touchcancel', ge),
									G());
							}));
					})(),
						P.onResize(() => {
							n && Re();
						}),
						(window.terminal = P),
						(window.fitAddon = ae),
						P.onData((R) => {
							pe({ type: 'input', str: R });
						}),
						P.onResize(({ cols: R, rows: U }) => {
							R >= 2 && U >= 1 && pe({ type: 'sizeChanged', cols: R, rows: U });
						}),
						window.__FRESSH_XTERM_MSG_HANDLER__ &&
							window.removeEventListener(
								'message',
								window.__FRESSH_XTERM_MSG_HANDLER__,
							));
					const Be = (R) => {
						try {
							const U = R.data;
							if (!U || typeof U.type != 'string') return;
							const O = (H) => {
								const N = Rt(H);
								P.write(N);
							};
							switch (U.type) {
								case 'write': {
									O(U.bStr);
									break;
								}
								case 'writeMany': {
									for (const H of U.chunks) O(H);
									break;
								}
								case 'resize': {
									P.resize(U.cols, U.rows);
									break;
								}
								case 'fit': {
									(ae.fit(),
										P.cols >= 2 &&
											P.rows >= 1 &&
											pe({ type: 'sizeChanged', cols: P.cols, rows: P.rows }));
									break;
								}
								case 'getSelection': {
									const H = P.getSelection();
									pe({ type: 'selection', requestId: U.requestId, text: H });
									break;
								}
								case 'setSelectionMode': {
									(pe({
										type: 'debug',
										message: `setSelectionMode ${U.enabled ? 'on' : 'off'}`,
									}),
										Ae(U.enabled, { force: !0 }));
									break;
								}
								case 'setOptions': {
									const { theme: H, ...N } = U.opts;
									for (const G in N) {
										if (G === 'cols' || G === 'rows') continue;
										const ie = N[G];
										P.options[G] = ie;
									}
									(H && (P.options.theme = { ...P.options.theme, ...H }),
										r(U.opts.fontFamily),
										H != null &&
											H.background &&
											(document.body.style.backgroundColor = H.background));
									break;
								}
								case 'clear': {
									P.clear();
									break;
								}
								case 'focus': {
									P.focus();
									break;
								}
							}
						} catch (U) {
							pe({
								type: 'debug',
								message: `message handler error: ${String(U)}`,
							});
						}
					};
					((window.__FRESSH_XTERM_MSG_HANDLER__ = Be),
						window.addEventListener('message', Be),
						setTimeout(() => {
							const R = document.querySelector('.xterm-helper-textarea');
							if (!R) throw new Error('xterm-helper-textarea not found');
							return (
								R.setAttribute('autocomplete', 'off'),
								R.setAttribute('autocorrect', 'off'),
								R.setAttribute('autocapitalize', 'none'),
								R.setAttribute('spellcheck', 'false'),
								R.setAttribute('inputmode', 'verbatim'),
								pe({ type: 'initialized' })
							);
						}, 200));
				} catch (le) {
					pe({
						type: 'debug',
						message: `error in xtermjs-webview: ${String(le)}`,
					});
				}
			};
		</script>
		<style rel="stylesheet" crossorigin>
			/**
 * Copyright (c) 2014 The xterm.js authors. All rights reserved.
 * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)
 * https://github.com/chjj/term.js
 * @license MIT
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * Originally forked from (with the author's permission):
 *   Fabrice Bellard's javascript vt100 for jslinux:
 *   http://bellard.org/jslinux/
 *   Copyright (c) 2011 Fabrice Bellard
 *   The original design remains. The terminal itself
 *   has been extended to include xterm CSI codes, among
 *   other features.
 */
			.xterm {
				cursor: text;
				position: relative;
				user-select: none;
				-ms-user-select: none;
				-webkit-user-select: none;
			}
			.xterm.focus,
			.xterm:focus {
				outline: none;
			}
			.xterm .xterm-helpers {
				position: absolute;
				top: 0;
				z-index: 5;
			}
			.xterm .xterm-helper-textarea {
				padding: 0;
				border: 0;
				margin: 0;
				position: absolute;
				opacity: 0;
				left: -9999em;
				top: 0;
				width: 0;
				height: 0;
				z-index: -5;
				white-space: nowrap;
				overflow: hidden;
				resize: none;
			}
			.xterm .composition-view {
				background: #000;
				color: #fff;
				display: none;
				position: absolute;
				white-space: nowrap;
				z-index: 1;
			}
			.xterm .composition-view.active {
				display: block;
			}
			.xterm .xterm-viewport {
				background-color: #000;
				overflow-y: scroll;
				cursor: default;
				position: absolute;
				right: 0;
				left: 0;
				top: 0;
				bottom: 0;
			}
			.xterm .xterm-screen {
				position: relative;
			}
			.xterm .xterm-screen canvas {
				position: absolute;
				left: 0;
				top: 0;
			}
			.xterm .xterm-scroll-area {
				visibility: hidden;
			}
			.xterm-char-measure-element {
				display: inline-block;
				visibility: hidden;
				position: absolute;
				top: 0;
				left: -9999em;
				line-height: normal;
			}
			.xterm.enable-mouse-events {
				cursor: default;
			}
			.xterm.xterm-cursor-pointer,
			.xterm .xterm-cursor-pointer {
				cursor: pointer;
			}
			.xterm.column-select.focus {
				cursor: crosshair;
			}
			.xterm .xterm-accessibility:not(.debug),
			.xterm .xterm-message {
				position: absolute;
				left: 0;
				top: 0;
				bottom: 0;
				right: 0;
				z-index: 10;
				color: transparent;
				pointer-events: none;
			}
			.xterm .xterm-accessibility-tree:not(.debug) *::selection {
				color: transparent;
			}
			.xterm .xterm-accessibility-tree {
				-webkit-user-select: text;
				user-select: text;
				white-space: pre;
			}
			.xterm .live-region {
				position: absolute;
				left: -9999px;
				width: 1px;
				height: 1px;
				overflow: hidden;
			}
			.xterm-dim {
				opacity: 1 !important;
			}
			.xterm-underline-1 {
				text-decoration: underline;
			}
			.xterm-underline-2 {
				text-decoration: double underline;
			}
			.xterm-underline-3 {
				text-decoration: wavy underline;
			}
			.xterm-underline-4 {
				text-decoration: dotted underline;
			}
			.xterm-underline-5 {
				text-decoration: dashed underline;
			}
			.xterm-overline {
				text-decoration: overline;
			}
			.xterm-overline.xterm-underline-1 {
				text-decoration: overline underline;
			}
			.xterm-overline.xterm-underline-2 {
				text-decoration: overline double underline;
			}
			.xterm-overline.xterm-underline-3 {
				text-decoration: overline wavy underline;
			}
			.xterm-overline.xterm-underline-4 {
				text-decoration: overline dotted underline;
			}
			.xterm-overline.xterm-underline-5 {
				text-decoration: overline dashed underline;
			}
			.xterm-strikethrough {
				text-decoration: line-through;
			}
			.xterm-screen .xterm-decoration-container .xterm-decoration {
				z-index: 6;
				position: absolute;
			}
			.xterm-screen
				.xterm-decoration-container
				.xterm-decoration.xterm-decoration-top-layer {
				z-index: 7;
			}
			.xterm-decoration-overview-ruler {
				z-index: 8;
				position: absolute;
				top: 0;
				right: 0;
				pointer-events: none;
			}
			.xterm-decoration-top {
				z-index: 2;
				position: relative;
			}
		</style>
	</head>
	<body style="margin: 0; padding: 0px; width: 100%; height: 100%">
		<div
			id="terminal"
			style="margin: 0; padding: 0; width: 100%; height: 100%"
		></div>
	</body>
</html>
